function ShowLayoutEmpty(n){var t=$(".d-page-part");n?t.show():(t.hide(),t.has(".d-widget").show())}function ValidateCpf(n){n=n.replace(".","");n=n.replace(".","");n=n.replace("-","");n=n;var r,f,i,t,u,e;if(e=1,n.length!=11)return!1;for(t=0;t<n.length-1;t++)if(n.charAt(t)!=n.charAt(t+1)){e=0;break}if(e)return!1;for(r=n.substring(0,9),f=n.substring(9),i=0,t=10;t>1;t--)i+=r.charAt(10-t)*t;if(u=i%11<2?0:11-i%11,u!=f.charAt(0))return!1;for(r=n.substring(0,10),i=0,t=11;t>1;t--)i+=r.charAt(11-t)*t;return(u=i%11<2?0:11-i%11,u!=f.charAt(1))?!1:!0}function validarCNPJPadrao(n){const t=n.replace(/[^0-9A-Za-z]/g,"").toUpperCase();if(t.length!==14)return!1;if(/^\d+$/.test(t)){if(/^(\d)\1+$/.test(t))return!1;let n=12,u=t.substring(0,n),e=t.substring(n),i=0,r=n-7;for(let t=n;t>=1;t--)i+=parseInt(u.charAt(n-t))*r--,r<2&&(r=9);let f=i%11<2?0:11-i%11;if(f!=e.charAt(0))return!1;n=13;u=t.substring(0,n);i=0;r=n-7;for(let t=n;t>=1;t--)i+=parseInt(u.charAt(n-t))*r--,r<2&&(r=9);return(f=i%11<2?0:11-i%11,f!=e.charAt(1))?!1:!0}return validarCNPJAlfanumericoSERPRO(t)}function validarCNPJAlfanumericoSERPRO(n){const t={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,A:17,B:18,C:19,D:20,E:21,F:22,G:23,H:24,I:25,J:26,K:27,L:28,M:29,N:30,O:31,P:32,Q:33,R:34,S:35,T:36,U:37,V:38,W:39,X:40,Y:41,Z:42},u=n.substring(0,12),i=n.substring(12);if(!/^\d{2}$/.test(i))return!1;const c=[5,4,3,2,9,8,7,6,5,4,3,2];let f=0;for(let n=0;n<12;n++){const i=u.charAt(n);if(!t.hasOwnProperty(i))return!1;f+=t[i]*c[n]}const e=f%11,o=e<=1?0:11-e;if(o!=i.charAt(0))return!1;const s=[6,5,4,3,2,9,8,7,6,5,4,3,2];let r=0;for(let n=0;n<12;n++){const i=u.charAt(n);r+=t[i]*s[n]}r+=o*s[12];const h=r%11,l=h<=1?0:11-h;return l!=i.charAt(1)?!1:!0}function ValidateCnpj(n){return n?(n=n.replace(/[^\w\d]/g,""),n.length!==14)?!1:new Set(n).size===1?!1:n.length===14?validarCNPJPadrao(n)?!0:(/[A-Za-z]/.test(n),!1):!1:!1}(function(n,t,i,r){n.extend(String.prototype,{startsWith:function(t){return n.type(this)=="string"?this.slice(0,t.length)==t:!1},endsWith:function(t){return n.type(this)=="string"?this.slice(-t.length)==t:!1},contains:function(t){return n.type(this)=="string"?this.indexOf(t)>-1:!1},isUrl:function(){return/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/.test(this)}});tao={};tao.mapper=function(n,t){n!=r&&(this._init(n),t!=r&&(this.filter=t))};tao.mapper.prototype={schema:{},_init:function(t){t&&n.extend(this.schema,t)},data:function(t){return n.isArray(t)?t:t.Model!=r?t.Model:t},total:function(t){return n.isArray(t)?t.length:t.Total!=r?t.Total:void 0},filter:null,convert:function(t){var f=this,u,i;return this.schema&&!n.isEmptyObject(this.schema)&&n.isArray(t)?(u=this.schema,i=[],n.each(t,function(t,e){var o={},s,h;for(s in u)o[s]=e[u[s]];n.isFunction(f.filter)?(h=f.filter(e,o),(h==r||h==!0)&&i.push(o)):i.push(o)}),i):t},map:function(t){var i=n.isFunction(this.data)?this.data(t):t,r=n.isFunction(this.total)?this.total(t):0;return n.isFunction(this.convert)&&(i=this.convert(i)),{total:r,data:i}},setup:function(t){var r=n(t),i=n("[data-role='schema']",t);return i.length&&this._setupSchema(i),this._setupMethods(t),n(t)},_setupSchema:function(t){var r={},i=n("[data-to]",t);i.length==0?(i=n("[data-field]",t),i.each(function(t,i){var u=n(i).data("field"),f=n(i).text();u&&f&&(r[n.trim(u)]=n.trim(f))})):i.each(function(t,i){var u=n(i).data("to"),f=n(i).data("from");u&&f&&(r[n.trim(u)]=n.trim(f))});this.schema=r},_setupMethods:function(n){n.data("filter")&&(this.filter=new Function("dataItem","output",n.data("filter")));n.data("data")&&(this.data=new Function("data",n.data("data")));n.data("total")&&(this.total=new Function("data",n.data("total")));n.data("convert")&&(this.convert=new Function("data",n.data("convert")))}};n.fn.mapper=function(){var t=new tao.mapper,i;return this.data("instance")?this.data("instance"):(this.data("type")&&(i=this.data("type"),n.isFunction(eval(i))&&(t=eval("new "+i+"()"))),t.setup(this),this.data("instance",t),this.hide(),t)};tao.xmlMapper=function(n){this._init(n)};n.extend(tao.xmlMapper.prototype,tao.mapper.prototype);n.extend(tao.xmlMapper.prototype,{schema:{tagName:"node",fields:[{name:"text",role:"attribute",ref:"text"},{name:"img",role:"attribute",ref:"imageUrl"},{name:"link",role:"attribute",ref:"navigateUrl"},{name:"rel",role:"attribute",ref:"rel"},{name:"url",role:"attribute",ref:"dataUrl"},{name:"disabled",role:"attribute",ref:"disabled"},{name:"checked",role:"attribute",ref:"checked"},{name:"expanded",role:"attribute",ref:"expanded"}]},_getTypedValue:function(t){return t!=r?n.isNumeric(t)?t.indexOf(".")>-1?parseFloat(t):parseInt(t):t.indexOf("/Date(")>-1?new Date(parseInt(t.substring(6,19))):t.toLowerCase()=="true"?!0:t.toLowerCase()=="false"?!1:t:""},_mapNode:function(t){var i={},r=this;return n.each(this.schema.fields,function(n,u){var f=u.name.toString();u.role=="attribute"?t.attr(u.ref)&&(i[f]=r._getTypedValue(t.attr(u.ref))):i[f]=u.role=="element"?t.text():t[0].tagName}),i},convert:function(t){var i=this,f=function(t,u){t.each(function(t,e){var o=i._mapNode(n(e)),s;n.isArray(u)?u.push(o):(u.children==r&&(u.children=[]),u.children.push(o));s=i.schema.tagName?n(e).children(i.schema.tagName):n(e).children();s.length&&f(s,o)})},u;return t?(u=[],f(n(t.documentElement).children(),u),u):t}});tao.htmlSelectMapper=function(){};n.extend(tao.htmlSelectMapper.prototype,tao.mapper.prototype,{convert:function(t){var i=[];if(t){var f=function(n,t){for(var i=0;i<n.attributes.length;i++)n.attributes[0].name.startsWith("data-")&&(_name=n.attributes[0].name.replace("data-",""),t[_name]=n.attributes[0].value)},e=function(t){var i=n(t),u={label:i.text(),selected:i.attr("selected")!=r?i.attr("selected"):!1,value:i.attr("value")!=r?i.attr("value"):i.text()};return f(t,u),u},o=function(t){var i=[];return i.label=n(t).attr("label"),f(t,i),n(t).children().each(function(n,t){i.push(e(t))}),i},u=0;n(t).children().each(function(n,t){t.tagName.toLowerCase()=="option"?i.push(e(t)):(i.push(o(t)),u++)});u&&(i.groups=u)}return i}});tao.htmlTableMapper=function(){};n.extend(tao.htmlTableMapper.prototype,tao.mapper.prototype,{convert:function(t){var f,e,u,i,o;return n.isArray(t)||n.isPlainObject(t)?t:(f=n(">thead th,>thead td",n(t)),e=this,this.schema={columns:[]},u=[],f.each(function(t,i){e.schema.columns.push({name:n(i).attr("data-field")?n(i).attr("data-field"):n.trim(n(i).text()),title:n.trim(n(i).text()),width:n(i).data("width")!=r?n(i).dataInt("width"):0,type:n(i).attr("data-type")?n(i).attr("data-type"):"string"})}),i=this.schema.columns,o=n(t).children(":not(thead)").find("tr"),o.each(function(t,f){var o=n(f),e;o.parent()[0].tagName.toLowerCase()!="thead"&&(e={},n(">td",o).each(function(t,u){var f=n.trim(n(u).html()),o=null;isNaN(parseFloat(f))||(o=parseFloat(f));(f=="True"||f=="true")&&(o=!0);(f=="False"||f=="false")&&(o=!1);o==null&&(o=f);i[t]&&(e[i[t].name]=o,i[t].type==r&&n.extend(i[t],{type:n.type(o)}))}),u.push(e))}),u)}});tao.exprBuilder=function(){this._init()};tao.exprBuilder.prototype={_init:function(){this.exprs=[]},getResult:function(){var t=[],i=this;return n.each(this.exprs,function(n,r){t.push(i._exprStr(r))}),t.join("-")},_addExpr:function(t,i,r){var u=r;return r&&(n.type(r)=="string"||n.type(r)=="date")&&(u=encodeURIComponent('"'+r+'"')),this.exprs.push({field:t,operator:i,val:u}),this},_exprStr:function(n){var t=n.operator.replace("==","~eq~").replace("!=","~neq~").replace(">","~gt~").replace(">=","~ge~").replace("<","~lt~").replace("<=","~le~").replace(" && ","~and~").replace(" || ","~and~").replace(" !","~not~").replace("^=","~startswith~").replace("$=","~endswith~").replace("*=","~contains~");return n.field+"~"+t+"~"+n.val},addExprs:function(t){n.isArray(t)&&(this.exprs=t)},eq:function(n,t){return this._addExpr(n,"eq",t)},neq:function(n,t){return this._addExpr(n,"neq",t)},lt:function(n,t){return this._addExpr(n,"lt",t)},le:function(n,t){return this._addExpr(n,"le",t)},gt:function(n,t){return this._addExpr(n,"gt",t)},ge:function(n,t){return this._addExpr(n,"ge",t)},startswith:function(n,t){return this._addExpr(n,"startswith",t)},endswith:function(n,t){return this._addExpr(n,"endswith",t)},contains:function(n,t){return this._addExpr(n,"contains",t)},and:function(){return this._addExpr("","and","")},or:function(){return this._addExpr("","or","")},not:function(){return this._addExpr("","not","")}};n.fn.isOverflow=function(){var r=n(this),u=r.children(),f=u.length,t,i;return f?(t=0,i=0,u.map(function(){t=Math.max(t,n(this).outerWidth(!0));i=Math.max(i,n(this).outerHeight(!0))}),t>r.width()||i>r.height()):!1};n.fn.isVisible=function(t){if(t==r)return n(this).is(":visible");t?n(this).show():n(this).hide()};n.fn.isError=function(t){return t!=r?(t?n(this).addClass("d-state-error"):n(this).removeClass("d-state-error"),n(this)):n(this).hasClass("d-state-error")};n.fn.isDisable=function(t){return t!=r?(t?n(this).addClass("d-state-disable"):n(this).removeClass("d-state-disable"),n(this)):n(this).hasClass("d-state-disable")};n.fn.isHover=function(t){var i=n(this);return t!=r&&(t?i.isDisable()||i.isError()||i.addClass("d-state-hover"):i.removeClass("d-state-hover")),i.hasClass("d-state-hover")};n.fn.isActive=function(t){var i=n(this);return t!=r&&(t?i.isDisable()||i.isError()||i.addClass("d-state-active"):i.removeClass("d-state-active")),i.hasClass("d-state-active")};n.fn.isReadonly=function(t){var i=n(this);return t!=r?(t?i.addClass("d-state-readonly"):i.removeClass("d-state-readonly"),i):i.attr("readonly")!=r?i.attr("readonly")==!0||i.attr("readonly")=="readonly":i.hasClass("d-state-readonly")};n.fn.scrollEnd=function(r){var u=this,f=function(){r&&(n.isFunction(r)?r():n.isPlainObject(r)&&n.isFunction(r.callback)&&r.callback())},e=":first";return r&&r.children&&(e=r.children),this.is(i)?n(i).bind("scroll",function(){var r=(n(i).height()-n(t).height())/2+n(t).height()/3;(n(t).scrollTop()>=r||n(t).scrollTop()>n(i).height()-n(t).height()-5)&&f()}):this.bind("scroll",function(){var n=u.scrollTop(),t=u.height(),i=u.find(e+":first").height();i-n<=t&&f()}),this};n.preload=function(t){var i=n.browser.safari||n.browser.webkit?"preload":"prefetch";if(t&&n("link[href='"+t+"']").length==0)return n("<link/>").attr("href",t).attr("rel",i).appendTo(n("head"))};n.fn.preload=function(){var i=n.browser.safari||n.browser.webkit?"preload":"prefetch",t=[];return this.each(function(r,u){_href=n(u).attr("href");_href&&_href!="#"&&_href.indexOf("javascript:")==-1&&n("link[href='"+_href+"']").length==0&&t.push(n("<link/>").attr("href",_href).attr("rel",i).appendTo(n("head")))}),t};n.fn.datajQuery=function(t,i){var u=this,r=u.data(t);return r=="body"||r=="document"||r=="window"?n(r):r=="self"?u:r=="prev"?u.prev():r=="next"?u.next():r=="parent"?u.parent():r[0]=="."||r[0]==">"||r[0]=="#"?i?n(r,n(i)):n(r):i?n("#"+r,n(i)):n("#"+r)};n.fn.isEmpty=function(){return this.isInput()?this.val()==""||this.val()==r||this.val()==null:!0};n.fn.dataBool=function(t){var i=this.data(t);if(i!=r&&i!=null){if(n.type(i)=="boolean")return i;if(n.type(i)=="string")return i.toLowerCase()=="true"?!0:!1}return!1};n.fn.dataInt=function(n){return this.data(n)==r?0:parseInt(this.data(n))};n.fn.isInput=function(){var n=this[0].tagName.toLowerCase();return n=="input"||n=="select"||n=="textarea"?!0:!1};n.fn.canFocus=function(){var n=this[0].tagName.toLowerCase();return(n=="input"||n=="select"||n=="textarea"||this.attr("tabIndex")!=r)&&this.isVisible()&&!this.isReadonly()&&!this.isDisable()?!0:!1};n.notify=function(r,u){var e=n("<div/>").addClass("d-ui-widget d-notices").appendTo("body"),f={title:"Informação",message:"",modal:!0,image:null,width:300,icon:"d-icon-info",notifyClass:"d-state-info",closeButton:!1,close:!0},o,s;return n.isPlainObject(r)?n.extend(f,r):(f.message=r,u&&(f.notifyClass=u)),o=null,f.modal&&(o=n("<div/>").addClass("d-overlay").css({"z-index":n.topMostIndex()}).height(n(i).height()).appendTo("body")),e.addClass(f.notifyClass),e[0].close=function(){e.remove();o&&o.remove()},f.close&&n("<a/>").addClass("d-item-close d-icon-cross-3").attr("href","javascript:void(0);").appendTo(e).bind("click",function(){e[0].close()}),f.image&&n("<div/>").addClass("d-notices-image").append(n("<img/>").attr("src",f.image)).appendTo(e),f.icon&&n("<span/>").addClass("d-notices-icon").addClass(f.icon).appendTo(e),f.title&&n("<div/>").text(f.title).addClass("d-item-heading").appendTo(e),f.message&&(s=n("<div/>").addClass("d-item-desc").appendTo(e),s.append(f.message)),f.width&&e.width(f.width),f.closeButton&&(buttons=n("<div/>").css({padding:"10px"}).appendTo(e).append(n("<button/>").text("Fechar").width(75).click(function(){e[0].close()}).css({float:"right","margin-right":"40px"}).taoButton())),e.css({"z-index":n.topMostIndex()+1}).position({of:n(t),at:"center center",my:"center center"}),n("input").blur(),e};n.copyLink=function(r,u){var e=n("<div/>").addClass("d-ui-widget d-notices").appendTo("body"),f={title:"Url",message:"",modal:!0,image:null,width:500,icon:"d-icon-info",notifyClass:"d-state-info",closeButton:!1,close:!0},o,s;return n.isPlainObject(r)?n.extend(f,r):(f.message=r,u&&(f.notifyClass=u)),o=null,f.modal&&(o=n("<div/>").addClass("d-overlay").css({"z-index":n.topMostIndex()}).height(n(i).height()).appendTo("body")),e.addClass(f.notifyClass),e[0].close=function(){e.remove();o&&o.remove()},f.close&&n("<a/>").addClass("d-item-close d-icon-cross-3").attr("href","javascript:void(0);").appendTo(e).bind("click",function(){e[0].close()}),f.image&&n("<div/>").addClass("d-notices-image").append(n("<img/>").attr("src",f.image)).appendTo(e),f.title&&n("<div/>").text(f.title).addClass("d-item-heading").appendTo(e),f.message&&(s=n("<div/>").addClass("d-item-desc").appendTo(e),f.message.jquery?s.append(f.message):s.text(f.message)),f.icon&&n("<span/>").addClass("d-notices-icon").addClass(f.icon).appendTo(e),f.width&&e.width(f.width),f.closeButton&&(buttons=n("<div style='margin-top: 10px;'/>").appendTo(e).append(n("<button/>").text("Fechar").click(function(){e[0].close()}).css({float:"right","margin-right":"50px"}).taoButton())),e.css({"z-index":n.topMostIndex()+1}).position({of:n(t),at:"center center",my:"center center"}),n("<div/> ").appendTo(e).append(n("<button/>").text("Visualizar").click(function(){t.open(f.message,"_blank")}).css({float:"right","margin-right":"15px"}).taoButton()),n("input").blur(),e};n.info=function(t,i,u){var f=n.notify(t,i);setTimeout(function(){f&&f[0]&&f[0].close()},u!=r?u:5e3)};n.err=function(t){var i={title:"Erro",icon:"fa fa-exclamation-triangle fa-2x",message:"",icon:"fa fa-exclamation-triangle fa-2x",notifyClass:"d-state-error",close:!1,closeButton:!0};n.isPlainObject(t)?n.extend(i,t):i.message=t;n.notify({title:i.title,message:i.message,icon:i.icon,notifyClass:i.notifyClass,close:i.close||i.closeButton===!1,closeButton:i.closeButton})};n.warn=function(t){t.jquery=!0;n.notify(t,"d-state-warning")};n.success=function(t){n.notify({title:"Sucesso",message:t,icon:"fa fa-check-circle fa-2x",notifyClass:"d-state-success",close:!0})};n.loading=function(t,i){var r=n("body").data("loader"),u;"hide"==t?r&&r.length&&r[0].close():(r&&r.length&&r[0].close(),u=n("body").data("loading")?n("body").data("loading"):"Carregando",i&&(u=i),n("body").data("loader",n.notify({title:u,message:t?t:"Aguarde ...",close:!1,icon:"d-icon-loading"})))};n.fn.loading=function(t){var i,r,u;return t=="hide"?(n(this).find(".d-overlay").length&&n(this).find(".d-overlay").remove(),n(this).find(".d-overlay-loadingholder").remove(),this):n(this).find(".d-overlay").length?this:(i="data:image/gif;base64,R0lGODlhEAAQAPMPAN3d3bu7u5mZmXd3d1VVVTMzMxEREQAAAO7u7qqqqoiIiGZmZkRERCIiIgARAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAPACwAAAAAEAAQAAAEcfDJh+gideoHGkDHAVCbBBwN4ojIqAGjcigrnEkIM4MOQXymDEDnCLhwQBwiUTjiNAqGT1CiIK5RBoNaul6tgcEtqEEoDAxnyzgZNARmBQyQoLA5I0AhkBAA5E8TCAQDDwJUAHAlAAMjhxIBYyUBAVURACH5BAUHAA8ALAAAAAAPABAAAARd8Mn5xpKITiabBEaiSQXSOEBzBKMkNIZwcBMRI0ZhHUeWSYRDATAJEFu01iOxGAxYyoeAsFhAox/B6DdJMAhbwE/BSCAECYD6KNYsAAHzVTPQxiVzjCBzfxyVaiMRACH5BAUHAA8ALAAAAAAQAA8AAARa8Mn5hKJYLskaQkUmOQTSIYSIVEfSJRMQSEORgIyiFAegHD2NIRUTAA+zSWCxUh4ukoBOAMh8romBVsR9wLqUhaLZFQwCiAD6qpIoAHAEgIwRzOAPOfeLz1MiACH5BAUHAA8ALAAAAAAQABAAAARd8MkpBb1yIETYJgH2FFqHLBgyGUEXHCgCSMoCIMwgCMyBCAeD6jEg3SaBhoh4AcBuiIAgkRAtDAYHaCeYXRaHcIESagLOQ4DCskR2Zd7lMLoZtgOzTVvi1e8nfhcRACH5BAUHAAgALAAAAAAQAA4AAARGEMmJxqBYEnkOz9zWIQYoDUfQCUdJEUaAHIXlVaN2bFh3CBgepjABCI6ggi9muWQMvpsEgFERMcCqj4rgmnwZLyUgnJomEQAh+QQFBwAOACwAAAAAEAAQAAAEbNDJ6UKg2KGEkBrdAGTIwCmK14wZsAAoYChYkACeYA0FEjQMiU8RQEwQAMKhwJIAEhgEQ9DpAK5GjIBAYCiu2Iyg0TAsKNkJoCCIXinPwyEoxFU7hkPyYEhnEgcEElBRFA0HFyQYAAdtGY9+EQAh+QQFBwAPACwAAAAAEAAQAAAEX/DJ+QCgWAaEhOBCJgkAknwCI0qKSTIJZnFJYAmLxOQSYGcLAwGDuGAWCY6SI0osFoSWsskoFAarCSGJyGoOh0VXNFg0DojFobAyHBQHrE+EcBuNdMfB4oitEAQFYxQRACH5BAUHAA4ALAEAAQAPAA8AAARa0EmAUAg1yS1Dx8HCcWAALJ6DqBvgAsmAAIRSzes4FMOYc4rUaBgYGDXDTYhQS0oQqOEM8AQ0Dr3R4aBQMBoIxYEBxDYaAu4QsAUYDIhCMnHAvGcNYWtDSEYAACH5BAUHAA8ALAAAAAAQABAAAARg8Mn5EKJYWgSADVfmcR4ghBhHIgqQbXCQSIqQpcJi35jg8hiAYgicAAbImSTQCGBaFADjcNhNGAaFxnEoAA4NQWLBQAgaC4nASSsUElXJj9JAuBEEB8/haRQkDDwhSDcRACH5BAUHAA4ALAAAAQAQAA8AAARc0MnpkEWAamll2Nr1bcB1AZkjjOCUKAGipRTrLEa+gEkfFIcgAyQQwDAAgYEmEbQcsQliUXBKGocFosHoKQiIAGEgSdAEBEbAkKiACog0YlAABRoSxvDG3CgUIBEAIfkEBQcADwAsAAABABAADwAABF3wyUkfqngiUAHHwEUdh4KcqIQEX0Ae3wSw1XAknSg1fPYEQADBYTAMMsDEB5FgYHAVAikmUSygj8JhgGAQgIKFZCCQBCSC22ABKPgeBgZijRA4QfcF4XR8PwRlGBEAIfkEBQcADwAsAAABAA8ADwAABF7wyWCAvPiG07KXxJF8UvcAx+EByNmkwnghLCY4QYbsiFIwDIWHBgAMGkihrsjaBQie3GxwMHgSisAupEAsBsWEgBY7TQwBBXhhebQkiMKiN0Ak6p6FRL0TkCQJMhgRADs=",r=n("<img/>").attr("src",i).addClass("d-overlay-loadingholder"),n(this).css("position","relative"),u=n("<div/>").addClass("d-overlay").css({"z-index":n.topMostIndex()}).height(n(this).outerHeight(!0)).width(n(this).outerWidth(!0)).appendTo(this),r.appendTo(this).css({"z-index":n.topMostIndex()+1,position:"absolute"}).position({of:n(this),at:"center center",my:"center center"}),this)};n.fn.getValidationInfo=function(){if(n.validator.methods.regex||n.validator.addMethod("regex",function(n,t,i){var r;return this.optional(t)?!0:(r=new RegExp(i).exec(n),r&&r.index===0&&r[0].length===n.length)}),t._validation_parsers==r){var i=[];i.addBool=function(n){return this.push({name:n,parse:function(t,i){t.attr("data-val-"+n)!=r&&(i.rules[n]=!0,i.messages[n]=t.attr("data-val-"+n))}}),this};i.addSingle=function(n,t){return this.push({name:n,parse:function(i,u){i.attr("data-val-"+n)!=r&&(u.rules[n]=i.attr("data-val-"+t),u.messages[n]=i.attr("data-val-"+n))}}),this};i.addRange=function(n,t,i,u){return this.push({parse:function(f,e){if(f.attr("data-val-"+n)!=r)var o=f.attr("data-val-"+n+"-min"),s=f.attr("data-val-"+n+"-max");o&&s?(e.rules[u]=[o,s],e.messages[u]=f.attr("data-val-"+n)):o!=r?(e.rules[t]=o,e.messages[t]=f.attr("data-val-"+n)):s!=r&&(e.rules[i]=s,e.messages[i]=f.attr("data-val-"+n))}}),this};i.parse=function(n){for(var i={rules:{},messages:{}},t=0;t<this.length;t++)this[t].parse(n,i);return i};i.addSingle("accept","exts").addSingle("regex","pattern").addBool("creditcard").addBool("date").addBool("dateISO").addBool("digits").addBool("email").addBool("number").addBool("url").addBool("required").addRange("length","minlength","maxlength","rangelength").addRange("range","min","max","range").push({name:"equalTo",parse:function(n,t){n.attr("data-val-equalto")&&(t.rules.equalTo=new Function(n.data("val-other")),t.messages.equalTo=n.data("val-equalto"))}});i.push({name:"remote",parse:function(n,t){n.attr("data-val-remote")&&(t.rules.remote={url:n.data("val-remote-url")?n.data("val-remote-url"):"",type:n.data("val-remote-type")||"GET",data:{}},t.messages.remote=n.data("val-remote"))}});t._validation_parsers=i}return t._validation_parsers.parse(this)};n.confirm=function(t,i,r,u,f,e){var o=n.Deferred(),s=n("<div/>").text(t),c=n("<div/>").appendTo(s).addClass("buttons").append(n("<button/>").text(r?r:"OK").width(75).attr("data-default",!0).click(function(){f&&f();n(".d-overlay:last","body").remove();o.resolve();h.remove()}).css("float","left").taoButton()).append(n("<button/>").text(u?u:"Cancelar").width(75).click(function(){e&&e();o.reject();h.remove();n(".d-overlay:last","body").remove()}).css({float:"left","margin-left":"5px"}).taoButton()),h=n.notify({title:i?i:"Question",icon:"d-icon-question-sign",message:s,close:!1});return o};n.topMostIndex=function(){return Math.max.apply(null,n.map(n("body > *"),function(t){var i=parseInt(n(t).css("zIndex"));return i?i>2147483640?1:parseInt(n(t).css("zIndex")):1}))};n.fn.fitSize=function(t){var i=this[0].width,r=this.parent(),u=this[0].height,e=r.width(),o=r.height(),f=Math.min(e/i,o/u);return n(this).width(0).height(0).show().stop(!0,!1).animate({height:u*f+"px",width:i*f+"px"},function(){n.isFunction(t)&&t()}),this};n.fn.resize=function(n,t){var s=this,i=s.width(),r=s.height(),u=n,f=t;if(i>u){var e=u,h=i/u,o=r/h;if(o>f){var c=f,l=o/f,a=e/l;i=a;r=c}else i=e,r=o}else if(r>f){var o=f,h=r/f,e=i/h;if(e>u){var a=u,l=e/u,c=o/l;i=a;r=c}else i=e,r=o}this.css({width:i+"px",height:r+"px","margin-top":f/2-r/2+"px","margin-left":u/2-i/2+"px"})};n.getFileName=function(n){if(n){var t=n.split("/");return t[t.length-1]}return""};n.getFileExtension=function(n){return n?n.split(".").pop():""};n.getGEOLocation=function(){var t=n.Deferred();if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(n){try{var i={lon:n.coords.longitude,lat:n.coords.latitude},r=new google.maps.Geocoder,u=new google.maps.LatLng(i.lat,i.lon);r.geocode({latLng:u},function(n,r){return r==google.maps.GeocoderStatus.OK?t.resolve({result:n,coords:i,error:""}):t.reject({error:"Geocode was not successful for the following reason: "+r})})}catch(f){return t.reject({error:"Map service is not avalidable."})}},function(n){return t.reject({error:n})},{timeout:6e4});else return t.reject({error:"Your browser doesnot support geo location."});return t};n.jsonDate=function(n){return new Date(parseInt(n.substring(6,19)))};n.fn.insertFormat=function(t){var u=n(this),f,r;if(i.selection)u.focus(),f=i.selection.createRange(),f.text=t.replace("{0}",f.text);else if(r=u[0],r.selectionEnd){var e=r.selectionStart,o=r.selectionEnd,s=t.replace("{0}",r.value.substring(e,o)),h=r.value.substring(0,e),c=r.value.substring(o);u.val(h+s+c)}else u.val(u.val()+t)};n.dateDiff=function(n,t){var i=t-n;return{minutes:i/6e4,hours:i/36e5,days:i/864e5}};Number.prototype.toShort=function(){return this>100&&this<1e3?"99+":this>1e3&&this<1e4?(this/1e3).toFixed()+"k+":this>1e4?(this/1e4).toFixed()+"m+":this.toString()};String.prototype.slug=function(n){var t,r,i;if(n||(n="-"),!this)return"";for(t=this.toLowerCase(),r=[/ /g,/;/g,/,/g,/\?/g,/\>/g,/\</g,/\./g,/\'/g,/\\/g,/\//g,/\\/g,/\~/g,/\:/g,/\!/g,/@/g,/#/g,/\{/g,/\}/g,/\[/g,/\]/g,/\|/g,/_/g,/\=/g,/\$/g,/\%/g,/\^/g,/\*/g,/\(/g,/\)/g,/\+/g,/-/g,/\&/g,/！/g,/·/g,/￥/g,/%/g,/…/g,/—/g,/（/g,/）/g,/＝/g,/、/g,/，/g,/。/g,/‘/g,/’/g,/“/g,/”/g,/；/g,/：/g,/？/g,/《/g,/》/g],i=0;i<r.length;i++)t=t.replace(r[i],n);for(t.endsWith(n)&&t.length>=2&&(t=t.substring(0,t.Length-1));t.indexOf(n+n)>-1;)t=t.replace(/--/g,n);return t};n.friendlyDate=function(i,r){var e=n.jsonDate(i),f=n.dateDiff(e,new Date),u={theDayBeforeYesterday:"The day before yesterday",yesterday:"Yesterday",ago:" ago",days:"days",hours:"hours",minutes:"minutes",justNow:"just now"};return r&&n.extend(u,r),f.days>1?f.days<=3?f.days<=3&&f.days>=2?u.theDayBeforeYesterday:f.days<=2&&f.days>=1?u.yesterday:Math.round(f.days)+" "+u.days+u.ago:t.Intl?Intl.DateTimeFormat(n("body").attr("lang")).format(e):e.toLocaleString():f.hours>1?Math.round(f.hours)+" "+u.hours+u.ago:u.minutes?Math.round(f.minutes)+" "+u.minutes+u.ago:u.justNow};n.reportAbuse=function(t,i,r,u,f){n.ajaxDialog({title:f?f:"Report abuse",url:n("body").data("root")+"abuse/report?locale="+n("body").attr("lang"),open:function(){n("#abuse_uri").val(t);n("#abuse_owner").val(i);n("#abuse_objectType").val(r);n("#abuse_content").val(u)}})};n.design=function(t,i,r){var u=n("<div/>").appendTo("body");return n("body").blockUI(),u.load(n("body").data("root")+"theme/design?locale="+n("body").attr("lang")+"&name="+t+"&element="+i,function(){n("body").unblockUI();u.unobtrusive_ajax().taoUI();u.dialog({title:r?r:"Change style",autoOpen:!0,resizable:!1,close:function(){u.remove()}})}),u};n.help=function(t,i){var r=n("body");dlg=n.openDlg({title:t?t:"Help",url:r.data("root")+"widget/help/"+i,autoOpen:!0})};n.previewSite=function(n){n+="?preview=true";var i=t.innerHeight-100,r=t.innerWidth-100;t.open(n,"Pagina",'status=no, toolbar=no, location=no, directories=no, resisable=no, titlebar=no, scrollbars=yes, top=50, left=50, style.display="block", width='+r+", height="+i)};n.login=function(t){var r=n("body"),u=n.openDlg({title:t?t:"Login",url:r.data("root")+"login?locale="+r.attr("lang"),autoOpen:!0}),f=n.Deferred();n(i).one("login",function(t){return n.loading("hide"),u&&u.taoDialog("close"),r.data("auth",!0),n(i).data("user",t),f.resolve(t)});return f};n.mailto=function(t,i){var r=n("body");return n.openDlg({title:i?i:"Send mail",url:r.data("root")+"account/sendmail?locale="+r.attr("lang")+"&"+t,autoOpen:!0,width:300})};n.currentUser=function(){return n(i).data("user")};n.isAuth=function(){return n("body").dataBool("auth")};n.hex2rgb=function(n,t){for(var i=n.replace("#","").match(/(.{2})/g),r=3;r--;)i[r]=parseInt(i[r],16);return typeof t=="undefined"?"rgb("+i.join(", ")+")":"rgba("+i.join(", ")+", "+t+")"};n.rgb2hex=function(n){return n.startsWith("rgb")?(n=n.replace(/rgb\(|\)/g,"").split(","),n[0]=parseInt(n[0],10).toString(16).toLowerCase(),n[1]=parseInt(n[1],10).toString(16).toLowerCase(),n[2]=parseInt(n[2],10).toString(16).toLowerCase(),n[0]=n[0].length==1?"0"+n[0]:n[0],n[1]=n[1].length==1?"0"+n[1]:n[1],n[2]=n[2].length==1?"0"+n[2]:n[2],"#"+n.join("")):n};n.invertColor=function(t){var i=t;return t.startsWith("#")&&(i=n.hex2rgb(t)),str=i.replace(/rgb\(|\)/g,"").split(","),str[0]=(255-parseInt(str[0],10)).toString(16).toLowerCase(),str[1]=(255-parseInt(str[1],10)).toString(16).toLowerCase(),str[2]=(255-parseInt(str[2],10)).toString(16).toLowerCase(),str[0]=str[0].length==1?"0"+str[0]:str[0],str[1]=str[1].length==1?"0"+str[1]:str[1],str[2]=str[2].length==1?"0"+str[2]:str[2],"#"+str.join("")};n.closePanels=function(){n(".d-panel[data-opened=true][data-display!=static]").each(function(t,i){n(i).taoPanel("close")})};var u="";n.fileDialog=function(i,r,f,e,o,s,h,c,l,a,v,y){var b=n.Deferred(),p,k,w;return f==u&&t._fileDlg?(t._fileDlg.taoDialog("open"),n("#btnSelectAnExistsFile").unbind("click").click(function(){var i=n("#selectedFilePath").val();return e&&n(e).val(i).trigger("change"),t._fileDlg.taoDialog("close"),b.resolve(i)}),b):(p={},p.showFileBrowser=h=="undefined"?!0:h,p.showHomeSharedFolders=c=="undefined"?!1:c,r&&(p.path=r),o&&(p.limit=o),s&&(p.viewSize=s),f&&(p.filter=f,u=f),l&&(p.minImgWidth=l),a&&(p.minImgHeight=a),v&&(p.fixImgWidth=v),y&&(p.fixImgHeight=y),k=n.param(p),w=n.openDlg({title:i?i:"Procurar arquivo",url:n("body").data("root")+"webfiles/files?website="+n("body").data("web")+(k?"&"+k:""),width:550,autoOpen:!0,load:function(){function i(i){n(i).closest(".d-ui-widget.d-dialog.ui-draggable").length>0&&n(i).closest(".d-ui-widget.d-dialog.ui-draggable")[0].remove();t._fileDlg=""}n("#btnSelectAnExistsFile",w).click(function(){var t=n("#selectedFilePath",w).val(),s=n("#selectedFilePath",w).hasClass("urlExterna"),h=n("#selectedFilePath").val(),r=!1,u,f,o;return(v&&v!=""&&v!="0"&&n('img[src^="'+t+'"]')[0].naturalWidth!=parseInt(v)&&(r=!0),y&&y!=""&&y!="0"&&n('img[src^="'+t+'"]')[0].naturalHeight!=parseInt(y)&&(r=!0),r)?(v&&v!=""&&v!="0"&&y&&y!=""&&y!="0"?n.err("A imagem deve ter "+v+" pixels de largura e "+y+" pixels de altura."):v&&v!=""&&v!="0"?n.err("A imagem deve ter "+v+" pixels de largura."):n.err("A imagem deve ter "+y+" pixels de altura."),!1):(l&&l!=""&&l!="0"&&n('img[src^="'+t+'"]')[0].naturalWidth<parseInt(l)&&(r=!0),a&&a!=""&&a!="0"&&n('img[src^="'+t+'"]')[0].naturalHeight<parseInt(a)&&(r=!0),r)?(l&&l!=""&&l!="0"&&a&&a!=""&&a!="0"?n.err("A imagem deve ter no mínimo "+l+" pixels de largura e "+a+" pixels de altura."):l&&l!=""&&l!="0"?n.err("A imagem deve ter no mínimo "+l+" pixels de largura."):n.err("A imagem deve ter no mínimo "+a+" pixels de altura."),!1):(s&&(u="/UploadImage",u="/"+n("body").data("web")+u,n.ajax({type:"POST",url:"/Unsplash"+u,data:{path:h,name:""},success:function(n){t=n},async:!1,error:function(n){psLib.NotifyShowHide("error:"+n.statusText,5e3)}})),e&&n(e).val(t).trigger("change"),w.taoDialog("close"),i(this),f=n("#sys_weblogo_holder"),f.length>0&&f.show(),o=n("#sys_webfavicon_holder"),o.length>0&&o.show(),b.resolve(t))});n(".d-dialog-close").on("click",function(){i(this)})}}),t._fileDlg=w,b)};n.folderDialog=function(i,r,u,f){var o=n.Deferred(),e;return t._folderDlg?(t._folderDlg.taoDialog("open"),n("#btnSelectAnExistsFolder").unbind("click").click(function(){var i=n("#selectedFolder").val();return u&&n(u).val(i).trigger("change"),t._folderDlg&&t._folderDlg.taoDialog("close"),o.resolve(i)}),o):(n.loading(),e=n.openDlg({title:i?i:"Selecione uma pasta",url:n("body").data("root")+"webfiles/folders?website="+n("body").data("web")+(r?"&path="+encodeURIComponent(r):""),autoOpen:!0,load:function(){n.loading("hide");f?(n("#sys_newfolder_container").hide(),n("#btnAddNewFolder").hide()):(n("#sys_newfolder_container").show(),n("#btnAddNewFolder").show());n("#btnSelectAnExistsFolder",e).click(function(){var t=n("#selectedFolder",e).val();return u&&n(u).val(t).trigger("change"),e.taoDialog("close"),o.resolve(t)})}}),t._folderDlg=e,o)};n.linkDialog=function(i,r){var e=n.Deferred(),f=n(r).val(),u=n.openDlg({title:i?i:"Adicionar",url:n("body").data("root")+"dynamicui/links/?website="+n("body").data("web")+"&locale="+n("body").attr("lang")+"&link="+f,height:400,autoOpen:!0,cache:!0,close:function(){var r=n("#sys_selected_url").val(),t,i;return u.data("to")&&n(u.data("to")).val(r).trigger("change"),t=n("#sys_selected_page").val(),i=t?n.parseJSON(t):f,u.dfd?u.dfd.resolve(i):e.resolve(i)},load:function(){u.find('input[type="url"]').val(f).trigger("change")},closeButton:!1});return t._linkDlg=u,r&&t._linkDlg.data("to",r),e};n.editLinks=function(t,i,r){var u=n("<div/>").css({padding:"0px"}).attr("title",t?t:"").appendTo("body").taoDialog({url:n.resolveUrl("~/dynamicUI/linksEditor")+"?website="+n("body").data("web")+"&locale="+n("body").attr("lang")+"&idWidget="+i,width:700,height:500,cache:!1,autoOpen:!0,closeButton:!1,load:function(){n("#sys_lnks_result_button").click(function(){var t=n("#sys_links_object").val();n.isFunction(r)&&r(t?n.parseJSON(t):{});u.taoDialog("close")});n("#sys_lnks_result_cancel").click(function(){u.taoDialog("close")});n(".d-content-slider-viewport").height(450)}})};n.LandingPageAdicionarProduto=function(){var i=n.Deferred(),r=n.openDlg({title:"Adicionar produto",url:n("body").data("root")+"landingpage/"+n("body").data("web")+"/novoProduto",autoOpen:!0,draggable:!1,cache:!0,close:function(){},load:function(){},closeButton:!0});return t._linkDlg=r,i};n.LandingPageAdicionarProdutoPersonalizado=function(){var i=n.Deferred(),r=n.openDlg({title:"Adicionar produto",url:n("body").data("root")+"landingpage/"+n("body").data("web")+"/novoProdutoPersonalizado",height:200,draggable:!0,width:1e3,autoOpen:!0,cache:!1,close:function(){},load:function(){},closeButton:!0});return t._linkDlg=r,i};n.editImages=function(t,i,r){var u=n("<div/>").css({padding:"0px"}).attr("title",t?t:"").appendTo("body").taoDialog({url:n.resolveUrl("~/dynamicUI/gallery")+"?website="+n("body").data("web")+"&locale="+n("body").attr("lang")+"&objectStr="+(i?JSON.stringify(i):"[]"),width:600,cache:!1,autoOpen:!0,load:function(){n("#sys_image_result_button").click(function(){var t=n("#image_objects").val();n.isFunction(r)&&r(eval(t));u.taoDialog("close")})}})};n.openDlg=function(t,i,r){return n("<div/>").css({padding:"0px"}).attr("title",i?i:"").appendTo("body").taoDialog(n.isPlainObject(t)?t:{url:t,autoOpen:!0,width:r?r:""})};n.openPanel=function(t,i,u,f,e,o){var s=n("<div/>").appendTo("body"),h=null,c=n("<div/>").appendTo(s);return n.isPlainObject(t)?(t.title&&(h=n("<h3/>").text(t.title).prependTo(s)),"dialog"!=t.display&&n.closePanels(),s.attr("data-display",t.display?t.display:"overlay"),s.attr("data-display")=="overlay"&&s.css("position","fixed"),s.taoPanel(t)):(i&&(h=n("<h3/>").text(i).prependTo(s)),s.attr("data-pos",f?f:"left").attr("data-display",e?e:"overlay"),s.attr("data-display")=="overlay"&&s.css("position","fixed"),"dialog"!=e&&n.closePanels(),s.taoPanel({contentUrl:t,opened:!0,autoRelease:u!=r?u:!0,width:o==!0?"78%":r})),s};n.fn.mobilelist=function(){var t,i,u;this.addClass("d-mobile-list d-ui-widget");(this.data("inset")==r||this.dataBool("inset")==!1)&&this.addClass("d-collapse-list");this.attr("data-link-icon")!=r&&(t=this.attr("data-link-icon"),n(">li",this).each(function(i,u){n(u).attr("data-link-icon")==r&&n(u).attr("data-link-icon",t)}));this.attr("data-icon")!=r&&(i=this.attr("data-icon"),n(">li",this).each(function(t,u){n(u).attr("data-icon")==r&&n(u).attr("data-icon",i)}));this.hasClass("d-inline")||(u=this.children("li"),u.each(function(t,i){n(i).mobilelistItem()}),this.find(".d-children-icon").remove())};n.fn.mobilelistItem=function(){var t=this.children("a:first"),a=this,o=function(t){a.data("icon")&&n("<span/>").addClass(a.data("icon")).addClass("d-inline").css({"margin-right":"10px"}).prependTo(t)},w,s,f,h,e,i,c,l,u,v,y,p;"fieldcontain"==this.data("role")?this.addClass("d-field-container"):(this.data("counter")!=r&&(w=n("<span/>").addClass("d-item-counter").text(this.data("counter")).appendTo(t.length?t:this)),t.length&&(s=this.data("link-icon")?this.data("link-icon"):"",t.addClass("d-link"),t.attr("href")=="#"&&t.attr("javascript:void(0);"),t.children().length==0&&t.wrapInner("<span class='d-inline'/>"),t.children("img:not(.no-thumb)").addClass("d-item-thumb"),s!="no"&&s!=!1&&this.parent().data("link-icon")!="no"&&n("<span/>").addClass(s).addClass("d-link-icon").appendTo(t)),this.children("a").length>1&&(f=this.children("a:last"),f.length&&(f.addClass("d-item-spliter").hover(function(){n(this).addClass("d-ui-widget").isHover(!0);n(this).parent().isHover(!1)},function(){n(this).removeClass("d-ui-widget").isHover(!1)}).bind("mousedown",function(){n(this).addClass("d-ui-widget").isActive(!0)}).bind("mouseup",function(){n(this).removeClass("d-ui-widget").isActive(!1)}),h=f.attr("href"),(h==r||h=="#"||h=="javascript:void(0);")&&f.bind("click",function(n){n.stopPropagation();n.preventDefault()}),e=f.data("icon")?f.data("icon"):"no-icon",e.startsWith("d-icon")||(e="d-icon-"+e),n("<span/>").addClass(e).appendTo(f),t.css({"margin-right":"40px",position:"relative"}))),this.find(">img:first:not(.no-thumb)").length&&(this.addClass("d-item-has-thumb"),i=this.find(">img:first:not(.no-thumb)").addClass("d-item-thumb"),i.length&&(c=i.height(),l=i.width(),i.data("size")!=r&&(u=i.dataInt("size"),i.css({"margin-top":-Math.abs(u/2)+"px","max-height":u+"px","max-width":u+"px"}),n("~h4",i).length&&n("~h4",i).css("margin-left",10+u+"px"),n("~p",i).length&&n("~p",i).css("margin-left",10+u+"px"),c>0&&c<u&&(v=-(c/32),i.css("margin-top",v+"em")),l>0&&l<u&&(y=(u-l)/16,i.css("margin-left",y+"em"))))),this.find("h4").addClass("d-item-heading d-content-title"),this.find("p").addClass("d-item-desc d-content-s"),"divider"==this.data("role")?(t.length==0?(p=n("<a/>").addClass("d-link"),this.wrapInner(p),o(this.children())):o(this),this.addClass("d-ui-widget-header d-list-divider").unbind()):t.length?o(t):o(this))};n.fn.buttonlist=function(){this.addClass("d-button-list");n(">li",this).addClass("d-button")};n.formatSize=function(n){var t=n,i="bytes";return t>1024&&(t=Math.round(t/1024),i="kb"),t>1024&&(t=Math.round(t/1024),i="mb"),t>1024&&(t=Math.round(t/1024),i="gb"),t==0&&(i="byte"),t+i};n.fn.marginWidth=function(){return this.outerWidth(!0)-this.width()};n.fn.marginHeight=function(){return this.outerHeight(!0)-this.height()};n.fn.getMargin=function(t){var r=n(this).css("margin"+(t?"-"+t:"")),i;return r&&(i=parseInt(r.replace("px","")),i)?i:0};n.isFunction(XMLHttpRequest.prototype.sendAsBinary)||(XMLHttpRequest.prototype.sendAsBinary=function(n){for(var i=new Uint8Array(n.length),t=0;t<n.length;t++)i[t]=n.charCodeAt(t)&255;this.send(i.buffer)});n.upload=function(t,i,r,u,f){var e="------multipartformboundary"+(new Date).getTime(),s=function(n,t,i){var e="--",f="\r\n",u="";return r&&(u+=e,u+=i,u+=f,u+='Content-Disposition: form-data; name="'+r+'"',u+=f,u+=f,u+=_val,u+=f),u+=e,u+=i,u+=f,u+='Content-Disposition: form-data; name="file"',u+='; filename="'+n+'"',u+=f,u+="Content-Type: application/octet-stream",u+=f,u+=f,u+=t,u+=f,u+=e,u+=i,u+=e,u+f},h=function(r){var o=new XMLHttpRequest,h=o.upload,l=r.target.index,c=(new Date).getTime(),a=i.name,v=s(encodeURIComponent(a),r.target.result,e);h.index=l;h.file=i;h.downloadStartTime=c;h.start=c;h.progress=0;h.startData=0;n.isFunction(f)&&h.addEventListener("progress",function(n){if(n.lengthComputable){var t=Math.round(n.loaded*100/n.total);f(n,{percentage:t,file:h.file,loaded:n.loaded,total:n.total})}},!1);o.open("POST",t,!0);o.setRequestHeader("content-type","multipart/form-data; boundary="+e);n.isFunction(u)&&(o.onload=function(t){var i=n.proxy(u,this);i(t,o,o.statusText,o.responseText)});o.sendAsBinary(v)},o=new FileReader;o.onloadend=h;o.readAsBinaryString(i)};n.fn.fileDroppable=function(t){var r=this,i={accept:null,start:null,over:null,out:null,stop:null,read:null,drop:null,helper:null,hoverClass:null,activeClass:null},u;return t&&n.extend(i,t),this[0].addEventListener("dragenter",function(t){var u,f;t.stopPropagation();t.preventDefault();n(".d-droppable-helper",r).length==0&&(u=n.isFunction(i.helper)?i.helper():null,u&&u.length&&u.addClass("d-droppable-helper").appendTo(r));n.isFunction(i.start)&&(f=n.proxy(i.start,r),f(t,{helper:u}));i.hoverClass&&r.addClass(i.hoverClass)},!1),u=function(){var t=n(".d-droppable-helper",r);t.length&&t.remove()},this[0].addEventListener("dragover",function(t){if(t.stopPropagation(),t.preventDefault(),n.isFunction(i.over)){var u=n.proxy(i.over,r);u(t)}i.activeClass&&r.addClass(i.activeClass)},!1),this[0].addEventListener("dragleave",function(t){if(t.stopPropagation(),t.preventDefault(),n.isFunction(i.out)){var f=n.proxy(i.out,r);f(t)}i.hoverClass&&r.removeClass(i.hoverClass);i.activeClass&&r.removeClass(i.activeClass);u()},!1),this[0].addEventListener("drop",function(t){var c,f,h,s,e,o;if(t.stopPropagation(),t.preventDefault(),c=0,f=t.dataTransfer.files,u(),n.isFunction(i.drop)&&i.drop(f),n.isFunction(i.stop)&&(h=n.proxy(i.stop,r),h(t,f)),n.isFunction(i.read))for(s=0;s<f.length;s++)e=new FileReader,o=f[s],e.onerror=function(t){n.err("Código do erro: "+t.target.error.code)},e.onload=function(){return function(t){var u=n.proxy(i.read,r);u(t,{result:t.target.result,size:t.loaded,reader:t.target})}}(o),o.type.startsWith("text")?e.readAsText(o):e.readAsDataURL(o);return!1},!1),this};n.editCode=function(i,u,f,e){var l,h;n.loading("Loading source code editor...");t.ace==r&&(n("<script><\/script>").attr("src",n.resolveUrl("~/scripts/ace/ace.js")).attr("type","text/javascript").appendTo(n("head")),n("<script><\/script>").attr("src",n.resolveUrl("~/scripts/ace/theme-chrome.js")).attr("type","text/javascript").appendTo("body"));l=n.resolveUrl("~/scripts/ace/mode-"+(e?e:"html")+".js");h=(e?e:"html")+"_mode_script";n("#"+h).length==0&&n('<script id="'+h+'"><\/script>').attr("src",l).attr("type","text/javascript").appendTo(n("head"));var a=n.Deferred(),o=n("<div/>").appendTo("body").css({padding:"0px"}),c=n("<ul>").appendTo(o),v=n("<li>").appendTo(c).html("<a><span class='d-icon-disk'><\/span><\/a>"),s=n("<div id='"+(e?e:"html")+"_sourcecode_editor' />").css({position:"relative"}).appendTo(o);return c.taoMenu({type:"toolbar",itemClick:function(){n.isFunction(f)&&f(o.editor.getValue())&&o.taoDialog("close")}}),o.taoDialog({title:i,fullscreen:!0,cache:!1,open:function(){if(n.loading("hide"),o.editor==r){var i=o.parent().height()-o.parent().children(".d-dialog-header").height()-c.outerHeight(!0)-20,h=o.width();n(s).height(i).width(h);s=ace.edit((e?e:"html")+"_sourcecode_editor");s.setTheme("ace/theme/chrome");s.getSession().setUseWorker(!1);s.getSession().setMode("ace/mode/"+(e?e:"html"));u&&(s.setValue(u,1),s.clearSelection(),s.focus());n.isFunction(f)||(v.addClass("d-state-disable"),s.setReadOnly(!0));o.editor=s}t.setTimeout(function(){o.closest(".d-dialog").css("top","0px")},300)}}),a};t.isMobile=function(){var n=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||t.opera),n};n.configCKEditorForMobile=function(){return{toolbar:[{name:"paragraph",items:["NumberedList","BulletedList","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript"]},{name:"styles",items:["Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},]}};n.configCKEditorForPC=function(){return{toolbar:[{name:"clipboard",items:["Source","Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Table","HorizontalRule","Smiley","SpecialChar","PageBreak"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript"]},{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},],extraAllowedContent:"style;*[id];*(*);*{*}"}};n.configCkEditor=function(){return isMobile()?n.configCKEditorForMobile():n.configCKEditorForPC()};n.editorHTML=function(t,i,r,u){n("[title]").tooltip({tooltipClass:"d-customTooltip"});this.closeButton=!1;n.loading("Carregando editor de texto...");var s=n.Deferred(),e=n("<div/>").appendTo("body").css({padding:"0px"}),o=n("<ul class='d-items bkg-none'>").appendTo(e),h=n("<li class='d-item'>").appendTo(o).attr("data-group","btnSave").html("<h6><a title='Salvar'><span class='d-icon-disk'><\/span><\/a><\/h6>"),c=n("<li class='d-item'>").appendTo(o).attr("data-group","btnCancel").html("<h6><a title='Cancelar'><span class='d-icon-cancel'><\/span><\/a><\/h6>"),f=n("<div id='"+(u?u:"html")+"_sourcecode_editor1' />").css({position:"relative"}).appendTo(e);return o.taoMenu({type:"toolbar",itemClick:function(t,i){if(i.item.data("group")=="btnSave"&&n.isFunction(r)){var u;u=f.find("iframe").length>0?f.find("iframe").contents().find("body").html():f.find("textarea.cke_source").val();r(u)&&e.taoDialog("close")}i.item.data("group")=="btnCancel"&&e.taoDialog("close")}}),e.taoDialog({title:t,width:1200,height:600,cache:!1,closeButton:!1,open:function(){var u=n("<textarea cols='80' class='ckeditor' id='editor1' name='editor1' rows='10'><\/textarea>").appendTo(f),t="<script type='text/javascript'>CKEDITOR.replace('editor1',"+JSON.stringify(n.configCkEditor())+");<\/script>";i&&(n.loading(),setTimeout(function(){n.loading("hide");var t=f.find("iframe");t.contents().find("body").html(i);n("iframe").parent().height("400");n(".d-dialog").css("z-index",9999);n(".d-overlay").css("z-index",9998);n(".cke_combopanel").css("z-index",10001);n(".cke_dialog_background_cover").css("z-index",10002);n("table.cke_dialog").css("z-index",10003)},2e3));n(f).append(t);n.isFunction(r)||(h.addClass("d-state-disable"),f.setReadOnly(!0));n(".d-icon-disk").parents(".d-item").css({left:"94%",position:"relative"});n(".d-icon-cancel").parents(".d-item").css({left:"95%",position:"relative"});n(".d-icon-disk").css({cursor:"pointer"});n(".d-icon-cancel").css({cursor:"pointer"})}}),s};n.editCodeJS=function(t,i,r,u){n("[title]").tooltip({tooltipClass:"d-customTooltip"});this.closeButton=!1;var s=n.Deferred(),f=n("<div/>").appendTo("body").css({padding:"0px"}),e=n("<ul class='d-items bkg-none'>").appendTo(f),h=n("<li class='d-item'>").appendTo(e).attr("data-group","btnSave").html("<h6><a title='Salvar'><span class='d-icon-disk'><\/span><\/a><\/h6>"),c=n("<li class='d-item'>").appendTo(e).attr("data-group","btnCancel").html("<h6><a title='Cancelar'><span class='d-icon-cancel'><\/span><\/a><\/h6>"),o=n("<div id='"+(u?u:"html")+"_sourcecode_editor1' />").css({position:"relative"}).appendTo(f);return e.taoMenu({type:"toolbar",itemClick:function(t,i){i.item.data("group")=="btnSave"&&n.isFunction(r)&&r(n("#editor1").val())&&f.taoDialog("close");i.item.data("group")=="btnCancel"&&f.taoDialog("close")}}),f.taoDialog({title:t,width:500,height:200,cache:!1,closeButton:!1,open:function(){n.loading("hide");var t=n("<textarea cols='80' id='editor1' name='editor1' rows='10'><\/textarea>").appendTo(o);i&&(t.val(i),t.focus());n.isFunction(r)||(h.addClass("d-state-disable"),o.setReadOnly(!0));n(".d-icon-disk").parents(".d-item").css({left:"88%",position:"relative"});n(".d-icon-cancel").parents(".d-item").css({left:"89%",position:"relative"});n(".d-icon-disk").css({cursor:"pointer"});n(".d-icon-cancel").css({cursor:"pointer"})}}),s}})(jQuery,window,document),function(n){n.widget("dna.taoDataBindable",{options:{dataField:null,bindingTo:null,mode:"edit"},_create:function(){var n=this.options;this._unobtrusive();n.bindingTo&&this._setBindingSource(n.bindingTo)},_unobtrusive:function(){var n=this.element,t=this.options;return n.data("mode")&&(t.mode=n.data("mode")),n.data("bind")&&(t.bindingTo=n.datajQuery("bind")),n.data("field")&&(t.dataField=n.data("field")),n.data("bind-field")&&(t.dataField=n.data("bind-field")),n.attr("name")&&(t.dataField=n.attr("name")),this},_setBindingSource:function(t){var u=this,f=this.options,r,i;if(t)if(n.isPlainObject(t))throw"Could not bind to none datasource object.";else{if(!t.jquery)throw"The input object is not a valid datasource object";r=function(n,t){u._onBindingPosition({dataItem:t,value:t[f.dataField]})};i="taoDataSource";this._bindSource&&this._bindSource.unbind(i+"position",r).unbind(i+"stateChanged",this._onStateChanged);this._bindSource=t;this._bindSource.bind(i+"position",r).bind(i+"stateChanged",n.proxy(this._onStateChanged,this))}},getField:function(){return this.options.dataField&&this._bindSource?this._bindSource.taoDataSource("field",this.options.dataField):null},bindingSource:function(){return this._bindSource},_onBindingPosition:function(){},_onStateChanged:function(){},_setOption:function(t,i){return t=="bindingTo"?(this._setBindingSource(i),this):n.Widget.prototype._setOption.call(this,t,i)},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this}});n.widget("dna.taoDataBindingList",{options:{autoBind:!0,datasource:null,itemTmpl:null,insertMode:"replace",empty:null,scroller:null,itemCreated:null,itemRemoved:null,itemsAdded:null},_setScroller:function(t){var i=this,r;return t&&(this._scroller=t=="parent"?this._getItemsContainer().parent():t=="window"||t=="document"||t=="win"||t=="doc"?n(document):t.jquery?t:n(t)),this._scroller&&this._scroller.jquery&&this._scroller.length&&(this.options.insertMode=="replace"&&(this.options.insertMode="append"),r=function(){if(!i.element.isDisable()&&i._source){if(i._loading)return;i._loading=!0;i._source.length&&i._source.taoDataSource("nextPage").always(function(){i._loading=!1})}},this._scroller.unbind("scroll",r).scrollEnd({children:".d-items",callback:r})),this},_unobtrusive:function(n){var t=n?n:this.element,i=this.options,r;return t.data("source")&&(i.datasource=t.datajQuery("source")),t.data("tmpl")&&(i.itemTmpl=t.datajQuery("tmpl")),t.data("insert-mode")&&(i.insertMode=t.data("insert-mode").toLowerCase()),t.data("autobind")!=undefined&&(i.autoBind=t.dataBool("autobind")),t.data("item-created")&&(i.itemCreated=new Function("event","ui",t.data("item-created"))),t.data("item-removed")&&(i.itemRemoved=new Function("event","ui",t.data("item-removed"))),t.data("items-added")&&(i.itemsAdded=new Function("event","ui",t.data("items-added"))),t.data("scroller")&&(i.scroller=t.data("scroller")),t.data("empty")&&(r=t.datajQuery("empty"),r.length&&(i.empty=r.html())),i.datasource||t.data("url")&&(i.datasource={actions:{read:t.data("url")}}),t.data("url")&&t.data("scroller")&&(i.datasource.serverPaging=!0),this},_getItemsContainer:function(){return this.element},_createItemElement:function(){return n("<li/>")},_createDataElements:function(t){var i=this,f=this.options,r=i._getItemsContainer(),u=[];return f.insertMode=="replace"&&r.empty(),t&&(n.each(t,function(n,t){u.push(i._addItem(t))}),r.children().length==0&&i._setEmpty(!0),this._triggerEvent("itemsAdded",{items:u})),this},_setPosition:function(t){return n(t).isDisable()||n(t).data("dataItem")&&(this._current={element:t,dataItem:n(t).data("dataItem")},this.isBinded()&&this._source.taoDataSource("pos",n(t).data("dataItem"))),this},_onItemCreated:function(){},_onDataChanged:function(n){this.emptyElement&&this.emptyElement.remove();var t=this._createDataElements(n.data);this._getItemsContainer().taoUI();this._getItemsContainer().children().length==0&&this._setEmpty(!0)},_onProcess:function(){},_onComplete:function(){},_onUpdated:function(){},_onRemoved:function(t){var f=this,i,r,u;t&&t.orginal&&(i=t.orginal[t.key],i&&(r=this._getItemsContainer(),u=n(">.d-item",r),u.each(function(r,u){var e=n(u).data("dataItem");if(e&&e[t.key]&&e[t.key]==i){f._triggerEvent("itemRemoved",{item:n(u),dataItem:e});n(u).remove();return}})))},_onInserted:function(n){n&&this._addItem(n)},_onError:function(){},_onCancel:function(){},_onPosition:function(){},_setDataSource:function(t){var i=this,f=this.options,u,r;if(t)if(n.isArray(t))i._createDataElements(t);else{if(u=function(t){var r=n("<div/>").attr("data-private",!0);i.element.after(r);r.hide();i._source=r;r.taoDataSource(t);i._privateDataSource=!0},n.isPlainObject(t))u(t);else if(n.type(t)=="string")u({actions:{read:t}});else{if(!t.jquery)throw"The input object is not a valid datasource object";this._source=t}r="taoDataSource";this._source.bind(r+"changed",function(n,t){i._onDataChanged(t)}).bind(r+"inserted",function(n,t){i._onInserted(t)}).bind(r+"removed",function(n,t){i._onRemoved(t)}).bind(r+"updated",function(n,t){i._onUpdated(t)}).bind(r+"error",function(n,t){i._onError(t)}).bind(r+"process",function(){i._onProcess()}).bind(r+"complete",function(){i._onComplete()}).bind(r+"cancel",function(){i._onCancel()}).bind(r+"position",function(n,t){i.currentData()!=t&&(i._current=t,i._onPosition(t))});f.autoBind&&i.databind()}return this},_setOption:function(t,i){return t=="datasource"?(this.options.datasource=i,this._setDataSource(i),this):n.Widget.prototype._setOption.call(this,t,i)},_addItem:function(t,i){var f=this,u=this.options,o=i?i:f._getItemsContainer(),r=f._createItemElement(),e;return u.insertMode=="prepend"?r.prependTo(o):r.appendTo(o),u.itemTmpl&&n.fn.tmpl&&(e=null,e=u.itemTmpl.jquery?u.itemTmpl:n(u.itemTmpl),e.tmpl(t).appendTo(r)),t&&r.data("dataItem",t),f._onItemCreated(r,t),f._triggerEvent("itemCreated",{item:r,data:t}),r},isBinded:function(){return this._source!=undefined&&this._source!=null},currentData:function(){return this._current!=undefined?this._current:null},databind:function(t){return this._source&&this._source.length&&this._source.taoDataSource("read").done(function(i){n.isFunction(t)&&t(i)}),this},clear:function(){this._getItemsContainer().empty()},viewItems:function(){return n(".d-item",this._getItemsContainer())},viewData:function(){var t=this.viewItems(),n=[];return t.each(function(t,i){n.push(i.data("dataItem"))}),n},at:function(t){var i=this.viewItems();return i.length>t?n(i.get(t)):null},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},_setEmpty:function(t){var i=this.options,r;this.emptyElement&&this.emptyElement.remove();t&&i.empty&&(r=n.isFunction(i.empty)?i.empty():i.empty,this.emptyElement=n(r).appendTo(this.element))},datasource:function(){return this._source},destroy:function(){this._setEmpty(!1);this._privateDataSource&&this._source&&this._source.remove();n.Widget.prototype.destroy.call(this)}});n.widget("dna.taoHierarchical",n.dna.taoDataBindingList,{options:{preload:!1},_read:function(t){var i=this;return this._source?t!=undefined?this._source.taoDataSource("read",t):this._source.taoDataSource("read"):n.Deferred().resolve({data:[]})},_popupAttrs:function(){return!1},_onItemCreated:function(t,i){var u,r,f,e,o;if(t.data("dataItem",i),u=null,i.html||this.options.itemTmpl!=undefined&&this.options.itemTmpl!=null||(u=n("<a/>").addClass("d-inline").attr("href","javascript:void(0);").appendTo(t)),n.isPlainObject(i)){for(r in i)if(!n.isArray(i[r])&&!n.isPlainObject(i[r])){if(!i.html){if(r=="text"){i.text&&u.text(i.text);continue}if(r=="link"){i.link?u.attr("href",i.link):u.attr("href","javascript:void(0);");continue}if(r=="target"&&u.attr("target",i.target),r=="img"){i.img&&n("<img/>").attr("src",i.img).addClass("d-inline").prependTo(u);continue}if(r=="icon"){i.icon&&n("<span/>").addClass("d-item-icon").addClass(i.icon).prependTo(u);continue}if(r=="url"){i.url&&(t.data("url",i.url),this.options.preload&&n.preload(i.url));continue}}if(r=="title"){i.title&&t.attr("title",i.title);continue}if(r=="disabled"){i.disabled!=undefined&&t.isDisable(i.disabled);continue}if(r=="selected"){i.selected!=undefined&&t.isActive(i.selected);continue}if(!this._popupAttrs(r,i[r],t)){if(r=="html"){f="";n.isFunction(i.html)?(e=n.proxy(i.html,t),f=e()):f=i.html;o=n(f);t.empty().append(o).addClass("d-item custom");t.taoUI();continue}if(r=="click"){n.isFunction(i[r])&&t.bind("click",i[r]);continue}t.attr("data-"+r,i[r])}}}else u?u.text(i):t.text(i);return this},_createDataElements:function(t,i){var r=this,e=this.options,u=i?i:this.element,f=function(t,i){for(var u,o,s,e=0;e<t.length;e++)u=t[e],o=r._addItem(u,i),u.children&&n.isArray(u.children)&&u.children.length>0&&(s=n("<ul/>").appendTo(o),f(u.children,s))};return f(t,u),r._initItems(u),this},_onDataChanged:function(){return this},_initItems:function(t){var i=t?t:this.element,r=this;return n("li",i).each(function(n,t){r._initItem(t)}),this},_initItem:function(){},_setPreload:function(n){return n&&this.element.find("a[href]").preload(),this}})}(jQuery),function(n){n.widget("dna.taoTextbox",n.dna.taoDataBindable,{options:{value:"",waterMark:null,width:0,height:0,iconClass:null,iconImg:null,readonly:!1,disabled:!1,iconClick:null,autoComplete:null,speech:!1,fontSize:null},_create:function(){var u=this,i=this.options,t=this.element,f=this.widgetEventPrefix,r,e;this._unobtrusive();t.val()&&(i.value=t.val());i.width&&t.width(i.width);i.height&&t.height(i.height);i.iconClick&&t.bind(f+"iconclick",i.loaded);t.wrap("<div/>");r=t.parent();r.addClass("d-reset d-ui-widget d-input d-textbox");(i.readonly||t.attr("readonly"))&&u._setreadonly(!0);t.attr("style")&&r.attr("style",t.attr("style"));t.attr("class")&&(r.addClass(t.attr("class")),t.removeAttr("class"));t.addClass("d-ui-widget-content");this.container=r;i.iconClass?this._seticon(i.iconClass):this._setimg(i.iconImg);e=function(){if(t.val()){var i=n(">.d-watermark",t.parent());i.length>0&&i.hide()}};t.hover(function(){r.isActive()||r.isHover(!0)},function(){r.isHover(!1)});t.bind("focus",function(){r.isDisable()||r.isReadonly()||(r.isHover(!1),r.isActive(!0))}).bind("blur",function(){r.isReadonly()||r.isActive(!1)});i.bindingTo&&this._setBindingSource(i.bindingTo);i.autoComplete&&t.taoAutoComplete(i.autoComplete);i.speech&&t.attr("x-webkit-speech","");t.attr("disabled")=="disabled"&&t.parent().isDisable(!0)},_unobtrusive:function(){var t=this.element,i=this.options;return t.data("watermark")&&(i.waterMark=t.data("watermark")),t.data("icon")&&(i.iconClass=t.data("icon")),t.data("img")&&(i.iconImg=t.data("img")),t.data("height")&&(i.height=t.dataInt("height")),t.data("width")&&(i.width=t.dataInt("width")),t.data("icon-click")&&(i.iconClick=new Function("event","ui",t.data("icon-click"))),t.attr("disabled")&&(i.disabled=t.attr("disabled")=="disabled"||t.attr("disabled")==!0?!0:!1),t.attr("readonly")&&(i.readonly=t.attr("readonly")=="readonly"||t.attr("readonly")==!0?!0:!1),t.data("button")&&(i.button=t.datajQuery("button")),t.data("autocomplete-source")&&(i.autoComplete={datasource:t.datajQuery("autocomplete-source")}),t.data("speech")!=undefined&&(i.speech=t.dataBool("speech")),t.attr("placeholder")&&(i.waterMark=t.attr("placeholder")),t.data("autocomplete")&&(i.autoComplete={datasource:t.data("autocomplete"),param:t.data("autocomplete-param")?t.data("autocomplete-param"):"q",valueField:t.data("autocomplete-val-field")?t.data("autocomplete-val-field"):"text"}),n.dna.taoDataBindable.prototype._unobtrusive.call(this)},_setreadonly:function(n){this.element.parent().isReadonly(n);this.element.attr("readonly",n);this.options.readonly=n},_seticon:function(t){var r=this.element,u=this,i=n(">.d-textbox-icon",this.element.parent());t?i.length==0?i=n("<span/>").addClass(t).addClass("d-textbox-icon").prependTo(r.parent()).click(function(){u._triggerEvent("iconclick");r.focus()}):i.attr("class","d-textbox-icon "+t):i.length&&i.remove();this._setwatermarkpadding()},_setimg:function(t){var r=this.element,i=n(">.d-textbox-icon",r.parent());t?i.length==0?i=n("<span/>").addClass("d-textbox-icon").css({"background-image":"url("+t+")"}).prependTo(r.parent()).click(function(){self._triggerEvent("iconclick");r.focus()}):i.css("background-image","url("+t+")"):i.length&&i.remove();this._setwatermarkpadding()},_setsize:function(){return this},_setwatermarkpadding:function(){var r=this.options,i=this.element,t=t=n(">.d-watermark",i.parent());t.length&&(r.iconImg||r.iconClass?t.css({"padding-left":n(">.d-textbox-icon",i.parent()).outerWidth(!0)+"px"}):t.removeAttr("style"),t.height(i.parent().height()).width(i.parent().width()))},_createwatermark:function(t){var u=this.options,i=this.element,r=n(">.d-watermark",i.parent());r.length==0?t&&(r=n("<div/>").addClass("d-watermark").appendTo(i.parent()).text(t).click(function(){i.focus()}),this._setwatermarkpadding()):r.text(t)},disable:function(){this.element.parent().isDisable(!0);this.element.attr("disabled",!0)},enable:function(){this.element.parent().isDisable(!1);this.element.attr("disabled",!1)},_setOption:function(t,i){return t=="value"?(this.element.val(i),this):t=="width"?(this.element.width(i),this._setsize(),this):t=="height"?(this.element.height(i),this):t=="waterMark"?(this._createwatermark(i),this):t=="iconClass"?(this._seticon(i),this._setsize(),this):t=="iconImg"?(this._setimg(i),this._setsize(),this):t=="readonly"?(this._setreadonly(i),this):(t=="disabled"&&(i?this.disable():this.enable()),n.dna.taoDataBindable.prototype._setOption.call(this,t,i))},_onBindingPosition:function(n){var t=this.options;return t.mode!="new"&&n.value!=undefined&&this.element.val(n.value),this},_onStateChanged:function(n,t){return(t=="inserted"||t=="removed"||t=="add")&&this.element.val(""),this},_setBindingSource:function(t){n.dna.taoDataBindable.prototype._setBindingSource.call(this,t);var i=this.getField();return i&&(i.desc?this.element.attr(i.desc):i.title&&this.element.attr(i.title)),this},destroy:function(){var t=this.element.parent();t.after(this.element);t.remove();n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoCheckbox",n.dna.taoDataBindable,{options:{label:null,boolValue:!0,change:null,checkedIcon:"d-icon-checkbox-checked",uncheckedIcon:"d-icon-checkbox-unchecked"},_create:function(){var o=this,r=this.options,i=this.element,s=this.widgetEventPrefix,t,u,f;this._unobtrusive();r.change&&i.bind(s+"change",r.change);i.wrap("<span/>");t=i.parent();u=n("<label/>").appendTo(t);t.addClass("d-reset d-checkbox");t.disableSelection();u.disableSelection();r.label&&u.text(r.label);f=i.attr("checked");(f==!0||f=="checked")&&t.isActive(!0);(i.attr("disabled")==!0||i.attr("disabled")=="disabled")&&t.isDisable(!0);t.click(function(n){if(n.stopPropagation(),n.preventDefault(),!t.isDisable()){i.attr("checked",!t.isActive());t.isActive(!t.isActive());t.find(".d-check-holder").toggleClass(r.uncheckedIcon).toggleClass(r.checkedIcon);var u=i.attr("checked")?!0:!1;r.boolValue&&i.val(u?"True":"False");i.trigger("change");o._triggerEvent("change",{value:i.val(),checked:u})}});i.attr("title")&&(t.attr(e.attr("title")),i.removeAttr("title"));n("<span/>").addClass("d-check-holder").addClass(t.isActive()?r.checkedIcon:r.uncheckedIcon).prependTo(t);i.hide()},check:function(n){this.element.attr("checked",n);this.element.parent().isActive(n)},_unobtrusive:function(){var t=this.element,i=this.options;return t.data("label")&&(i.label=t.data("label")),t.data("icon-checked")&&(i.checkedIcon=t.data("icon-checked")),t.data("icon-unchecked")&&(i.uncheckedIcon=t.data("icon-unchecked")),t.data("bool")!=undefined&&(i.boolValue=t.dataBool("bool")),t.data("change")&&(i.change=new Function("event","ui",t.data("change"))),n.dna.taoDataBindable.prototype._unobtrusive.call(this)},_onBindingPosition:function(n){var t=this.options;return t.mode!="new"&&n.value!=undefined&&this.element.val(n.value),this},_onStateChanged:function(n,t){return(t=="inserted"||t=="removed"||t=="add")&&this.element.val(""),this},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoRadios",n.dna.taoDataBindable,{options:{change:null,value:null,inline:!1,checkedIcon:"d-icon-radio-checked",uncheckedIcon:"d-icon-radio-unchecked"},_create:function(){var u=this,t=this.options,i=this.element,f=this.widgetEventPrefix,r;return this._unobtrusive(),t.change&&i.bind(f+"change",t.change),i.addClass("d-reset d-radios"),r=n("[type='radio']",i),r.each(function(i,r){var f=n(r),e,o;f.attr("data-role","none");f.wrap(t.inline?"<span/>":"<div/>");e=f.parent();o=n("<label/>").appendTo(e);e.addClass("d-radio");e.disableSelection();f.data("label")&&o.text(f.data("label"));e.click(function(){if(!e.isDisable()&&!e.isActive()){var i=e.siblings();i.removeClass("d-state-active");n(".d-radio-holder",i).removeClass(t.checkedIcon).addClass(t.uncheckedIcon);n("input",i).attr("checked",!1);f.attr("checked",!0);e.isActive(!0);t.value=f.val();e.find(".d-radio-holder").removeClass(t.uncheckedIcon).addClass(t.checkedIcon);u._triggerEvent("change",{value:f.val(),label:f.data("label")})}});f.attr("title")&&(e.attr(f.attr("title")),f.removeAttr("title"));n("<span/>").addClass("d-radio-holder").addClass(e.isActive()?t.checkedIcon:t.uncheckedIcon).prependTo(e);f.hide()}),t.value!=null&&t.value!=undefined&&this.value(t.value),i},value:function(t){var i=this.options,r;t!=null&&t!=undefined&&(r=n("input",this.element),r.each(function(r,u){var f=n(u),e;if(f.val()==t.toString()){e=f.parent().siblings();e.removeClass("d-state-active");n("input",e).attr("checked",!1);f.attr("checked",!0).parent().isActive(!0);f.siblings(".d-radio-holder").removeClass("d-icon-radio-unchecked").addClass("d-icon-radio-checked");i.value!=f.val()&&(i.value=f.val());return}}))},_unobtrusive:function(){var t=this.element,i=this.options;return t.data("value")!=undefined&&(i.value=t.data("value")),t.data("change")&&(i.change=new Function("event","ui",t.data("change"))),t.data("inline")!=undefined&&(i.inline=t.dataBool("inline")),t.data("icon-checked")&&(i.checkedIcon=t.data("icon-checked")),t.data("icon-unchecked")&&(i.uncheckedIcon=t.data("icon-unchecked")),n.dna.taoDataBindable.prototype._unobtrusive.call(this)},_onBindingPosition:function(n){var t=this.options;return t.mode!="new"&&n.value!=undefined&&this.element.val(n.value),this},_onStateChanged:function(n,t){return(t=="inserted"||t=="removed"||t=="add")&&this.element.val(""),this},destroy:function(){n.Widget.prototype.destroy.call(this)}});n.widget("dna.taoRadio",{options:{label:null,checkedIcon:"d-icon-radio-checked",uncheckedIcon:"d-icon-radio-unchecked"},_create:function(){var e=this,i=this.options,r=this.element,o=this.widgetEventPrefix,u,t,f;return this._unobtrusive(),u=r,u.wrap("<span/>"),t=u.parent(),f=n("<label/>").appendTo(t),t.addClass("d-radio"),r.attr("class")&&(t.addClass(r.attr("class")),r.removeAttr("class")),t.disableSelection(),i.label&&f.text(i.label),r.bind("change",function(){n(this).attr("checked")?t.find(".d-radio-holder").removeClass(i.uncheckedIcon).addClass(i.checkedIcon):t.find(".d-radio-holder").removeClass(i.checkedIcon).addClass(i.uncheckedIcon);t.isActive(i.value)}),t.click(function(){if(!t.isDisable()&&!t.isActive()){var u=r.attr("name"),i=n("input[name="+u+"]:checked");i.length&&i.attr("checked",null).trigger("change");r.attr("checked","checked").trigger("change")}}),u.attr("title")&&(t.attr(u.attr("title")),u.removeAttr("title")),n("<span/>").addClass("d-radio-holder").addClass(r.prop("checked")?i.checkedIcon:i.uncheckedIcon).prependTo(t),u.hide(),r},_unobtrusive:function(){var t=this.element,i=this.options;return t.data("label")!=undefined&&(i.label=t.data("label")),t.data("icon-checked")&&(i.checkedIcon=t.data("icon-checked")),t.data("icon-unchecked")&&(i.uncheckedIcon=t.data("icon-unchecked")),n.dna.taoDataBindable.prototype._unobtrusive.call(this)},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoTreeview",n.dna.taoHierarchical,{options:{enableDropAndDrag:!1,singlePathExpand:!1,checkboxes:!1,showTreeLines:!0,unselectable:!1,dragstart:null,dropTargets:null,drag:null,dragstop:null,dropped:null,dropover:null,dropout:null,selected:null,unselected:null,selectedNode:null,checked:null,collapsed:null,expanded:null,beforeNodeLoad:null,nodeLoadError:null,nodeLoaded:null,popupNodes:null,popupAttr:"url",nodeClass:null,show:{effect:"drop",options:{direction:"up"},speed:200},hide:{effect:"slide",options:{direction:"up"},speed:200}},_create:function(){var t=this;this._unobtrusive().element.addClass("d-reset d-ui-widget d-tree");this._initItems()._bindEvents()._setDataSource(this.options.datasource);this.options.autoBind&&this.databind(function(n){t._createDataElements(n.data)});this.element.css("opacity","1");n(".d-node",this.element).disableSelection();this.options.unselectable&&this.element.bind("click",function(){n(".d-node.d-state-active",this.element).removeClass("d-state-active");n(".d-node.d-state-hover",this.element).removeClass("d-state-hover");n(".d-node-content.d-state-active",this.element).removeClass("d-state-active");n(".d-node-content.d-state-hover",this.element).removeClass("d-state-hover");t._triggerEvent("unselected")});this.element.bind("mouseleave",function(){n(".d-state-hover",t.element).removeClass("d-state-hover")})},_unobtrusive:function(){var n=this.element,t=this.options,i;return n.data("drag-drop")&&(t.enableDropAndDrag=n.dataBool("drag-drop")),n.data("singlepath")&&(t.singlePathExpand=n.dataBool("singlepath")),n.data("checkboxes")!=undefined&&(t.checkboxes=n.dataBool("checkboxes")),n.data("unselectable")!=undefined&&(t.unselectable=n.dataBool("unselectable")),n.data("source")?t.datasource=n.datajQuery("source"):n.data("source-url")&&(i=n.data("source-url"),t.datasource={actions:{read:i},mapper:i.endsWith(".xml")?new tao.xmlMapper:new tao.mapper}),n.data("tmpl")&&(t.itemTmpl=n.datajQuery("tmpl")),n.data("autobind")!=undefined&&(t.autoBind=n.dataBool("autobind")),n.data("onselected")&&(t.selected=new Function("event","ui",n.data("onselected"))),n.data("selected")&&(t.selected=new Function("event","ui",n.data("selected"))),n.data("unselected")&&(t.unselected=new Function("event",n.data("unselected"))),n.data("checked")&&(t.checked=new Function("event","ui",n.data("checked"))),n.data("drag")&&(t.drag=new Function("event","ui",n.data("drag"))),n.data("drag-stop")&&(t.dragstop=new Function("event","ui",n.data("drag-stop"))),n.data("drag-start")&&(t.dragstart=new Function("event","ui",n.data("drag-start"))),n.data("drop-out")&&(t.dropout=new Function("event","ui",n.data("drop-out"))),n.data("drop-over")&&(t.dropover=new Function("event","ui",n.data("drop-out"))),n.data("dropped")&&(t.dropped=new Function("event","ui",n.data("dropped"))),n.data("collapsed")&&(t.collapsed=new Function("event","ui",n.data("collapsed"))),n.data("expanded")&&(t.expanded=new Function("event","ui",n.data("expanded"))),n.data("before-load")&&(t.beforeNodeLoad=new Function("event","ui",n.data("before-load"))),n.data("load-error")&&(t.nodeLoadError=new Function("event","ui",n.data("load-error"))),n.data("popup")&&(t.popupNodes=new Function("event","ui",n.data("popup"))),n.data("popup-attr")&&(t.popupAttr=n.data("popup-attr")),n.data("node-class")&&(t.nodeClass=n.data("node-class")),this},_bindEvents:function(){var n=this.widgetEventPrefix;return this.options.selected&&this.element.bind(n+"selected",this.options.selected),this.options.unselected&&this.element.bind(n+"unselected",this.options.unselected),this.options.drag&&this.element.bind(n+"drag",this.options.drag),this.options.dragstop&&this.element.bind(n+"dragstop",this.options.dragstop),this.options.dragstart&&this.element.bind(n+"dragstart",this.options.dragstart),this.options.dropout&&this.element.bind(n+"dropout",this.options.dropout),this.options.dropover&&this.element.bind(n+"dropover",this.options.dropover),this.options.dropped&&this.element.bind(n+"dropped",this.options.dropped),this.options.collapsed&&this.element.bind(n+"collapsed",this.options.collapsed),this.options.expanded&&this.element.bind(n+"expanded",this.options.expanded),this.options.checked&&this.element.bind(n+"checked",this.options.checked),this.options.beforeNodeLoad&&this.element.bind(n+"beforeNodeLoad",this.options.beforeNodeLoad),this.options.nodeLoadError&&this.element.bind(n+"nodeLoadError",this.options.nodeLoadError),this.options.nodeLoaded&&this.element.bind(n+"nodeLoaded",this.options.nodeLoaded),this.options.popupNodes&&this.element.bind(n+"popupNodes",this.options.popupNodes),this},_setOption:function(t,i){return t=="selectedNode"?(i&&this.select(i),this):n.dna.taoDataBindingList.prototype._setOption.call(this,t,i)},_initItem:function(t){var r=this,e=r.options,i=n(t),u,f,o,s;i.addClass("d-node").disableSelection().wrapInner("<div class='d-node-content'><\/div>");e.nodeClass&&i.addClass(e.nodeClass);u=n(">.d-node-content>ul",i);u.length&&(i.addClass("d-node-hasChildren").append(u),u.wrap("<div class='d-nodes-holder'/>"));i.data(e.popupAttr)&&(i.hasClass("d-node-hasChildren")||i.addClass("d-node-hasChildren"),i.addClass("d-state-collapse"));i.data("disabled")&&i.isDisable(!0).removeAttr("data-disabled");r._createNodeButton(i);i.children(".d-node-content").click(function(n){n.stopPropagation();i.isDisable()||r.select(i)}).dblclick(function(){r._toggle(i)}).hover(function(){i.isDisable()||(n(".d-node>.d-node-content>a.d-state-hover",r.element).removeClass("d-state-hover"),n(".d-node>.d-node-content.d-state-hover",r.element).removeClass("d-state-hover"),n(">.d-node-content>a",i).length>0?n(">.d-node-content>a",i).isHover(!0):n(">.d-node-content",i).isHover(!0))});r.options.checkboxes&&r._enableCheckboxs(i);f=n(".d-node-content>a>img",i);f.length&&(f.addClass("d-node-img"),o=n(">.d-node-content>a",i),o.removeAttr("href"),o.before(f));r.options.enableDropAndDrag&&r._enableDropAndDrag(t);i.data("expanded")?(i.addClass("d-state-expand").removeClass("d-state-collapse").removeAttr("data-expanded"),i.hasClass("d-node-hasChildren")&&n(">.d-node-button",i).empty().append(n("<span/>").addClass("d-icon-caret-down"))):(i.hasClass("d-node-hasChildren")&&i.removeClass("d-state-expand").addClass("d-state-collapse"),i.hasClass("d-node-hasChildren")&&n(">.d-node-button",i).empty().append(n("<span/>").addClass("d-icon-caret-right")));i.data("selected")&&(s=n(">.d-node-content>a",i),s.length?s.isActive(!0):i.children(".d-node-content").isActive(!0))},_popupAttrs:function(n,t,i){return n=="expanded"?(t?i.addClass("d-state-expand").removeClass("d-state-collapse").removeAttr("data-expanded"):i.hasClass("d-node-hasChildren")&&i.removeClass("d-state-expand").addClass("d-state-collapse"),!0):!1},_enableCheckboxs:function(t){var r=this,i=n("<input type='checkbox'>").addClass("d-node-checkbox");t.children(".d-node-content").before(i);i.click(function(){var n=t.parents(".d-node");n.length&&r._triggerEvent("checked",{node:t,checked:i.attr("checked")})})},_enableDropAndDrag:function(t){var i=this,u=this.options,r;n(t).children(".d-node-content").draggable({revert:"invalid",greedy:!1,iframeFix:!0,helper:"clone",opacity:.8,start:function(){i._triggerEvent("dragstart",n(this).closest(".d-node"))},stop:function(){i._triggerEvent("dragstop",n(this).closest(".d-node"))},drag:function(){i._triggerEvent("drag",n(this).closest(".d-node"))}});u.dropTargets&&(r=n(u.dropTargets),r.length&&r.droppable({accept:".d-node-content",over:function(t,r){i._triggerEvent("dropout",{node:r.draggable,container:n(this)})},out:function(t,r){i._triggerEvent("dropover",{node:r.draggable,container:n(this)})},drop:function(t,r){i._triggerEvent("dropped",{node:r.draggable,container:n(this)})}}));n(t).droppable({accept:".d-node-content",greedy:!0,out:function(t,r){i._triggerEvent("dropout",{node:r.draggable,targetNode:n(this).closest(".d-node")})},over:function(t,r){i._triggerEvent("dropover",{node:r.draggable,targetNode:n(this).closest(".d-node")})},drop:function(r,u){var f=u.draggable.closest(".d-node"),o=f.closest(".d-node-hasChildren"),s=n(this).closest(".d-node"),e,h,c;if(t===f[0]||f.has(s).length)return!1;e=n(">.d-nodes-holder",this);e.length===0&&(e=n("<ul/>").addClass("d-nodes-holder"),n(this).append(e),s.addClass("d-node-hasChildren"));e.append(f);o.length&&o.find(".d-node").length===0&&o.removeClass("d-node-hasChildren").children(".d-nodes-holder").remove();h=0;c=n(this).find(".d-node");c.length&&(h=c.index(f));i._triggerEvent("dropped",{node:f,targetNode:s,position:h})}})},_createNodeButton:function(t){var i=this,r=n("<div/>").addClass("d-node-button").prependTo(t);r.click(function(n){n.stopPropagation();t.hasClass("d-node-hasChildren")&&i._toggle(t)})},_toggle:function(n){n.hasClass("d-state-collapse")?this.expand(n):this.collape(n)},_onInserted:function(n){n&&this.add(n,this.options.selectedNode)},_onUpdated:function(t){var u,i,f,r;if(t&&(u=this.options.selectedNode,i=n(">.d-node-content",u).children().tmplItem(),i.data)){i.data=t.result;i.update();f=i.data;for(r in f)r=="title"?u.attr("title",f[r]):u.attr("data-"+r,f[r])}},select:function(t){var f=this.options,i=t,r=this.element,u;t==null&&(i=r.children(".d-node").first());i.length&&(u=n(">.d-node-content>a",i),n(".d-node>.d-node-content>a.d-state-active",r).removeClass("d-state-active"),n(".d-node>.d-node-content>a.d-state-hover",r).removeClass("d-state-hover"),n(".d-node>.d-node-content.d-state-active",r).removeClass("d-state-active"),n(".d-node>.d-node-content.d-state-hover",r).removeClass("d-state-hover"),u.length?u.isActive(!0):n(">.d-node-content",i).isActive(!0),f.selectedNode=i,this._setPosition(i)._triggerEvent("selected",{node:i,dataItem:i.data("dataItem")}))},collape:function(t){var r=this,i=this.options;t.hasClass("d-state-collapse")||(t.removeClass("d-state-expand"),t.hasClass("d-node-hasChildren")&&(n(">.d-nodes-holder",t).stop().hide(i.hide.effect,i.hide.options,i.hide.speed,function(){t.addClass("d-state-collapse");r._triggerEvent("collapsed",t)}),n(">.d-node-button",t).empty().append(n("<span/>").addClass("d-icon-caret-right"))))},expand:function(t){var r=this,i=this.options,f,u;t.hasClass("d-state-expand")||(t.data(i.popupAttr)&&this._source?(f=n(">.d-node-button",t).empty().append(n("<span/>").addClass("d-icon-loading")),this._read(t.data(i.popupAttr)).done(function(u){var f=n("<div class='d-nodes-holder' />").appendTo(t);r.addNodes(u.data,n("<ul/>").appendTo(f));t.removeData(i.popupAttr).removeAttr("data-"+i.popupAttr);n(">.d-node-button>.d-icon-loading",t).remove();u.total||t.removeClass("d-node-hasChildren");r._triggerEvent("popupNodes",t);r.expand(t)})):(t.removeClass("d-state-collapse"),t.hasClass("d-node-hasChildren")&&(t.addClass("d-state-expand"),n(">.d-nodes-holder",t).stop().show(i.show.effect,i.show.options,i.show.speed),n(">.d-node-button",t).empty().append(n("<span/>").addClass("d-icon-caret-down")),this.options.singlePathExpand&&(u=t.siblings().not(".d-state-disable"),u.length&&u.each(function(t,i){r.collape(n(i))})),this._triggerEvent("expanded",t))))},addNodes:function(n,t){return this._createDataElements(n,t),this},add:function(t,i){var r=null;return i!=null&&(r=i.find(".d-nodes-holder>ul"),r.length==0&&(r=n("<div class='d-nodes-holder'><ul><\/ul><\/div>").appendTo(i).children())),$li=this._addItem(t,r),this._initItem($li),i&&this.expand(i.addClass("d-node-hasChildren")),this.select($li),$li},getCheckedNodes:function(){var t,i;return this.options.checkboxes&&(t=this.element.find(".d-node-checkbox"),t.length)?(i=[],t.each(function(t,r){n(r).attr("checked")&&i.push(n(r).parent().closest(".d-node"))}),i):null},getCheckedAttrs:function(){var t=[],i=this.getCheckedNodes();return n.each(i,function(i,r){t.push(n(r).attr("data-id"))}),t},getCheckedTexts:function(){var t=[],i=this.getCheckedNodes();return n.each(i,function(i,r){t.push(n(r).children(".d-treenode-content").find(".d-treenode-text").text())}),t},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoPanel",{options:{collapsable:!0,icon:null,link:null,closable:!1,display:"static",autoOpen:!0,autoRelease:!1,autoLoad:!0,dismissible:!0,position:"left",returnTo:null,collapsed:!1,opened:!1,contentUrl:null,fillHeight:!0,icons:{collapsed:"d-icon-caret-down",expanded:"d-icon-caret-up"},width:329,load:null,expand:null,collapse:null,open:null,close:null},_create:function(){var t=this.options,i=this.element,r=this,u=this.widgetEventPrefix,c,f,s,o,e;if(this._unobtrusive(),i.addClass("d-reset d-ui-widget d-panel").addClass("d-panel-"+t.display),"static"!=t.display&&(n(window).width()<=420&&(this.options.width=n(window).width()),t.collapsable=!1,t.collapsed=!1,i.addClass("d-panel-"+t.position),i.parent()[0].tagName!="body"&&i.prependTo("body")),r.header=n(">header,>h3",i).first(),r.header.length==0&&i.attr("title")&&(i.wrapInner("<div/>"),r.header=n("<h3/>").text(i.attr("title")).prependTo(i),i.removeAttr("title")),r.header.length){if(c=r.header.text(),r.header.wrapInner("<a class='d-panel-header-link'/>"),r.header.addClass("d-ui-widget-header d-panel-header"),f=r.header.children("a:first"),f.wrapInner("<span class='d-header-text'/>"),t.icon&&(s=n("<span/>").addClass("d-inline").css({"margin-right":"5px"}).addClass(t.icon).prependTo(f),t.link&&s.click(function(n){n.stopPropagation();n.preventDefault();window.location=t.link})),t.returnTo){var l=function(){n(".icon-icoBarra_Configuracoes").click()},h=n('[data-return="#pagetools_pane"]'),a=n("<a/>").attr("data-icon-left","d-icon-angle-left").css({display:"inline-block",position:"absolute","z-index":"1",top:"2px","margin-left":"10px"}).prependTo(h).click(l).taoButton();h.find(".d-header-text").css("margin-left","40px")}if(t.closable&&n("<span/>").addClass("d-icon-holder d-close-icon-holder").addClass("d-icon-cross-3").appendTo(f).click(function(t){t.stopPropagation();t.preventDefault();r.close();n(".ui-resizable-handle").show();typeof overlay=="object"&&overlay&&overlay.remove()}),t.collapsable&&(o=function(n){n.stopPropagation();n.preventDefault();r.expand(!t.collapsed)},n("<span/>").addClass("d-icon-holder d-toggle-icon-holder").addClass(t.collapsed?t.icons.collapsed:t.icons.expanded).appendTo(f).click(o),i.attr("id")!=undefined))n('a[data-rel="collapse"][href="#'+i.attr("id")+'"]').on("click",o)}e=n(">div",i).addClass("d-ui-widget-content");e.length==0&&(e=n("<div/>").addClass("d-ui-widget-content").appendTo(i));r.body=e;t.collapsable&&t.collapsed&&e.hide();t.load&&i.bind(u+"load",t.load);t.open&&i.bind(u+"open",t.open);t.close&&i.bind(u+"close",t.close);t.collapse&&i.bind(u+"collapse",t.collapse);t.expand&&i.bind(u+"expand",t.expand);r.header.length&&r.header.bind("click",function(){!t.collapsable||t.closable||t.draggable||n(".d-toggle-icon-holder",r.header).click()});n(window).on("resize",n.proxy(this._winResize,this));if("static"!=t.display){t.opened?(t.opened=!1,r.open()):i.hide();n("a[data-rel=close]",i).on("click",function(n){n.preventDefault();n.stopPropagation();r.close()});if(i.attr("id")!=undefined){n('a[data-rel=close][href="#'+i.attr("id")+'"]').on("click",function(n){n.preventDefault();n.stopPropagation();r.close()});n('a[data-rel=open][href="#'+i.attr("id")+'"]').on("click",function(t){t.preventDefault();t.stopPropagation();n(".d-panel[data-opened=true]").not(i).each(function(t,i){n(i).taoPanel("close")});r.open()})}}else this._fillHeight(t.fillHeight)},_unobtrusive:function(){var n=this.element,t=this.options;return n.data("icon")&&(t.icon=n.data("icon")),n.data("link")&&(t.link=n.data("link")),n.data("return")&&(t.returnTo=n.data("return")),n.data("collapsed-icon")&&(t.icons.collapsed=n.data("collapsed-icon")),n.data("expanded-icon")&&(t.icons.expanded=n.data("expanded-icon")),n.data("pos")&&(t.position=n.data("pos")),n.data("display")&&(t.display=n.data("display")),n.data("fill")!=undefined&&(t.fillHeight=n.dataBool("fill")),n.data("width")!=undefined&&(t.width=n.data("width")),n.data("collapsable")!=undefined&&(t.collapsable=n.dataBool("collapsable")),n.data("closable")!=undefined&&(t.closable=n.dataBool("closable")),n.data("collapsed")!=undefined&&(t.collapsed=n.dataBool("collapsed")),n.data("auto-load")!=undefined&&(t.autoLoad=n.dataBool("auto-load")),n.data("dismissible")!=undefined&&(t.dismissible=n.dataBool("dismissible")),n.data("opened")!=undefined&&(t.opened=n.dataBool("opened")),n.data("auto-release")!=undefined&&(t.autoRelease=n.dataBool("auto-release")),n.data("load")&&(t.load=new Function("event",n.data("load"))),n.data("open")&&(t.open=new Function("event",n.data("open"))),n.data("close")&&(t.close=new Function("event",n.data("close"))),n.data("expand")&&(t.expand=new Function("event","ui",n.data("expand"))),n.data("collapse")&&(t.collapse=new Function("event","ui",n.data("collapse"))),n.data("url")&&(t.contentUrl=n.data("url")),n.data("title")&&n.attr("title",n.data("title")),n.data("closable")==undefined&&t.display!="static"&&(t.closable=!0),n.data("fill")==undefined&&t.display=="static"&&(t.fillHeight=!1),this},_load:function(t){var f=this.options,e=this.element,i=this,r,o,u;f.contentUrl&&(i.header.length&&(r=i.header.children(".d-panel-header-link"),r.css("min-height","29px"),n(">a[data-icon-left='d-icon-angle-left']",i.header).hide(),n(".d-icon-holder",r).hide(),o=n("<span/>").addClass("d-icon-holder d-icon-loading").appendTo(r)),u=i.body,n.ajax(f.contentUrl).done(function(f){u.html(f);u.unobtrusive_ajax();u.taoUI();u.show();i.header.length&&(o.remove(),n(">a[data-icon-left='d-icon-angle-left']",i.header).show(),n(".d-icon-holder",r).show());i.loaded=!0;i._triggerEvent("load");n.isFunction(t)&&t();e.attr("data-opened",!0);n(".d-button[data-rel=close]",e).on("click",function(n){n.preventDefault();n.stopPropagation();i.close()})}).fail(function(t,i){n.err("Erro ao carregar: "+i)}))},_winResize:function(){var r=this,t=this.options,i=this.element;this.dismisshelper&&n(this.dismisshelper).css({width:n(window).width()-i.width()+"px"});(t.opened||"static"==t.display)&&this._fillHeight(t.fillHeight);"static"!=t.display&&t.position=="right"&&t.opened&&i.stop(!0,!1).position(this._getPos())},_setOption:function(t,i){return n.Widget.prototype._setOption.call(this,t,i)},_setsize:function(){},_triggerEvent:function(n,t){this.element.trigger(this.widgetEventPrefix+n,t)},_fillHeight:function(t){if(t){var r=this,i=this.element;i.height(n(window).height());r.body.height(i.innerHeight()-n(">.d-panel-header",i).outerHeight(!0))}},_getPos:function(){var t=this.options,r=this.element,u=this,i=r.width();return{of:n("body"),at:t.position+" top",my:t.position+" top",using:function(r){r.top=0;t.position==="left"?(r.left=0,r.right=undefined):(r.right=0,r.left=undefined);t.display=="reveal"?(r["z-index"]=0,n(this).show().css(r)):n(this).stop(!0,!1).animate(r,0);t.display!="overlay"&&(n("body").data("margin",n("body").css("margin")).stop(!0,!1),t.position=="left"?n("body").animate({"margin-left":i+"px"},0):n("body").animate({"margin-left":"-"+i+"px","margin-right":i+"px"},0))}}},expand:function(n){var i=this.element,t=this.options;return t.collapsable&&(this.header.find(".d-toggle-icon-holder").toggleClass(t.icons.collapsed).toggleClass(t.icons.expanded),t.contentUrl&&!this.loaded&&this._load(),this.body.toggle(),this._triggerEvent(n?"expand":"collapse"),t.collapsed=t.collapsed),i},open:function(){var i=this.options,t=this.element,r=this,u;if("static"!=i.display){if(i.opened)return t;t.width(i.width);u=t.width();t.css({opacity:0,"z-index":n.topMostIndex()+1,top:"0px"}).show();i.position==="left"?t.css({left:0}):t.css({right:0});r._fillHeight(i.fillHeight);t.show().stop(!0,!1).css("opacity",1).position(this._getPos())}return i.opened=!0,t.attr("data-opened",!0),this._triggerEvent("open"),i.contentUrl&&!r.loaded&&r._load(),i.dismissible&&(this.dismisshelper=n("<div/>").appendTo("body").height(n(document).height()).css({opacity:0,width:n(window).width()-t.width()+"px",background:"#000",position:"absolute",top:"0px"}).click(function(){r.close()}),i.position=="left"?this.dismisshelper.css({left:"120pxpx"}):this.dismisshelper.css({left:"0px"})),t},close:function(){var i=this.element,t=this.options,f=this,u,r;t.closable&&("static"!=t.display&&t.opened&&(this._triggerEvent("close"),t.opened=!1,u=i.outerWidth(!0),r="120px","reveal"!=t.display&&i.stop(!0,!1).animate({left:r/16+"em"},0,function(){i.hide()}),"overlay"!=t.display&&n("body").stop(!0,!1).animate({"margin-left":"0px","margin-right":"0px"},function(){n("body").css("margin",n("body").data("margin"));"reveal"==t.display&&i.hide()})),this.dismisshelper&&(this.dismisshelper.remove(),this.dismisshelper=null),t.autoRelease&&i.remove())},destroy:function(){return n(window).off("resize",n.proxy(this._winResize,this)),this.dismisshelper&&(this.dismisshelper.remove(),this.dismisshelper=null),n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoDataSource",{options:{keyField:"id",data:null,pageIndex:-1,pageSize:20,timeout:3e4,serverPaging:!1,serverGrouping:!1,serverSorting:!1,serverFiltering:!1,actions:{read:null,insert:null,update:null,remove:null},autoLoad:!1,mapper:null,master:null,masterKey:null,sort:null,group:null,filter:null,cache:!0,schema:{},inserted:null,updated:null,removed:null,changed:null,stateChanged:null,position:null,detail:null,process:null,complete:null,error:null,cancel:null,beforeMap:null,pagend:null,pagestart:null},_create:function(){var r=this,n=this.options,t=this.element,i=this.widgetEventPrefix;this._cursor=0;this.isloading=!1;this.keymap={};this._state="position";this._unobtrusive();n.inserted&&t.bind(i+"inserted",n.inserted);n.updated&&t.bind(i+"updated",n.updated);n.stateChanged&&t.bind(i+"stateChanged",n.stateChanged);n.changed&&t.bind(i+"changed",n.changed);n.removed&&t.bind(i+"removed",n.removed);n.position&&t.bind(i+"position",n.position);n.detail&&t.bind(i+"detail",n.detail);n.process&&t.bind(i+"process",n.process);n.error&&t.bind(i+"error",n.error);n.cancel&&t.bind(i+"cancel",n.cancel);n.complete&&t.bind(i+"complete",n.complete);n.beforeMap&&t.bind(i+"beforeMap",n.beforeMap);n.serverPaging&&n.pageIndex==-1&&(n.pageIndex=1);n.mapper||(n.mapper=new tao.mapper);n.data?this._setData(n.data):n.autoLoad&&this.read();t.hide()},state:function(n){if(n)this._state=n,this._triggerEvent("stateChanged",n);else return this._state},_unobtrusive:function(){var t=this.element,f=this,i=this.options,r=n("[data-role=mapper]",t),u;r.length&&(i.mapper=r.mapper());t.data("key")&&(i.keyField=t.data("key"));t.data("pageindex")!=undefined&&(i.pageIndex=t.dataInt("pageindex"));t.data("pagesize")&&(i.pageSize=t.data("pagesize"));t.data("page-index")!=undefined&&(i.pageIndex=t.dataInt("page-index"));t.data("page-size")&&(i.pageSize=t.data("page-size"));t.data("server-paging")!=undefined&&(i.serverPaging=t.dataBool("server-paging"));t.data("server-sorting")!=undefined&&(i.serverSorting=t.dataBool("server-sorting"));t.data("server-filtering")!=undefined&&(i.serverFiltering=t.dataBool("server-filtering"));t.data("server-grouping")!=undefined&&(i.serverGrouping=t.dataBool("server-grouping"));t.data("autoload")!=undefined&&(i.autoLoad=t.dataBool("autoload"));t.data("cache")!=undefined&&(i.cache=t.dataBool("cache"));t.data("onchanged")&&(i.changed=new Function("event","results",t.data("onchanged")));t.data("ondetail")&&(i.detail=new Function("event","dataItem",t.data("ondetail")));t.data("oninserted")&&(i.inserted=new Function("event","data",t.data("oninserted")));t.data("onupdated")&&(i.updated=new Function("event","data",t.data("onupdated")));t.data("onremoved")&&(i.removed=new Function("event","data",t.data("onremoved")));t.data("onposition")&&(i.position=new Function("event","data",t.data("onposition")));t.data("onprocess")&&(i.process=new Function("event","data",t.data("onprocess")));t.data("onerror")&&(i.error=new Function("event","data",t.data("onerror")));t.data("onstate")&&(i.stateChanged=new Function("event","data",t.data("onstate")));t.data("oncancel")&&(i.cancel=new Function("event","data",t.data("oncancel")));t.data("oncomplete")&&(i.complete=new Function("event","data",t.data("oncomplete")));t.data("onmap")&&(i.beforeMap=new Function("event","data",t.data("onmap")));t.data("change")&&(i.changed=new Function("event","results",t.data("change")));t.data("detail")&&(i.detail=new Function("event","dataItem",t.data("detail")));t.data("inserted")&&(i.inserted=new Function("event","data",t.data("inserted")));t.data("updated")&&(i.updated=new Function("event","data",t.data("updated")));t.data("removed")&&(i.removed=new Function("event","data",t.data("removed")));t.data("process")&&(i.process=new Function("event","data",t.data("process")));t.data("error")&&(i.error=new Function("event","data",t.data("error")));t.data("state")&&(i.stateChanged=new Function("event","data",t.data("state")));t.data("cancel")&&(i.cancel=new Function("event","data",t.data("cancel")));t.data("complete")&&(i.complete=new Function("event","data",t.data("complete")));t.data("map")&&(i.beforeMap=new Function("event","data",t.data("map")));t.data("read-url")&&(i.actions.read={url:t.data("read-url")});t.data("mapper")&&(r=t.datajQuery("mapper"),i.mapper=r.mapper());t.data("master")&&(i.master=t.datajQuery("master"),this._setMaster(i.master));var e=function(n){var t={},i;return n.data("timeout")&&(t.timeout=n.data("timeout")),n.data("url")&&(t.url=n.data("url")),n.data("cache")&&(t.cache=eval(n.data("cache"))),n.data("type")&&(t.dataType=n.data("type")),n.data("content-type")&&(t.contentType=n.data("content-type")),n.data("method")&&(t.type=n.data("method")),i=n.data("action"),i&&(i!="insert"&&i!="update"&&i!="remove"||t.type||(t.type="POST")),t},o=function(t){var i={},r=n(t).children();return r.each(function(t,r){var u=n(r),e="",o="";u.data("name")&&(e=u.data("name"));u.data("from")&&(o=function(){var n=u.datajQuery("from");if(n.length)return n.isInput()?n.val():n.text()});u.data("value")&&(o=u.data("value"));e&&u.data("master-field")&&(f.keymap={key:e,masterKey:u.data("master-field")});e&&o&&(i[e]=o)}),i},s=n("[data-action]",t);s.each(function(t,r){var u=e(n(r)),f=o(n(r));n.isEmptyObject(f)||(u.data=f);i.actions[n(r).data("action")]=u});u=n(">[data-field]",t);i.schema.fields==undefined&&(i.schema.fields=[]);u.each(function(t,r){var u=n(r),f={name:u.data("field"),title:u.data("title")?u.data("title"):u.data("field"),type:u.data("type")?u.data("type"):"string",desc:u.data("desc")?u.data("desc"):"",isKey:u.data("key")!=undefined?u.dataBool("key"):!1,defaultValue:u.data("default")!=undefined?u.data("default"):null,watermark:u.data("watermark")?u.data("watermark"):null,isReadonly:u.data("readonly")!=undefined?u.dataBool("readonly"):!1,hidden:u.data("hidden")!=undefined?u.dataBool("hidden"):!1,validation:{rules:{},messages:{}}};f.isKey&&(i.keyField=f.name);f.validation=u.getValidationInfo();i.schema.fields.push(f)})},_setMaster:function(t){var i=this,r=this.options;t.bind("taoDataSourceposition",function(t,u){var f,e,o;!n.isEmptyObject(i.keymap)&&i._remoteReadable()?(f=i.options.actions.read,r.serverFiltering?(e=u[i.keymap.masterKey],i.filter(r.masterKey+"="+(n.type(e)=="number"?e:'"'+e+'"'))):(n.type(f)=="string"&&(f={url:f}),f.data==undefined&&(f.data={}),o={},o[i.keymap.key]=u[i.keymap.masterKey],n.extend(f.data,o)),i.read()):i._triggerEvent("detail",u)})},_cache:function(n,t,i){var u,f,r;if(this.cache&&this.cache.url==n||(this.cache={url:n,items:[]}),u=this.cache,f=!0,i==undefined){for(r=0;r<u.items.length;r++)if(u.items[r].key==t)return u.items[r].data;return null}for(r=0;r<this.cache.items.length;r++)this.cache.items[r].key==t&&(this.cache.items[r].data=i,f=!1);f&&this.cache.items.push({key:t,data:i})},reset:function(){var n=this.options;n.pageIndex=1;this.cache=null;this._cursor=0},pos:function(t){if(this._currentData&&this._currentData==t)return this;if(this._currentData=t,n.isArray(this.options.data))for(var i=0;i<this.options.data.length;i++)if(this.options.data[i]==t){this._cursor=i;break}return this.state("position"),this._triggerEvent("position",t),this},index:function(){return this._cursor},prev:function(){if(this.options.data&&this._cursor>0){this._cursor--;var n=this.get(this._cursor);if(n)return this.pos(n)}return null},next:function(){if(this.options.data&&this._cursor<this.options.data.length){this._cursor++;var n=this.get(this._cursor);if(n)return this.pos(n)}return null},nextPage:function(){var t=this.options,i=this.totalPages();return t.serverPaging&&t.pageIndex<i&&i?(t.pageIndex++,this.read()):n.Deferred().resolve()},isFirstPage:function(){return this.options.pageIndex==1},isLastPage:function(){var t=this.options,n=this.totalPages();return t.pageIndex<n&&n?!1:!0},read:function(t){var e=this,i=this.options,u=!1,f=n.Deferred(),r;return t==undefined||t==null?u=this._remoteReadable():n.isArray(t)||(n.type(t)=="string"||n.isPlainObject(t))&&(n.isPlainObject(t)?i.actions.read=t:i.actions.read.url=t,u=!0),u?this._serverRead(f):(r=[],t?(this._setData(t),r=n.makeArray(t),i.filter&&(r=this._filtering(i.filter,r)),i.sort&&(r=this._sorting(i.sort,r)),i.pageSize>-1&&(r=this._paging(i.pageIndex,i.pageSize,r)),e._triggerEvent("changed",{data:r,pageIndex:i.pageIndex,pageSize:i.pageSize}),f.resolve({data:r})):(e._triggerEvent("changed",{data:i.data,pageIndex:i.pageIndex,pageSize:i.pageSize}),f.resolve({data:i.data})))},_remoteReadable:function(){var t=this.options;if(t.actions!=undefined&&t.actions!=null&&t.actions.read!=undefined&&t.actions.read!=null){if(n.type(t.actions.read)=="string")return t.actions.read!="";if(t.actions.read.url)return t.actions.read.url!=""}return!1},_serverRead:function(t){var u=this.options,i=this,r;if(i.isloading)return setTimeout(function(){i.isloading=!1;i._serverRead(t)},500),t.promise();r=n.isPlainObject(u.actions.read)?u.actions.read:{url:u.actions.read};this._srvPaging(r)._srvSorting(r)._srvPaging(r)._srvFiltering(r)._srvGrouping(r);var e=r.url,o=r.data?n.param(r.data).toLowerCase():"default",f=u.cache?i._cache(e,o):null;return f?(u.data=f,i._triggerEvent("changed",{options:r.data,data:f}),t.resolve({data:f})):(i.isloading=!0,i._triggerEvent("process","read")._setTimeout(u.timeout),u.timeout&&(r.timeout=u.timeout),n.ajax(r).pipe(function(n){i._clearTimeout();i._setData(n);var u=i.options.mapper,f=u?u.map(n):n;return i._total=u?u.total(n):0,i.isloading=!1,i._cache(e,o,u?f.data:n),i._triggerEvent("changed",{type:"loaded",total:i._total,options:r.data,data:u?f.data:n}),i.state("loaded"),n=f,t.resolve(f)}).fail(function(){i._clearTimeout()._triggerEvent("error",this)}).always(function(){i._triggerEvent("complete")}))},_clearTimeout:function(){return this._timer&&(clearTimeout(this._timer),this._timer=null),this},_setTimeout:function(n){var t=this,i=n==undefined?this.options.timeout:n;return i&&(t._timer=setTimeout(function(){t._triggerEvent("cancel");t._timer=null},i)),this},_srvPaging:function(t){var r=this,i=this.options;return i.serverPaging&&(t.data?n.extend(t.data,{index:i.pageIndex,size:i.pageSize}):t.data={index:i.pageIndex,size:i.pageSize}),this},_srvSorting:function(t){var e=this,i=this.options,r,f,u;return i.serverSorting&&i.sort&&(r="",n.isArray(i.sort)?(f=[],n.each(i.sort,function(n,t){f.push(t.field+"~"+(t.dir?t.dir:"asc"))}),r=f.join("-")):(u=i.sort,r=u.field+"~"+(u.dir?u.dir:"asc")),t.data||(t.data={}),n.extend(t.data,{orderby:r})),this},_srvFiltering:function(t){var f=this,r=this.options,i,u;return r.serverFiltering&&r.filter&&(i="",n.type(r.filter)=="string"?(i=r.filter,i=i.replace("==","~eq~").replace("!=","~neq~").replace(">","~gt~").replace(">=","~ge~").replace("<","~lt~").replace("<=","~le~").replace(" && ","~and~").replace(" || ","~and~").replace(" !","~not~").replace("^=","~startswith~").replace("$=","~endswith~").replace("*=","~contains~"),i=encodeURIComponent(i)):n.isArray(r.filter)&&(u=new tao.exprBuilder,u.addExprs(r.filter),i=encodeURIComponent(u.getResult())),i&&(t.data||(t.data={}),n.extend(t.data,{filter:i}))),this},_srvGrouping:function(t){var u=this,i=this.options,r;return i.serverGrouping&&i.group&&(r="",r=n.isArray(i.group)?i.group.join("-"):i.group.replace(",","-"),t.data||(t.data={}),n.extend(t.data,{groupby:encodeURIComponent(r)})),this},_doPost:function(t,i,r){var f=this.options,e=n.Deferred(),u=this;return i?(options={},n.type(i)=="string"?(options.url=i,options.type="POST"):n.extend(options,i),f.timeout&&(options.timeout=f.timeout),this._setTimeout(),i.data?(options.data=i.data,n.extend(options.data,r)):options.data=r,n.ajax(options).done(function(n){u._clearTimeout()._triggerEvent(t,t=="inserted"?n:{orginal:r,key:f.keyField,result:n});u.state(t)}).fail(function(){u._clearTimeout()._triggerEvent("error",this)}).always(function(){u._triggerEvent("complete")})):e.reject()},_setData:function(n){var t,i;return this.options.data=n,t=n?n:[],t?this.options.mapper?(i=this.options.mapper.map(n),t=i.data,this._total=i.total,this.options.data=t):this._total=t.length:this._total=0,this},_setOption:function(t,i){return t=="data"?(this._setData(i),this):(t=="cache"&&i==!1&&(this.cache=null),n.Widget.prototype._setOption.call(this,t,i))},_paging:function(n,t,i){var f,u,r;if(n>-1){for(f=(n-1)*t,u=[],r=f;r<i.length;r++)u.push(i[r]);return u}return i},_sorting:function(t,i){if(i&&t&&n.isArray(i)){var r=function(n,i){var u=n[t[0].field],f=i[t[0].field],r=t[0].dir;return r||(r="asc"),r=="asc"?u>f?1:-1:u>f?-1:1};return i.sort(r)}return i},_filtering:function(t,i){var r=n.makeArray(i),f,u,e;if(!t)return i;for(f=function(t,i){for(var u=[],o=0;o<i.length;o++){var f=i[o],r=f[t.field],e=t.operator;if(e=="eq"&&r==t.val){u.push(f);continue}if(e=="neq"&&r!=t.val){u.push(f);continue}if(e=="lt"&&r<t.val){u.push(f);continue}if(e=="le"&&r<=t.val){u.push(f);continue}if(e=="gt"&&r>t.val){u.push(f);continue}if(e=="ge"&&r>=t.val){u.push(f);continue}if(r!=""&&n.type(r)=="string"){if(e=="startswith"&&r.slice(0,t.val.length)==t.val){u.push(f);continue}if(e=="endswith"&&r.slice(-t.val.length)==r.val){u.push(f);continue}if(e=="contains"&&r.indexOf(t.val)>-1){u.push(f);continue}}}return u},u=0;u<t.length;u++)if(e=t[u],r=f(e,r),r.length==0)break;return r},insert:function(t){var e=this,u=this.options,f=n.Deferred(),i,r;return t?this.options.actions.insert?this._doPost("inserted",this.options.actions.insert,t):(u.data||(u.data=[]),i=t,this.options.mapper&&(r=[i],r=this.options.mapper.map(r),i=r.data[0]),u.data.push(i),this._triggerEvent("inserted",i),this.state("inserted"),f.resolve(i)):f.reject()},update:function(n){if(n){if(this.options.actions.update)this._doPost("updated",this.options.actions.update,n);else{var i=this.options.keyField,r=n,t=this.options.data[this._cursor];this.options.data[this._cursor]=n;this._currentData=n;this.state("updated");this._triggerEvent("updated",{orginal:t,result:n})}return this}throw"Entity not found and it could not be null";},remove:function(t){var r=t==undefined?this.get():t,f=this,e=this.options,u=n.Deferred(),i;return r?this.options.actions.remove?this._doPost("removed",this.options.actions.remove,r):(i=[],n.each(e.data,function(n,t){n!=f._cursor&&i.push(t)}),this.options.data=i,this.state("removed"),this._triggerEvent("removed",{orginal:r,key:this._cursor,result:!0}),i.length&&this.pos(i[0]),u.resolve()):u.reject("Could not delete the empty entity.")},removeAt:function(n){var t=this.find(n);t&&this.remove(t)},field:function(n){var t,i;if(this.options.schema&&this.options.schema.fields)for(t=0;t<this.options.schema.fields.length;t++)if(i=this.options.schema.fields[t],i.name&&i.name==n)return i;return null},get:function(t){var r,i;if(t==undefined)return this._currentData?this._currentData:this.options.data[this._cursor];if(n.isNumeric(t))return this._cursor=t,this.options.data[t];if(n.isPlainObject(t))for(r=this.keyField,i=0;i<this.options.data.length;i++)if(this.options.data[i][r]==t[r])return this._cursor=i,this.options.data[i];return null},page:function(n){var t=this.options;return t.pageIndex=n,this.read()},find:function(t){var o=this.options.keyField,s=null,r,u,f,e,i;if(o)n.each(this.options.data,function(n,i){if(i[o]==t)return s=i,i});else{if(n.isPlainObject(t)){for(r=[],i=0;i<this.options.data.length;i++){u=!0;f=this.options.data[i];for(e in t)if(t[e]!=f[e]){u=!1;break}u&&r.push(f)}return r}for(i=0;i<this.options.data.length;i++)if(this.options.data[i]==t)return this.options.data[i]}return s},filter:function(t){var i=this.options,r;return i.filter=t,i.serverFiltering?this.read():(r=[],i.data&&(r=this._filtering(i.filter,i.data)),this._triggerEvent("changed",{data:r,type:"filter"}),n.Deferred().resolve({data:r}))},sort:function(n){var t=this.options,i;if(t.sort=n,this.options.serverSorting)return this.read();i=this._sorting(n,t.data);this._triggerEvent("changed",{data:i,pageIndex:t.pageIndex,pageSize:t.pageSize})},group:function(n){var t=this.options;return t.group=n,t.serverGrouping?this.read():void 0},total:function(){return this._total?this._total:0},totalPages:function(){var n=this.total();return n?Math.ceil(n/this.options.pageSize):0},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},save:function(n){localStorage&&this.options.data&&(localStorage[n]=this.options.data)},load:function(n){localStorage&&localStorage[n]&&this._read(localStorage[n])},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoListview",n.dna.taoDataBindingList,{options:{highlightfirst:!1,itemClass:null,hoverClass:null,activeClass:null,selectable:!1,select:null,cancel:null,autoSelect:!1,sortable:!1,autoBlocking:!1,itemsAnimation:!1,hasFocus:!1,inline:!1,unselectOnClick:!1,itemStyle:null},_create:function(){var i=this,n=this.options,t=this.element,r=this.widgetEventPrefix;this._unobtrusive()._bindEvents()._getItemsContainer().addClass("d-items");n.scroller&&this._setScroller(n.scroller);n.sortable&&this._setSortable(n.sortable);n.datasource?this._setDataSource(n.datasource):this._createDataElements();t.addClass("d-reset d-listview")},_bindEvents:function(){var r=this,n=this.options,t=this.element,i=this.widgetEventPrefix;return n.select&&t.bind(i+"select",n.select),n.cancel&&t.bind(i+"cancel",n.cancel),n.itemCreated&&t.bind(i+"itemCreated",n.itemCreated),n.itemRemoved&&t.bind(i+"itemRemoved",n.itemRemoved),n.itemsAdded&&t.bind(i+"itemsAdded",n.itemsAdded),this},_unobtrusive:function(t){var i=t?t:this.element,r=this.options;return n.dna.taoDataBindingList.prototype._unobtrusive.call(this,t),i.data("selectable")!=undefined&&(r.selectable=i.data("selectable")),i.data("select")&&(r.select=new Function("event","ui",i.data("select"))),i.data("cancel")&&(r.cancel=new Function("event","ui",i.data("cancel"))),i.data("autohighlight")!=undefined&&(r.highlightfirst=i.dataBool("autohighlight")),i.data("sortable")!=undefined&&(r.sortable=i.dataBool("sortable")),i.data("unselect-click")!=undefined&&(r.unselectOnClick=i.dataBool("unselect-click")),i.data("autoselect")!=undefined&&(r.autoSelect=i.dataBool("autoselect")),i.data("autoblocking")!=undefined&&(r.autoBlocking=i.dataBool("autoblocking")),i.data("item-class")&&(r.itemClass=i.data("item-class")),i.data("active-class")&&(r.activeClass=i.data("active-class")),i.data("hover-class")&&(r.hoverClass=i.data("hover-class")),i.data("hasfocus")!=undefined&&(r.hasFocus=i.dataBool("hasfocus")),i.data("inline")!=undefined&&(r.inline=i.dataBool("inline")),i.data("item-style")&&(r.itemStyle=i.data("item-style")),this},_enableHighlightFirst:function(){if(this.options.highlightfirst&&n(">li.d-state-active",this._getItemsContainer()).length==0){var t=n(">li:first",this._getItemsContainer());t.length&&this._setItemSelected(t)}return this},_onItemSelected:function(n,t){var i=t.data("dataItem");t.isActive()?this._triggerEvent("select",{index:n,item:t,dataItem:i}):t.isDisable()||this._triggerEvent("cancel",{index:n,item:t,dataItem:i});this._source&&i&&this._source.taoDataSource("pos",i)},_onProcess:function(){},_onComplete:function(){},_onItemClick:function(t){n(t).data("role")=="fieldcontain"||n(t).dataBool("readonly")||(this._setItemSelected(t),this._onItemSelected(n(t).siblings().andSelf().index(t),t),n(t).focus())},_onItemHover:function(t){this.options.autoSelect&&this.options.selectable&&(this._onItemSelected(n(t).siblings().andSelf().index(t),t),this._setItemSelected(t));this._onItemFocus(t)},_onItemUnhover:function(n){this._onItemBlur(n)},_onItemBlur:function(n){n.isHover(!1);this.options.hoverClass&&n.removeClass(this.options.hoverClass)},_onItemFocus:function(t){var i=this,r=this.options;if(!t.isDisable()&&!t.isActive())if(i.options.autoSelect&&this.options.selectable)i._onItemSelected(n(t).siblings().andSelf().index(t),t),i._setItemSelected(t);else{if(n(this).data("role")=="fieldcontain"||n(this).dataBool("readonly"))return;t.isHover(!0);r.hoverClass&&t.addClass(r.hoverClass)}},_onItemKeypress:function(t,i){var r=this,f,u;t.keyCode==40||t.keyCode==38?(f=parseInt(n(i).attr("tabIndex")),u=n(i).siblings("[tabIndex='"+(f+(t.keyCode==40?1:-1))+"']"),u.length&&u.focus()):t.keyCode==13?(r._onItemSelected(n(i).siblings().andSelf().index(i),i),r._setItemSelected(i)):t.keyCode==46&&r._onitemdelete(i)},_setSortable:function(t){if(t&&n.fn.sortable)try{n(this._getItemsContainer()).sortable({forcePlaceholderSize:!0,forceHelperSize:!0,items:">.d-item",containment:"parent",axis:"y"})}catch(i){console.log(i)}},_getNextServerPage:function(){var r=this,t=this.options,i;return t.datasource&&t.datasource.jquery&&n.fn.taoDataSource&&t.datasource.taoDataSource("option","serverPaging")?(i=t.datasource,i.taoDataSource("nextPage")):n.Deferred().resolve()},_createDataElements:function(t){if(t==undefined){var i=this;n(">li",this._getItemsContainer()).each(function(n,t){i._onItemCreated(t)})}else n.dna.taoDataBindingList.prototype._createDataElements.call(this,t);return this.options.hasFocus&&this._setTabIndexs(),this._enableHighlightFirst()},_onItemCreated:function(t){var i=this,r=this.options,u,f;return this.delay||(this.delay=0),u=this.delay+10,n(t).addClass("d-item"+(this.options.inline?" d-float-left":"")+(this.options.itemClass?" "+this.options.itemClass:"")).attr("role","listitem").hover(function(t){n(this).data("role")=="fieldcontain"||n(this).dataBool("readonly")||(t.stopPropagation(),t.preventDefault(),i._onItemHover(n(this)))},function(t){t.stopPropagation();t.preventDefault();i._onItemUnhover(n(this))}).bind("click",function(t){t.stopPropagation();i._onItemClick(n(this));i._triggerEvent("itemclick",n(this))}).focus(function(){i._onItemFocus(n(this))}).blur(function(){i._onItemBlur(n(this))}).keypress(function(n){r.hasFocus&&(n.stopPropagation(),n.preventDefault(),i._onItemKeypress(n,this))}),r.itemStyle&&(f=n(t).attr("style")?n(t).attr("style"):"",n(t).attr("style",r.itemStyle+f)),n(t).isVisible()&&i.options.itemsAnimation&&(n(t).hide().delay(u).fadeIn("normal"),this.delay=u),this},_setTabIndexs:function(){var t=n(">li",this._getItemsContainer());return t.each(function(t,i){n(i).attr("tabIndex",t)}),this},_setItemSelected:function(t){var i=this.options;n(t).isDisable()||(this._setPosition(t),i.selectable!="multi"&&(n(t).siblings(".d-state-active").removeClass("d-state-active"),i.activeClass&&n(t).siblings(i.activeClass).removeClass(i.activeClass)),i.selectable&&(n(t).isActive(!0),i.activeClass&&n(t).toggleClass(i.activeClass)),n(t).isHover(!1),i.hoverClass&&n(t).removeClass(i.hoverClass))},clearSelection:function(){n(">.d-state-active",this._getItemsContainer()).removeClass("d-state-active")},getSelectedItems:function(){return n(".d-state-active",this._getItemsContainer())},addItem:function(n){return this._addItem(n)},_addItem:function(t,i){var o=this,f=this.options,e=i?i:o._getItemsContainer(),r=o._createItemElement(),s,u;return f.itemTmpl&&n.fn.tmpl?(s=null,s=f.itemTmpl.jquery?f.itemTmpl:n(f.itemTmpl),u=s.tmpl(t),u.attr("data-link-icon","d-icon-resize-vertical"),u.children().attr("data-icon","d-icon-cog"),u.length==1&&u[0].tagName=="LI"?(f.insertMode=="prepend"?u.prependTo(e):u.appendTo(e),r=u):(f.insertMode=="prepend"?r.prependTo(e):r.appendTo(e),u.appendTo(r))):f.insertMode=="prepend"?r.prependTo(e):r.appendTo(e),t&&r.data("dataItem",t),o._onItemCreated(r,t),o._triggerEvent("itemCreated",{item:r,data:t}),r},updateItem:function(t,i){var r,u;return this.options.itemTmpl&&n.fn.tmpl?(r=n(t).tmplItem(),r.data=i,r.update(),u=r.nodes[0],n(u).data("dataItem",i),this._onItemCreated(u,i),u):(n(t).data("dataItem",i),this._onItemCreated(t,i),t)},_onUpdated:function(t){var i=this.updateItem(n(">.d-state-active",this.element),t.result);n(i).isActive(!1)},_onRemoved:function(n){var t=this.element.children().eq(n.key);t.length&&t.remove()},_getItemsContainer:function(){return this.element},destroy:function(){n.dna.taoDataBindingList.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoListbox",n.dna.taoListview,{options:{value:"",dataValueField:"value",dataTextField:"label",valueTo:null,checkable:!1,itemsAnimation:!1,highlightfirst:!0,selectable:!0,hasFocus:!0,check:null,checkValTo:null,checkValues:null,sortable:!1},_create:function(){var f=this,t=this.options,i=this.element,e=this.widgetEventPrefix,u=i[0].tagName.toLowerCase(),r;this.initialized=!1;this._unobtrusive();u=="input"||u=="select"?(r=n("<ul/>").addClass("d-reset d-ui-widget d-items d-listbox"),i.after(r),i.attr("style")&&r.attr("style",i.attr("style")),i.attr("class")&&r.addClass(i.attr("class")),this._container=r,this._valueHolder=i,i.hide(),u=="select"&&t.datasource==null&&(t.datasource={mapper:new tao.htmlSelectMapper,data:i})):(this._valueHolder=n("<input type='hidden' />"),u=="ul"?(i.addClass("d-ui-widget d-items d-listbox"),this._container=i,i.after(this._valueHolder)):(this._container=n("<ul/>").addClass("d-ui-widget d-items d-listbox").appendTo(i),i.append(this._valueHolder)));t.check&&i.bind(e+"check",t.check);this._bindEvents()._getItemsContainer().addClass("d-items");t.scroller&&(t.scroller=="self"&&(this._scroller=n("<div />").attr("style",i.attr("style")).css({overflow:"auto"}).addClass("d-listbox"),i.after(this._scroller),i.appendTo(this._scroller),i.removeAttr("style").removeClass("d-listbox")),this._setScroller(t.scroller));t.checkable&&i.addClass("d-checkable");t.datasource?this._setDataSource(t.datasource):this._createDataElements();t.checkable&&t.checkValues&&(f._setCheckValues(t.checkValues),t.checkValTo&&f._fillCheckValues());t.sortable&&r.sortable({update:function(){f._fillCheckValues()}});t.value?this._valueHolder.val(t.value):this._valueHolder.val()&&(t.value=this._valueHolder.val());t.value&&(n.type(t.value)=="string"&&t.value.indexOf(",")>-1&&t.selectable=="multi"?this.select(t.value.split(",")):this.select(t.value))},find:function(t){var f=n(">.d-item",this._getItemsContainer()),u=this.options,i,r,e;if(u.datasource){for(i=0;i<f.length;i++)if(r=n(f[i]).data("dataItem"),r&&u.dataValueField&&(e=n.isPlainObject(r)?r[u.dataValueField]:r,e==t))return n(f[i]);return null}return n(">.d-item[data-"+u.dataValueField+"="+t+"]",this._getItemsContainer())},select:function(t){var u=this,r,i;if(this.clearSelection(),t){if(n.isArray(t))return r=[],n.each(t,function(n,t){var i=u.find(t);i&&i.length&&(u._setItemSelected(i),r.push(i))}),this.options.value=r.length?t.join(","):"",this._getValueHolder().val(this.options.value),r;if(i=this.find(t),i&&i.length)return this._setItemSelected(i),this.options.value=t,this._getValueHolder().val(t),i}return null},clearSelection:function(){return this.options.value="",n.dna.taoListview.prototype.clearSelection.call(this)},selectedText:function(){var n=this.selectedDataItems();return n&&n.length?n[0][this.options.dataTextField]:""},selectedDataItems:function(){var i=[],r=this.getSelectedItems(),t=this.options;return r.each(function(r,u){if(t.datasource)i.push(n(u).data("dataItem"));else{var f={};f[t.dataValueField]=n(u).attr("data-"+t.dataValueField);f[t.dataTextField]=n(u).attr("data-"+t.dataTextField);i.push(f)}}),i},checkItems:function(){var u=this,f=this.element,i=this._getItemsContainer(),r=i.find(".d-checkbox.d-state-active"),t=[];return r.each(function(i,r){t.push(n(r).parent())}),t},checkDataItems:function(){var i=this.checkItems(),t=[];return n.each(i,function(i,r){t.push(n(r).data("dataItem"))}),t},_unobtrusive:function(t){var i=t?t:this.element,r=this.options;return n.dna.taoListview.prototype._unobtrusive.call(this,t),i.data("valuefield")&&(r.dataValueField=i.data("valuefield")),i.data("textfield")&&(r.dataTextField=i.data("textfield")),i.data("checkable")!=undefined&&(r.checkable=i.dataBool("checkable")),i.data("sortable")!=undefined&&(r.sortable=i.dataBool("sortable")),i.data("check")&&(r.check=new Function("event","ui",i.data("check"))),i.data("valto")&&(r.valueTo=i.datajQuery("valto")),i.data("checkto")&&(r.checkValTo=i.datajQuery("checkto")),i.data("check-vals")&&(r.checkValues=i.data("check-vals").toString().split(",")),this},getValHolder:function(){return this._valueHolder},_getValueHolder:function(){return n(this._valueHolder)},_onItemCreated:function(t,i){var u=this,r;return i&&(n.isPlainObject(i)?(t.data("value",i[this.options.dataValueField]),this.options.itemTmpl||t.children().length||t.text(i[this.options.dataTextField])):(t.data("value",i),this.options.itemTmpl||t.children().length||t.text(i))),this.options.checkable&&(n(t).wrapInner("<a/>"),n(t).children("a").disableSelection(),r=n("<input type='checkbox'/>"),r.bind("taoCheckboxchange",function(r,f){i.selected=f.checked;u._triggerEvent("check",{item:n(t),dataItem:i});u._fillCheckValues()}),i&&i.selected&&r.attr("checked","checked"),n(t).prepend(r)),n.dna.taoListview.prototype._onItemCreated.call(this,t,i),i&&i.selected&&this._setItemSelected(t),this},_onItemClick:function(t){var i,r,u;return n.dna.taoListview.prototype._onItemClick.call(this,t),(this.element[0].tagName.toLowerCase()=="select"||this.element[0].tagName.toLowerCase()=="input")&&this.element.trigger("change"),this.options.checkable&&(i=n("input",t),r=i.attr("checked")!="checked",i.taoCheckbox("check",!0),u=t.data("data")?t.data("data"):t.data("value"),r&&(this._fillCheckValues(),this._triggerEvent("check",{item:t,dataItem:u}))),this.element},_onItemSelected:function(t,i){var f=i.data("dataItem"),r=this.options,s=r.dataValueField,e=r.dataTextField,o="",u;f?(r.value=f[s],o=f[e],this.getValHolder().val(r.value)):(r.value=i.attr("data-"+s),o=e?i.attr("data-"+e):i.text());this.options.valueTo&&(u=n(this.options.valueTo),u.length&&(u.isInput()?u.val(this.options.value):u.text(this.options.value)));this._triggerEvent("select",{index:t,item:i,dataItem:f,value:r.value,text:o})},_getCheckValues:function(){var i=this,u=this.options,r=i.checkDataItems(),t=[];return r.length&&n.each(r,function(r,u){n.isPlainObject(u)?t.push(u[i.options.dataValueField]):t.push(u.toString())}),t},_setCheckValues:function(t){var u=this,i=this.options,r=this._getItemsContainer();i.checkable&&r.children().each(function(r,u){var e=n(u).find("input[type=checkbox]"),f=n(u).data("data")?n(u).data("data"):n(u).data("value"),o=null;o=n.isPlainObject(f)?f[i.dataValueField]:f;n.inArray(o,t)>-1?e.taoCheckbox("check",!0):e.taoCheckbox("check",!1)})},_fillCheckValues:function(){var r=this,t=this.options,i=this._getCheckValues(),n=t.checkValTo;n&&t.checkable&&(i.length?n.val(i.join(",")):n.val(""))},_setOption:function(t,i){return t=="checkValues"&&(this._setCheckValues(i),this.options.checkValues=i),t=="value"&&this.select(i),n.Widget.prototype._setOption.call(this,t,i)},widget:function(){return this._container},_getItemsContainer:function(){return this._container}})}(jQuery),function(n){n.widget("dna.taoMenu",n.dna.taoHierarchical,{options:{type:"horizontal",moreTitle:"Toggle navigation",moreIcon:"d-icon-reorder",alt:!0,itemClick:null,sameWidth:!0,separators:!1,childrenIcon:!0},_create:function(){var u=this,i=this.options,t=this.element,e=this.widgetEventPrefix,r,f;this._unobtrusive();r=t.attr("class")?t.attr("class"):"";r&&t.removeClass(r);t.addClass("d-reset d-ui-widget d-items d-menu");i.alt||i.type!="horizontal"||t.addClass("responsive");i.datasource&&this._setDataSource(i.datasource);i.type&&t.addClass(i.type);r&&t.addClass(r);n("li:not('.d-separator')",t).addClass("d-item");n("ul",t).addClass("d-ui-widget d-items-wrapper").css("display","inline");i.type=="toolbar"&&n(">.d-separator",t).height(t.height());f=n(".d-item:not('.d-state-disable')",t);f.on("mouseenter",function(){var r,u,f;n(this).addClass("d-state-hover");r=n(this).children("ul");r.length&&(u=n(this).parent().hasClass("d-menu")&&(i.type=="horizontal"||i.type=="toolbar"),f=n(window).width(),f<=400?r.css("z-index",n.topMostIndex()+1).position({of:t.parent(),at:"left bottom",my:"left top"}):r.css("z-index",n.topMostIndex()+1).position({of:n(this),at:u?"left bottom":"right top",my:"left top",using:function(t){n(this).stop(!0,!1).animate(t,5)}}))}).on("mouseleave",function(){n(this).removeClass("d-state-hover")});i.datasource||f.each(function(n,t){u._initItem(t)});n(".d-item[data-checked]:not('.d-state-disable')",t).isActive(!0);i.itemClick&&t.bind(e+"itemClick",i.itemClick);this.altMode=!1;n(window).on("resize",function(){u.refresh()});return u.refresh(),t},ranking:function(n,t){var n=n.children("ul"),i,r;n.length&&(t+=20,i=n.children(),this.ranking(i,t),r=i.children("a"),r.css("padding-left",t+"px"))},refresh:function(){var e=this,i=this.options,t=this.element,u=t.children(".d-item-more"),r,f;i.type=="horizontal"?(u.length>0&&(u.children(".d-items-wrapper").children().appendTo(t),u.remove()),n(">.d-item",t).css("width","auto"),n(">.d-separator",t).remove(),r=n(window).width(),i.alt?(r>1024&&this.altMode&&(this.altMode=!1,this._setSeparators(i.separators),this._setSameWidth(i.sameWidth)),r<=1024&&(this.altModel||(f=n("<ul/>").addClass("d-ui-widget d-items-wrapper").append(t.children()),u=n("<li/>").addClass("d-item d-item-more").append(n("<a/>").attr("href","javascript:void(0);").css({"min-width":"0px","padding-left":"10px"}).append(n("<span/>").addClass("d-icon-reorder").append('<label style="padding-left:5px;">Menu<\/label>'))).append(f).click(function(){var t,r,u,o;this.menuPanel?this.menuPanel.taoPanel("open"):(t=n("<div/>").appendTo("body"),t.attr("data-role","panel").attr("data-icon","d-icon-reorder").attr("data-display","push").attr("data-position","fixed").css("position","fixed").attr("title",i.moreTitle),r=n("<ul/>").append(f.children(":not(.d-separator)").clone()),t.append(r),r.taoListview(),r.mobilelist(),r.find("ul").mobilelist(),u=r.children(),o=0,u.each(function(t,i){var r=n(i);e.ranking(r,o)}),t.taoPanel({opened:!0,open:function(){t.data("overflow",n("body").css("overflow"));n("body").css("overflow","hidden")},close:function(){n("body").css("overflow",t.data("overflow"))}}),this.menuPanel=t)}).appendTo(t),i.separators&&(this._setSeparators(!1),this._setSeparators(!0)),f.hide(),this.altMode=!0)),t.css("overflow","auto").css("overflow","visible")):(this._setSeparators(i.separators),t.children(".d-float-none").removeClass("d-float-none"),r>600&&this._setSameWidth(i.sameWidth),i.sameWidth&&(r>400&&r<=600&&t.children(".d-item").css("width","190px"),r<=400&&t.children(".d-item").addClass("d-float-none").css({width:"100%"})),r>400&&r<600&&t.hasClass("responsive")&&t.children(".d-item").removeAttr("style"),r<=400&&n(".d-items-wrapper",t).css("min-width","auto"))):i.type!="toolbar"&&(this._setSeparators(i.separators),this._setSameWidth(i.sameWidth))},_isOverflow:function(){var h=this,o=this.options,i=this.element,t=-1,r,s,f,e,u;return o.type=="horizontal"||o.type=="toolbar"?(r=0,s=i.width(),i.children().each(function(i,u){var f=n(u).outerWidth(!0)+(n(u).outerWidth(!0)-n(u).outerWidth(!1));r+=f;r>s&&t==-1&&(t=i)}),f=0,t>-1&&(e=0,i.children(":lt("+t+")").each(function(t,i){e+=n(i).outerWidth(!0)+(n(i).outerWidth(!0)-n(i).outerWidth(!1))}),f=i.width()-e,f<50&&(t--,i.children().eq(t).hasClass("d-separator")&&t--)),{width:i.width(),itemsWidth:r,index:t,item:t>-1?i.children().eq(t):null}):(u=0,i.children().each(function(r,f){u+=n(f).outerHeight(!0);u>i.height()&&t==-1&&(t=r)}),{height:i.height(),itemsHeight:u,index:t,item:t>-1?i.children().eq(t):null})},_setSameWidth:function(t){var v=this,a=this.options,i=this.element,e,r,c,l,o;if(a.type!="vertical")if(t){var s=i.width(),h=i.children(".d-item:not(.d-item-more)").length,u=0,f=0;i.children(".d-separator").each(function(t,i){n(i).isVisible()&&(u=u+n(i).outerWidth(!0)+(n(i).outerWidth(!0)-n(i).outerWidth(!1)))});e=0;i.children(".d-item").each(function(t,i){e+=n(i).outerWidth(!0)-n(i).outerWidth(!1)});r=(s-u-e)/h;n(".d-item-more",i).length&&(c=n(".d-item-more",i).outerWidth(!0)+(n(".d-item-more",i).outerWidth(!0)-n(".d-item-more",i).outerWidth(!1)),r=(s-c-e-u)/h);r=r-5;i.children(".d-item").each(function(t,i){var r=n(i).outerWidth(!0)+(n(i).outerWidth(!0)-n(i).outerWidth(!1));r>f&&(f=r)});l=r>f?r:f;o=l/16+"em";i.children(".d-item:not(.d-item-more)").css("width",o);n(".d-items-wrapper",i).css("min-width",o)}else i.children(".d-item").css("width","auto"),n(".d-items-wrapper",i).css("min-width","auto")},_setSeparators:function(t){var i=this.options,r=this.element;t?n(".d-item:not(:last-of-type)",this.element).each(function(t,r){if(n(r).next(".d-separator").length==0){var u=n("<li class='d-separator'/>");n(r).after(u);n(r).parent().hasClass("d-menu")&&i.type=="horizontal"}}):n(".d-separator",this.element).remove()},_setOption:function(t,i){return t=="separators"&&this.options.separators!=i&&(this._setSeparators(i),this.options.separators=i),n.dna.taoDataBindingList.prototype._setOption.call(this,t,i)},_initItem:function(t){var o=this,u=this.options,r=this.element,f=this.widgetEventPrefix,i=n(t),e;i.children("ul").length&&(i.addClass("hasChildren"),u.childrenIcon&&(e=n("<span/>").addClass(i.parent().hasClass("horizontal")||i.parent().hasClass("toolbar")?"d-icon-caret-down":"d-icon-caret-right ").appendTo(i.children("a")).addClass("d-children-icon")));i.hasClass("d-item")||i.addClass("d-item");i.bind("click",function(t){if(u.type!="toolbar"||n(this).data("role")||n(">a[href]",i).length!=0||(t.stopPropagation(),t.preventDefault()),n(this).data("role")=="checkbox")n(this).attr("data-checked")!=undefined?(n(this).removeAttr("data-checked"),n(this).isActive(!1)):(n(this).attr("data-checked",!0),n(this).isActive(!0));else if(n(this).data("role")=="radio"){if(n(this).attr("data-group")!=undefined){var e=n(this).attr("data-group");n(".d-item[data-role=radio][data-group='"+e+"']:not('.d-state-disable')",r).removeAttr("data-checked").isActive(!1)}else n(".d-item[data-role=radio]:not('.d-state-disable')",r).removeAttr("data-checked").isActive(!1);n(this).attr("data-checked",!0).isActive(!0)}r.trigger(f+"itemClick",{item:n(this)})})},_onItemCreated:function(t,i){return n.isPlainObject(i)&&i.text=="-"?(t.empty(),t.addClass("d-separator"),this):n.dna.taoHierarchical.prototype._onItemCreated.call(this,t,i)},_unobtrusive:function(){var t=this.element,i=this.options;return n.dna.taoDataBindingList.prototype._unobtrusive.call(this,t),t.data("separators")!=undefined&&(i.separators=t.dataBool("separators")),t.data("item-click")&&(i.itemClick=new Function("event","ui",t.data("item-click"))),t.data("same-width")!=undefined&&(i.sameWidth=t.dataBool("same-width")),t.data("more-icon")!=undefined&&(i.moreIcon=t.data("more-icon")),t.data("more-text")!=undefined&&(i.moreTitle=t.data("more-text")),t.data("alt")!=undefined&&(i.alt=t.dataBool("alt")),t.attr("data-role")=="menubar"?i.type="horizontal":(t.attr("data-role")=="menu"&&(i.type="vertical"),t.attr("data-role")=="toolbar"&&(i.type="toolbar")),this}})}(jQuery),function(n){n.widget("dna.taoForm",{options:{datasource:null,mode:"display",cancel:null,deleted:null,saved:null},_create:function(){var t=this,n=this.options,i=this.widgetEventPrefix,r=this.element;this._unobtrusive();n.datasource&&this._setDataSource(n.datasource)},_unobtrusive:function(){var t=this.element,i=this.options,u=this,f,r;return t.data("source")&&(i.datasource=t.datajQuery("source"),f=n("[name]",t),f.each(function(i,r){var u=n(r);u.data("bind")==undefined&&u.attr("data-bind",t.attr("data-source"))})),t.data("mode")&&(i.mode=t.data("mode")),i.datasource.length&&(i.fields||(i.fields=[]),r=i.datasource.taoDataSource("option","schema"),r.fields&&(i.fields=n.makeArray(r.fields),n.each(i.fields,function(n,t){t.showLabel=!0;t.widget=t.type=="datetime"?"datetime":"textbox"}))),n("[data-rel='update']",t).unbind("click").click(function(){u.update()}),n("[data-rel='delete']",t).unbind("click").click(function(){u._source.taoDataSource("remove")}),this},_setDataSource:function(t){var r=this,u=this.options,i;if(t)if(n.isPlainObject(t))throw"Could not bind to none datasource object.";else{if(!t.jquery)throw"The input object is not a valid datasource object";i="taoDataSource";this._source&&this._source.unbind(i+"position",n.proxy(this._onDataPosition,this)).unbind(i+"inserted",n.proxy(this._onInserted,this)).unbind(i+"updated",n.proxy(this._onUpdated,this)).unbind(i+"removed",n.proxy(this._onRemoved,this)).bindunbind(i+"process",n.proxy(this._onProcess,this)).unbind(i+"error",n.proxy(this._onError,this)).unbind(i+"completed",n.proxy(this._onCompleted,this));this._source=t;this._source.bind(i+"position",n.proxy(this._onDataPosition,this)).bind(i+"inserted",n.proxy(this._onInserted,this)).bind(i+"updated",n.proxy(this._onUpdated,this)).bind(i+"removed",n.proxy(this._onRemoved,this)).bind(i+"process",n.proxy(this._onProcess,this)).bind(i+"error",n.proxy(this._onError,this)).bind(i+"completed",n.proxy(this._onCompleted,this))}},_onDataPosition:function(t,i){this._currentData=i;n("[name][type=hidden],textarea[name]",this.element).each(function(t,r){var u=n(r).attr("name");n(r).val(i[u])})},_onInserted:function(){n("[name][type=hidden],textarea[name]",this.element).each(function(t,i){var r=n(i).attr("name");n(i).val("")});this.element.isDisable(!1)},_onUpdated:function(){},_onRemoved:function(){var n=this._source.taoDataSource("option","data");(n==null||n==undefined||n.length==0)&&this.element.isDisable(!0)},_onProcess:function(){},_onError:function(){},_onCompleted:function(){},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},update:function(){var n=this._getData(),t=this.options;t.mode=="new"&&this._source.taoDataSource("insert",n);t.mode=="edit"&&this._source.taoDataSource("update",n)},_getData:function(){var t={},i=this.element,r=n("[name]",i);return r.each(function(i,r){t[n(r).attr("name")]=n(r).val()}),t},reset:function(){var t=n("[name]",this.element);t.each(function(t,i){var r=n(i);r.val("")});this.element.isDisable(!1)},disable:function(){return this.widget().addClass("d-state-disable"),this},enable:function(){return this.widget().removeClass("d-state-disable"),this},_setOption:function(t,i){return t=="datasource"?(this._setDataSource(i),this):(t=="mode"&&(this.options.mode=i,i=="new"?(this.reset(),n("[data-rel='delete']",this.element).hide()):n("[data-rel='delete']",this.element).show()),n.Widget.prototype._setOption.call(this,t,i))},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoButton",{options:{primaryIcon:null,primaryCheckIcon:null,primaryImg:null,primaryCheckImg:null,secondaryIcon:null,secondaryCheckIcon:null,secondaryImg:null,secondaryCheckImg:null,hoverImg:null,activeImg:null,isDefault:!1,label:null,ajaxurl:null,ajaxtype:"GET",ajaxcomplete:null,ajaxsuccess:null,ajaxerror:null,ajaxdata:null,ajaxbeforesend:null},_create:function(){var n=this.element;return this._unobtrusive(),this.isToggle=!1,n.addClass("d-reset d-ui-widget"),n.attr("type")=="checkbox"?this._createToggle():n.attr("type")=="image"?this._createImage():this._createButtonCore(n),n.attr("disabled")=="disabled"&&n.isDisable(!0),n},_unobtrusive:function(){var n=this.element,t=this.options;return n.data("label")&&(t.label=n.data("label")),n.data("icon-left")&&(t.primaryIcon=n.data("icon-left")),n.data("icon-right")&&(t.secondaryIcon=n.data("icon-right")),n.data("img-left")&&(t.primaryImg=n.data("img-left")),n.data("img-right")&&(t.secondaryImg=n.data("img-right")),n.data("icon-left-checked")&&(t.primaryCheckIcon=n.data("icon-left-checked")),n.data("icon-right-checked")&&(t.secondaryCheckIcon=n.data("icon-right-checked")),n.data("img-left-checked")&&(t.primaryCheckImg=n.data("img-left-checked")),n.data("img-right-checked")&&(t.secondaryCheckImg=n.data("img-right-checked")),n.data("img-hover")&&(t.hoverImg=n.data("img-hover")),n.data("img-active")&&(t.activeImg=n.data("img-active")),n.data("default")!=undefined&&(t.isDefault=n.dataBool("default")),n.data("icon")&&(t.primaryIcon=n.data("icon")),this},_createButtonCore:function(t){var f=this,i=this.options,e=function(){t.isDisable()||t.isHover(!0)},o=function(){t.isDisable()||(t.isHover(!1),f.isToggle||t.isActive(!1))},s=function(){t.isDisable()||t.isActive(!0)},h=function(){t.isDisable()||f.isToggle||t.isActive(!1)},r=i.label?i.label:t.text(),u,c;r&&(r=n.trim(r));t.addClass("d-button").hover(e,o).mousedown(s).mouseup(h).focus(e).blur(o).keydown(s).keyup(h).attr("tabIndex",1).disableSelection();r&&(t.wrapInner("<span class='d-button-text' />"),n(">span.d-button-text",t).disableSelection());t.attr("role")=="link"&&t.addClass("link");i.primaryImg?(u=n("<img/>").addClass("d-primary-icon").attr("src",i.primaryImg).prependTo(t),r==""&&u.css("margin","0px")):i.primaryIcon&&(u=n("<span/>").addClass("d-primary-icon").addClass(i.primaryIcon).prependTo(t),r==""&&u.css("margin","0px"));i.secondaryImg?u=n("<img/>").addClass("d-secondary-icon").attr("src",i.secondaryImg).appendTo(t):i.secondaryIcon&&(c=n("<span/>").addClass("d-secondary-icon").addClass(i.secondaryIcon).appendTo(t));i.isDefault&&t.addClass("d-state-default");this._widget=t;i.ajaxurl&&(t.unbind("click"),t.click(function(r){if(!t.isDisable()){r.stopPropagation();r.preventDefault();f.disable();var u=null;i.ajaxdata&&n.isFunction(i.ajaxdata)&&(u=i.ajaxdata());n.ajax({type:i.ajaxtype?i.ajaxtype:"GET",url:i.ajaxurl,data:u,complete:i.ajaxcomplete,success:i.ajaxsuccess}).always(function(){f.enable()})}}))},_createToggle:function(){var u=this,i=this.element,r=this.element.attr("id"),t=null;this.isToggle=!0;t=r?this.element.next("label[for='"+r+"']"):this.element.next("label");t.length==0&&(t=n("<label/>"),t.text(this.options.label),this.element.after(t));this._createButtonCore(t);i.attr("checked")&&(t.addClass("d-state-active"),i.val(!0));this._setCheckIcon(t);t.bind("click",function(){if(!n(this).isDisable()){n(this).toggleClass("d-state-active");var t=!1;n(this).hasClass("d-state-active")&&(t=!0);u._setCheckIcon(n(this)).element.attr("checked",t).attr("aria-pressed",t).val(t);i.trigger("change")}}).unbind("mouseup").unbind("mousedown").unbind("keydown").unbind("keyup");this.element.attr("style")!=undefined&&t.attr("style",this.element.attr("style"));this.element.attr("class")!=undefined&&t.addClass(this.element.attr("class"));this.element.hide()},_setCheckIcon:function(t){var i=this.options,r=n(">.d-primary-icon",t),u=n(">.d-secondary-icon",t);return t.isActive()?(r.length&&(r[0].tagName.toLowerCase()=="span"?i.primaryCheckIcon&&r.removeClass(i.primaryIcon).addClass(i.primaryCheckIcon):i.primaryCheckImg&&r.attr("src",i.primaryCheckImg)),u.length&&(u[0].tagName.toLowerCase()=="span"?i.secondaryCheckIcon&&u.removeClass(i.secondaryIcon).addClass(i.secondaryCheckIcon):i.secondaryCheckImg&&u.attr("src",i.secondaryCheckImg))):(r.length&&(r[0].tagName.toLowerCase()=="span"?i.primaryIcon&&r.removeClass(i.primaryCheckIcon).addClass(i.primaryIcon):i.primaryImg&&r.attr("src",i.primaryImg)),u.length&&(u[0].tagName.toLowerCase()=="span"?i.secondaryIcon&&u.removeClass(i.secondaryCheckIcon).addClass(i.secondaryIcon):i.secondaryImg&&u.attr("src",i.secondaryImg))),this},_createImage:function(){var t=this.element.before(n("<div/>")).prev(),i=this.options,o=this,s,h,r;t.width(this.element.width()).height(this.element.height());s=new Image;s.src=i.hoverImg;h=new Image;h.src=i.activeImg;var u=o.element.attr("src"),f=i.hoverImg,e=i.activeImg;i.label&&t.text(i.label);this._createButtonCore(t);t.addClass("img").css({"background-image":"url("+u+")","background-position":"center center","background-repeat":"no-repeat"}).unbind("mouseup").unbind("mousedown").unbind("keydown").unbind("keyup").bind("click",function(){o.element.click()}).bind("mouseenter",function(){f&&t.css("background-image","url("+f)+")"}).bind("mouseout",function(){t.css("background-image","url("+u+")")}).bind("mousedown",function(){e&&t.css("background-image","url("+e)+")"}).bind("mouseup",function(){f&&t.css("background-image","url("+f+")")}).bind("keydown",function(n){n.keyCode==13&&e&&t.css("background-image","url("+e)+")"}).bind("keyup",function(){t.css("background-image","url("+u+")")}).disableSelection();this._widget=t;r=new Image;r.src=u;n(r).bind("load",function(){t.width(r.width);t.height(r.height)});this.element.attr("style")!=undefined&&t.attr("style",this.element.attr("style"));this.element.attr("class")!=undefined&&t.addClass(this.element.attr("class"));this.element.hide()},_setOption:function(t,i){if(t=="label"){var r=n(">.d-button-text",this.element);return r.length==0&&(r=n("<span  class='d-button-text' />").appendTo(this.element)),r.text(i),this}return n.Widget.prototype._setOption.call(this,t,i)},_triggerEvent:function(n,t){this.element.trigger(this.widgetEventPrefix+n,t)},disable:function(){return this.widget().isDisable(!0),this.widget()[0].tagName.toLowerCase()=="button"&&this.widget().attr("disabled",!0),this.element},enable:function(){return this.widget().isDisable(!1),this.widget()[0].tagName.toLowerCase()=="button"&&this.widget().attr("disabled",!1),this.element},widget:function(){return this._widget},destroy:function(){n.Widget.prototype.destroy.call(this)}});n.widget("dna.taoButtonGroup",{options:{index:0,checkable:!0,click:null,type:"horizontal"},_create:function(){var u=this,i=this.options,f=this.widgetEventPrefix,t=this.element,r;t.addClass("d-buttons");t.data("type")&&(i.type=t.data("type"));t.data("checkable")!=undefined&&(i.checkable=t.dataBool("checkable"));t.data("onclick")&&(i.click=new Function("event","ui",t.data("onclick")));i.click&&t.bind(f+"click",i.click);r=n(">button",t).taoButton();i.checkable&&r.unbind();i.type=="vertical"&&t.addClass("d-vertical");r.each(function(f,e){f==0&&n(e).addClass("d-first");f>0&&f<r.length-1&&n(e).css({"border-radius":"0px","border-left":"none"});f==r.length-1&&n(e).addClass("d-last");i.index==f&&i.checkable&&n(e).isActive(!0);n(e).bind("click",function(){u._triggerEvent("click",{index:f,button:n(e)})});i.checkable&&n(e).hover(function(){t.isDisable()||n(this).isActive()||n(this).isHover(!0)},function(){n(this).isHover(!1)}).click(function(){t.isDisable()||n(this).isActive()||(r.removeClass("d-state-active"),i.index=f,n(this).isActive(!0))})})},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoDialog",{options:{modal:!0,width:300,height:0,title:"",position:"center center",draggable:!0,resizable:!1,autoOpen:!0,fullscreen:!1,url:null,open:null,close:null,load:null,dragstart:null,dragstop:null,drag:null,closeButton:!0,cache:!0,messageLoading:" Carregando ..."},_create:function(){var r=this,n=this.options,i=this.widgetEventPrefix,t=this.element;return this._unobtrusive(),n.load&&t.bind(i+"load",n.load),n.open&&t.bind(i+"open",n.open),n.close&&t.bind(i+"close",n.close),n.drag&&t.bind(i+"drag",n.drag),n.dragstart&&t.bind(i+"dragstart",n.dragstart),n.dragstop&&t.bind(i+"dragstop",n.dragstop),n.autoOpen?this.open():n.url||t.hide(),t},_unobtrusive:function(){var n=this.element,t=this.options;n[0].tagName=="A"&&n.attr("href")&&!n.attr("href").startsWith("javascript")&&n.attr("href")!="#"&&(t.url=n.attr("href"),n.attr("href","javascript:void(0);"));n.attr("title")?(t.title=n.attr("title"),n.removeAttr("title")):n.data("title")&&(t.title=n.data("title"));n.data("pos")!=undefined&&(t.position=n.data("pos"));n.data("width")!=undefined&&(t.width=n.dataInt("width"));n.data("height")!=undefined&&(t.height=n.dataInt("height"));n.data("modal")!=undefined&&(t.modal=n.dataBool("modal"));n.data("fullscreen")!=undefined&&(t.fullscreen=n.dataBool("fullscreen"));n.data("opened")!=undefined&&(t.autoOpen=n.dataBool("opened"));n.data("close-btn")!=undefined&&(t.closeButton=n.dataBool("close-btn"));n.data("cache")!=undefined&&(t.cache=n.dataBool("cache"));n.data("load")&&(t.load=new Function("event",n.data("load")));n.data("open")&&(t.open=new Function("event",n.data("open")));n.data("close")&&(t.close=new Function("event",n.data("close")));n.data("draggable")!=undefined&&(t.draggable=n.dataBool("draggable"));n.data("resizable")!=undefined&&(t.resizable=n.dataBool("resizable"));n.data("padding")!=undefined&&n.css("padding",n.data("padding"))},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},_createDialog:function(){var i=this.element,t=this,r=this.options,u=n("<div/>").addClass("d-ui-widget d-dialog").appendTo("body"),e=n("<h3/>").addClass("d-ui-widget-header d-dialog-header").appendTo(u),c,f,o,h,s;return this.header=e,n("<span/>").addClass("d-inline").text(r.title).appendTo(e),r.closeButton&&(c=n("<span/>").addClass("d-inline d-dialog-close d-icon-cross-3").appendTo(e).click(function(){t.close()})),i.addClass("d-ui-widget-content d-dialog-content").appendTo(u).show(),f=0,n("[tabIndex]").each(function(t,i){n(i).attr("tabIndex")>f&&(f=n(i).attr("tabIndex"))}),u.attr("tabIndex",f).css({"z-index":n.topMostIndex()+1}).bind("keypress",function(n){n.keyCode==27&&t.close()}),this.dialog=u.show(),o=function(i){n("[data-rel='close']",i).bind("click",function(){t.close()})},r.url?(h={padding:"20px",width:r.width-100+"px",height:r.height-100+"px"},s=n("<div/>").appendTo(i).css(h),n("<span/>").addClass("fa fa-spinner fa-pulse fa-2x").appendTo(s),n("<span/>").html("&nbsp;&nbsp;"+r.messageLoading).appendTo(s),t._setposition(),n.ajax(r.url).done(function(n){i.css("opacity","0");i.html(n);i.unobtrusive_ajax();i.taoUI();t._setsize();t._setposition();i.css("opacity","1");o(i);t._triggerEvent("load")})):(t._setsize(),t._setposition(),o(i)),r.draggable&&u.draggable({handle:".d-dialog-header",iframeFix:!0,start:function(n,i){t._triggerEvent("dragstart",i)},stop:function(n,i){t._triggerEvent("dragstop",i)},drag:function(n,i){t._triggerEvent("drag",i)}}),r.resizable&&u.resizable(),u},open:function(){var t=this,r=this.options,i;r.modal&&!this.overlay&&(t.overlay=n("<div/>").addClass("d-overlay").css({"z-index":n.topMostIndex()}).height(n(document).height()).appendTo("body"));this.dialog?(this.dialog.show(),this._setposition()):(i=this._createDialog(),t.dialog=i);this._triggerEvent("open")},close:function(){this.overlay&&(this.overlay.remove(),this.overlay=null);this.dialog.hide();this.options.fullscreen&&n("body").css("overflow",this.overflow);this._triggerEvent("close");this.options.cache||(this.element.unbind(),this.dialog.remove());var t=n("[title]");t.tooltip();t.tooltip("destroy").tooltip({tooltipClass:"d-customTooltip"})},_setsize:function(){var t=this.options,n={width:window.innerWidth,height:window.innerHeight};t.fullscreen||(t.width<n.width&&(n.width=t.width),n.height=t.height<n.height?t.height:0);this.dialog.width(n.width);n.height&&this.dialog.height(n.height)},_setposition:function(){var t=this.options;t.fullscreen&&(this.overflow=n("body").css("overflow"),n("body").css("overflow","hidden"));this.dialog.css({"z-index":n.topMostIndex()+1,position:"absolute"}).stop(!0,!1).position({of:n(window),at:t.position,offset:t.fullscreen?window.scrollX+"px "+window.scrollY+"px":"0px 0px",my:"center center"}).focus()},destroy:function(){var t=this,i=this.element,r=this.options;t.overlay&&t.overlay.remove();t.dialog&&t.dialog.remove();n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoTags",n.dna.taoDataBindable,{options:{value:null,dataValueField:"value",dataTextField:"text",dataTooltipField:"tooltip",added:null,removed:null,itemCreated:null,itemClick:null},_create:function(){var f=this,i=this.options,r=this.widgetEventPrefix,t=this.element,u=n("<ul/>").addClass("d-reset d-tags");this.wrapper=u;n.dna.taoDataBindable.prototype._create.call(this);t.before(u);this.val(i.value?i.value:t.val());t.attr("style")&&u.attr("style",t.attr("style"));(t.hasClass("d-inline")||t.attr("data-inline")=="true")&&u.addClass("d-inline");t.hide();i.itemCreated&&t.bind(r+"itemCreated",i.itemCreated);i.added&&t.bind(r+"added",i.added);i.removed&&t.bind(r+"removed",i.removed);i.itemClick&&t.bind(r+"itemClick",i.itemClick)},_unobtrusive:function(){var t=this.element,r=this,i=this.options;t.data("valuefield")&&(i.dataValueField=t.data("valuefield"));t.data("textfield")&&(i.dataTextField=t.data("textfield"));t.data("tooltipfield")&&(i.dataTooltipField=t.data("tooltipfield"));t.data("onitemcreated")&&(i.itemCreated=new Function("event","ui",t.data("onitemcreated")));t.data("onitemclick")&&(i.itemClick=new Function("event","value",t.data("onitemclick")));t.data("added")&&(i.added=new Function("event","ui",t.data("added")));t.data("removed")&&(i.removed=new Function("event","ui",t.data("removed")));n.dna.taoDataBindable.prototype._unobtrusive.call(this)},_tagsToVal:function(){var t=[];this.wrapper.children().each(function(i,r){t.push(n(r).data("value"))});t?this.element.val(t.join(",")):this.element.val("");this.options.value=this.element.val()},val:function(t){var r=this,u=this.options,f,i;return t==undefined?this.element.val():(this.wrapper.empty(),n.type(t)=="string"?(t&&(f=t.split(","),n.each(f,function(n,t){r._add(t)})),this.element.val()!=t&&this.element.val(t)):(n.each(t,function(n,t){r._add(t)}),i=[],n.each(t,function(n,t){if(u.dataValueField){var r=t[u.dataValueField];r!=undefined&&i.push(r)}}),this.element.val(i.join(","))),this.options.value=t,this)},contains:function(t){var r=[],u=this.options,i=null;return(this.wrapper.children().each(function(t,i){r.push(n(i).data("value"))}),n.isPlainObject(t)?u.dataValueField&&(i=t[u.dataValueField]):i=t,i==undefined||i==null)?!1:n.inArray(i,r)>-1?!0:!1},_setOption:function(t,i){return t=="value"?(this.val(i),this):n.dna.taoDataBindable.prototype._setOption.call(this,t,i)},_onBindingPosition:function(n){return n&&n.value!=undefined&&this.val(n.value),this},_add:function(t){var u;if(!t)return null;var f=this,h=this.element,e=[],i=this.options,r,o,s;return(this.wrapper.children().each(function(t,i){e.push(n(i).data("value"))}),n.isPlainObject(t)?(i.dataValueField&&(r=t[i.dataValueField]),i.dataTextField&&(o=t[i.dataTextField]),i.dataTooltipField&&(s=t[i.dataTooltipField])):r=o=t,r==undefined||r==null)?null:n.inArray(r,e)>-1?null:(u=n("<li/>").addClass("d-tag d-button d-ui-widget").hover(function(){n(this).isHover(!0)},function(){n(this).isHover(!1)}).click(function(){f._triggerEvent("itemClick",n(this).data("value"))}).append(n("<span/>").addClass("d-button-text d-tag-label").text(o)).append(n("<span/>").addClass("d-icon-cross-3").click(function(){var t=n(this).parent().data("value");n(this).parent().remove();f._tagsToVal();f._triggerEvent("removed",t)})).appendTo(f.wrapper).data("value",r),(i.mode=="display"||h.isReadonly())&&n(".d-icon-cross-3",u).remove(),s&&u.attr("title",s).attr("data-tooltip-position","top").attr("data-tooltip-width",150).taoTooltip(),e.push(r),this.element.val(e.join(",")),u!=null&&this._triggerEvent("itemCreated",{item:u,dataItem:t}),u)},add:function(n){var t=this._add(n);return t!=null&&this._triggerEvent("added",{item:t,dataItem:n}),this},remove:function(t){var f;if(!t)return this;var o=this,r=[],u=this.options,i,e;return(this.wrapper.children().each(function(t,i){r.push(n(i).data("value"))}),n.isPlainObject(t)?u.dataValueField&&(i=t[u.dataValueField]):i=e=t,i==undefined||i==null)?this:n.inArray(i,r)<0?this:(f=n("li",this.wrapper),f.each(function(t,r){if(n(r).data("value")==i){n(r).remove();return}}),this.element.val(r.join(",")),this)},destroy:function(){this.wrapper&&this.wrapper.remove();this.element.show();n.dna.taoDataBindable.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoSlider",{options:{step:1,value:0,max:100,min:0,orientation:"horizontal",to:null,slide:null,start:null,stop:null,change:null},_create:function(){var o=this,t=this.options,s=this.widgetEventPrefix,i=this.element,r=i,h;this._unobtrusive();i[0].tagName=="INPUT"&&(i.wrap("<div/>"),r=i.parent());t.slide&&i.bind(s+"slide",t.slide);t.start&&i.bind(s+"start",t.start);t.stop&&i.bind(s+"stop",t.stop);t.change&&i.bind(s+"change",t.change);r.addClass("d-reset d-ui-widget d-slider");var u=n("<div/>").addClass("d-ui-widget d-slider-handler").appendTo(r).hover(function(){n(this).isHover(!0)},function(){n(this).isHover(!1)}),l=r.width()/t.max,c=n("<div/>").addClass("d-slider-value d-ui-widget-content d-state-active").appendTo(r),e=null,f=t.value;return u.isVisible()&&u.position({of:r,my:"center center",at:"left center"}),t.value?(h=t.value/t.max*r.width()+"px",r.width()==0&&(h=t.value/t.max*100+"%"),c.css("width",h),u.css("left",h)):u.css("left","0px"),u.draggable({axis:t.orientation=="horizontal"?"x":"y",containment:"parent",drag:function(i,s){var h,l,a;c.css("width",s.position.left+"px");h=c.width()/r.width();l=h>=.99?1:h;f=Math.round(l*t.max);e.css("z-index",n.topMostIndex()).position({of:u,at:"middle top",my:"middle bottom",offset:"0px -10px"}).text(f);t.to&&t.to.val(f);a={value:f};o._triggerEvent("slide",a)},stop:function(){o._triggerEvent("stop",{value:f});u.isActive(!1);t.value!=f&&(i[0].tagName=="INPUT"&&(i.val(f),i.trigger("change")),o._triggerEvent("change",{value:f}));e&&e.remove()},start:function(){u.isActive(!0);o._triggerEvent("start")}}).bind("mousedown",function(){e=n("<div/>").addClass("d-slider-helper d-ui-widget-content").appendTo(r);e.text(t.value).css("z-index",n.topMostIndex()).position({of:u,at:"middle top",my:"middle bottom",offset:"0px -10px"})}).bind("mouseup",function(){e&&e.remove()}),i},_unobtrusive:function(){var n=this.element,t=this.options;n.data("max")!=undefined&&(t.max=parseFloat(n.data("max")));n.data("min")!=undefined&&(t.min=parseFloat(n.data("min")));n.data("orientation")&&(t.orientation=n.data("orientation"));n.data("step")!=undefined&&(t.step=n.data("step"));n.data("value")!=undefined?t.value=n.dataInt("value"):n.val()!=""&&(t.value=n.val());n.data("to")!=undefined&&(t.to=n.datajQuery("to"));n.data("start")&&(t.start=new Function("event","ui",n.data("start")));n.data("slide")&&(t.slide=new Function("event","ui",n.data("slide")));n.data("change")&&(t.change=new Function("event","ui",n.data("change")));n.data("stop")&&(t.stop=new Function("event","ui",n.data("stop")))},_setVal:function(t){var u=this.element,i=this.options,r,f;return i.value=t,r=u,u[0].tagName=="INPUT"&&(u.val(t),r=u.parent()),i.to&&i.to.val(t),f=i.value/i.max*r.width()+"px",n(".d-slider-value",r).css("width",f),n(".d-slider-handler",r).css("left",f),this.element},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},_setOption:function(t,i){return t=="value"&&this._setVal(i),n.Widget.prototype._setOption.call(this,t,i)},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoAccordion",{options:{active:0,collapsed:!1,duration:200},_create:function(){var r=this,i=this.options,u=this.widgetEventPrefix,t=this.element;this._unobtrusive();t.addClass("d-reset d-ui-widget d-accordion");i.collapsed?n(">div",t).hide():n(">div",t).each(function(t,r){i.active!=t?n(r).hide():n(r).addClass("d-state-active")});n(">div",t).addClass("d-ui-widget-content");n(">h3",t).wrapInner('<a href="javascript:void(0);"/>');n(">h3",t).on("click",function(){n(this).isDisable()||r._setActive(n(this))}).addClass("d-ui-widget-header").disableSelection().on("mouseenter",function(){n(this).isActive()||n(this).isDisable()||n(this).isHover(!0)}).on("mouseleave",function(){n(this).isHover(!1)});i.collapsed?n(">h3",t).prepend(n("<span/>").addClass("icon-icoMenu_Abrir")):n(">h3",t).prepend(n("<span/>").addClass("icon "+(i.active?"icon-icoMenu_Fechar":"icon-icoMenu_Abrir"))).eq(i.active).isActive(!0);n(">h3.d-state-active>.icon",t).length&&n(">h3.d-state-active>.icon",t).removeClass("icon-icoMenu_Abrir").addClass("icon-icoMenu_Fechar")},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},_unobtrusive:function(){var n=this.element,t=this.options;n.data("active")!=undefined&&(t.active=n.data("active"));n.data("collapsed")!=undefined&&(t.collapsed=n.dataBool("collapsed"))},_setActiveIndex:function(t){return this._setActive(n(">h3",el).eq(t))},_setActive:function(t){var r="d-state-active",u=this.element,f=this.options,i=t.next(),e;return t.children(".d-icon-loading").length?u:(e=function(){f.collapsible||(n(">div.d-state-active",u).not(i).animate({height:"toggle"},f.duration,function(){n(this).removeClass(r);n(">.icon",n(this).prev()).removeClass("icon-icoMenu_Fechar").addClass("icon-icoMenu_Abrir")}),n(">h3.d-state-active",u).not(t).removeClass(r));t.toggleClass(r).next().animate({height:"toggle"},f.duration).toggleClass(r);n(">.icon",t).toggleClass("icon-icoMenu_Abrir").toggleClass("icon-icoMenu_Fechar")},i.data("url")?(t.children(".icon").addClass("d-icon-loading"),i.load(i.data("url"),function(){t.children(".icon").removeClass("d-icon-loading");i.data("height","auto").removeAttr("data-url").taoUI();e()})):e(),u)},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},_setOption:function(t,i){return t=="acitve"&&this._setActiveIndex(i),n.Widget.prototype._setOption.call(this,t,i)},destroy:function(){this.element.removeClass("d-accordion");n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoTabs",{options:{active:0,prefix:"d-tabs-",fill:!1},_create:function(){var s=this,u=this.options,h=this.widgetEventPrefix,t=this.element,i,o,f,e,r;t.addClass("d-reset d-ui-widget  d-tabs");i=n(">ul",t).addClass("d-tabs-navs");n(">ul>li",t).addClass("d-tabs-nav d-ui-widget-header");o=n(".d-tabs-nav",t).eq(0).height();f=0;i.children().each(function(i,r){var o,s,h,e,c,l;if(f+=n(r).outerWidth(!0),o=n("a",r),s=o.attr("href"),o.disableSelection(),s&&!s.startsWith("#")){for(h=u.prefix,e=0;n("#"+h+e).length>0;)e++;o.attr("href","#"+h+e);c=n(">div",t).eq(i-1);l=n('<div id="'+h+e+'" />').addClass("d-tabs-panel").attr("data-url",s);c.length?c.after(l):l.appendTo(t)}});e=i.children().eq(0).height();i.width(f).height(e);f>t.width()?i.draggable({axis:"x",stop:function(r,u){if(u.position.left>=0)return n(this).stop(!0,!1).animate({left:0});var f=-(i.width()-t.width());u.position.left<f&&n(this).stop(!0,!1).animate({left:f})}}):i.width(t.width());r=n("<div/>").height(t.height()-e);n(">div",t).addClass("d-tabs-panel").appendTo(r);r.appendTo(t);r.taoContentSlider({actived:function(t,r){n(".d-tabs-nav.d-state-active",i).isActive(!1);n(".d-tabs-nav",i).eq(r.index).isActive(!0);var u=n(".d-tabs-nav.d-state-active",i).children("a").attr("href");n(u).attr("data-url")&&n(u).load(n(u).attr("data-url"),function(){n(u).taoUI();n(u).removeAttr("data-url")})}});n(".d-tabs-nav",i).on("click",function(i){if(i.stopPropagation(),i.preventDefault(),n(this).isDisable())return t;r.taoContentSlider("go",n(this).index())}).on("mouseenter",function(){n(this).isActive()||n(this).isDisable()||n(this).isHover(!0)}).on("mouseleave",function(){n(this).isHover(!1)}).disableSelection();u.active?(n(".d-tabs-nav",i).eq(u.active).isActive(!0),r.taoContentSlider("go",u.active)):n(">ul>li:first",t).addClass("d-ui-widget-content").isActive(!0)},_unobtrusive:function(){var n=this.element,t=this.options;n.data("active")!=undefined&&(t.active=n.data("active"));n.data("fill")!=undefined&&(t.fill=n.dataBool("fill"))},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},_setOption:function(t,i){return n.Widget.prototype._setOption.call(this,t,i)},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoPager",{options:{totalpages:50,totalrecords:0,pageindex:1,pagesize:20,pagerClass:null,datasource:null,changed:null},_create:function(){var i=this,n=this.options,t=this.element,r=this.widgetEventPrefix;this._unobtrusive();t.hasClass("d-pager")||t.addClass("d-pager");n.changed&&t.bind(r+"changed",n.changed);n.datasource?n.datasource.bind("taoDataSourcechanged",function(){n.totalpages=n.datasource.taoDataSource("totalPages");n.totalrecords=n.datasource.taoDataSource("total");n.pagesize=n.datasource.taoDataSource("option","pageSize");n.pageindex=n.datasource.taoDataSource("option","pageIndex");t.empty();i._initUI()}):i._initUI()},_unobtrusive:function(){var n=this.element,t=this.options;n.data("source")&&(t.datasource=n.datajQuery("source"));n.data("onbind")&&(t.dataBind=new Function("event","ui",n.data("onbind")));n.data("change")&&(t.changed=new Function("event","ui",n.data("change")));n.data("tmpl")&&(t.tmpl=n.datajQuery("tmpl"));n.data("pages")!=undefined&&(t.totalpages=n.dataInt("pages"));n.data("size")!=undefined&&(t.pagesize=n.dataInt("size"));n.data("index")!=undefined&&(t.pageindex=n.dataInt("index"))},_triggerEvent:function(n,t){this.element.trigger(this.widgetEventPrefix+n,t)},_initUI:function(){var o=this,u=this.options,i=this.element,f=Math.floor(u.totalpages/10),t=Math.floor((u.pageindex-1)/10),r,e;if(i.children().length)i.children().each(function(t,i){n(i).attr("data-index",t)});else{for(i.append(n("<a/>").addClass("d-ui-widget").addClass("d-button").addClass("notPage").addClass("decrease").text("...").hide()),r=1;r<=u.totalpages;r++)i.append(n("<a/>").attr("data-index",r).addClass("d-ui-widget").addClass("d-button").attr("href","javascript:void(0);").text(r));i.children().each(function(i,r){10*t<i&&i<=10*(t+1)?n(r).show():n(r).hide()});i.append(n("<a/>").addClass("d-ui-widget").addClass("d-button").addClass("increase").addClass("notPage").text("..."));t==f?n("a.increase").hide():n("a.increase").show();t==0?n("a.decrease").hide():n("a.decrease").show();n("a.decrease").on("click",function(){t=t>0?t-1:0;i.children("a").not(".notPage").each(function(i,r){10*t<=i&&i<10*(t+1)?n(r).show():n(r).hide()});n("a.increase").show();t==0?n("a.decrease").hide():n("a.decrease").show()});n("a.increase").on("click",function(){t=t<f?t+1:t;i.children("a").not(".notPage").each(function(i,r){10*t<=i&&i<10*(t+1)?n(r).show():n(r).hide()});t==f?n("a.increase").hide():n("a.increase").show();n("a.decrease").show()})}n("a",i).not(".notPage").on("click",function(){o.go(parseInt(n(this).data("index")))});n("a",i).on("mouseover",function(){n(this).isHover(!0)});n("a",i).on("mouseleave",function(){n(this).isHover(!1)});e=n("[data-index='"+u.pageindex+"']",i);e.length&&e.isActive(!0)},refresh:function(){this.options.pageindex=1;this.element.empty();this._initUI();console.log(this.options.totalpages)},go:function(t){var e=this,i=this.options,r=this.element,u=n(".d-state-active",r),f=n("[data-index='"+t+"']",r);u.length&&u.isActive(!1);f.length&&f.isActive(!0);i.pageindex!=t&&(i.pageindex=t,e._triggerEvent("changed",t));i.datasource&&i.datasource.taoDataSource("page",t)},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoGrid",n.dna.taoDataBindingList,{options:{selection:null,pagable:!1,sortable:!1,scrollable:!1,filterable:!1,groupable:!1,height:null,width:null,showHeader:!0,columns:null,detailTemplate:null,rowTemplate:null},_create:function(){var o=this,t=this.options,i=this.element,s=this.widgetEventPrefix,r=!1,f,u,e;this._unobtrusive();this._widget=i;i[0].tagName.toLowerCase()=="table"&&(r=!0);r?(this._widget=n("<div/>").addClass("d-reset d-ui-widget d-grid"),i.before(this._widget),i.removeAttr("data-role")):i.addClass("d-grid");t.groupable&&n("<div/>").addClass("d-grid-group").prependTo(this._widget);f=n("<div/>").addClass("d-grid-header").appendTo(this._widget);t.showHeader||f.hide();n("<div/>").addClass("d-grid-filter").appendTo(this.widget()).hide();n("<div/>").addClass("d-ui-widget-content d-grid-content").appendTo(this._widget);t.pagable&&n("<div/>").addClass("d-grid-pager").appendTo(this._widget).taoPager({datasource:t.datasource});r&&(u=[],e=n(">thead th,>thead td",i),e.each(function(t,i){var r=n(i),f={name:r.attr("data-field")!=undefined?r.attr("data-field"):n.trim(r.text()),title:n.trim(r.text()),width:r.data("width")!=undefined?r.dataInt("width"):0,type:r.attr("data-type")!=undefined?r.attr("data-type"):"string"};r.data("align")?f.align=r.data("align"):f.type=="number"&&(f.align="right");u.push(f)}),this.options.columns=u,n(">thead",i).hide(),i.attr("style")!=undefined&&i.attr("style").indexOf("height")>-1&&(this.options.height=i.height(),this.options.scrollable=!0),t.datasource==null&&(t.datasource={mapper:new tao.htmlTableMapper,data:i}),i.hide());this._setDataSource(t.datasource);this._source&&this._getSchemaCols(this._source.taoDataSource("option","schema"));t.columns&&(this._grid().initColumns(t.columns),t.height?(this._grid().content.tableElement.height(t.height),o._createScroller(!0)):n(">.d-grid-content",this.widget()).css("overflow-y","auto"));this._setGroupable(t.groupable)._setFilterable(t.filterable)._bindRowEvents()._bindCellEvents()._bindColEvents();this._source&&this._source.taoDataSource("read")},_unobtrusive:function(){var t=this.element,i=this.options;return t.data("onselect")&&(i.select=new Function("event","ui",t.data("onselect"))),t.data("selection")!=undefined&&(i.selection=t.data("selection")),t.data("pagable")!=undefined&&(i.pagable=t.dataBool("pagable")),t.data("scrollable")!=undefined&&(i.scrollable=t.dataBool("scrollable")),t.data("filterable")!=undefined&&(i.filterable=t.dataBool("filterable")),t.data("sortable")!=undefined&&(i.sortable=t.dataBool("sortable")),t.data("groupable")!=undefined&&(i.groupable=t.dataBool("groupable")),t.data("height")!=undefined&&(i.height=t.dataInt("height")),t.data("detailTmpl")&&(i.detailTemplate=t.datajQuery("detailTmpl")),t.data("rowTmpl")&&(i.rowTemplate=t.datajQuery("rowTmpl"),i.itemTmpl=i.rowTemplate),n.dna.taoDataBindingList.prototype._unobtrusive.call(this)},_grid:function(){var i=this.options,r=this,t=function(t){this.element=t;var i=n(">table",t);i.length||(i=n("<table/>").appendTo(t));this.tableElement=i};return t.prototype={columns:function(t){if(t&&n.isArray(t)){var i=n(">colgroup",this.tableElement);i.length?i.empty():i=n("<colgroup/>").appendTo(this.tableElement);n.each(t,function(t,r){if(!r.hidden){var u=n("<col/>").appendTo(i);r.width&&u.width(r.width)}})}return n(">colgroup>col",this.tableElement)},heads:function(t,r){var u,f;return t&&n.isArray(t)&&(u=n(">thead",this.tableElement),u.length?u.empty():u=n("<thead/>").appendTo(this.tableElement),f=n("<tr/>").appendTo(u),n.each(t,function(t,u){if(!u.hidden){var e=n("<th/>").attr("data-field",u.name).attr("data-type",u.type?u.type:"string").addClass("d-ui-widget-header").appendTo(f).disableSelection();i.sortable&&e.hover(function(){n(this).isHover(!0)},function(){n(this).isHover(!1)});u.width&&e.width(u.width);n.isFunction(r)?r(e,u):e.append(n("<a/>").attr("href","javascript:void(0);").text(u.title?u.title:u.name))}})),n(">thead>tr>th",this.tableElement)},body:function(t){var i=n(">tbody",this.tableElement);return i.length==0&&t?n("tbody").appendTo(this.tableElement):i}},this.elements||(this.elements={header:new t(n(">.d-grid-header",this.widget())),filter:new t(n(">.d-grid-filter",this.widget())),group:new t(n(">.d-grid-group",this.widget())),content:new t(n(">.d-grid-content",this.widget())),footer:new t(n(">.d-grid-footer",this.widget())),initColumns:function(n){this.header.columns(n);this.header.heads(n);i.filterable&&this.filter.columns(n);this.content.columns(n);this.footer.length&&this.footer.columns(n)}}),this.elements},_bindRowEvents:function(){var t=this.options,i=this,r=n(">.d-grid-content>table>tbody>tr",this.widget());return r.each(function(r,u){var f=n(u);f.attr("tabIndex",r);r%2&&f.addClass("d-row-alt");f.hover(function(){n(this).isDisable()||n(this).isActive()||t.selection&&(t.selection=="row"||t.selection=="both")&&n(this).isHover(!0)},function(){n(this).isHover(!1)}).bind("click",function(){if(!n(this).isDisable()&&!n(this).isActive()&&t.selection&&(t.selection=="row"||t.selection=="both")){n(this).siblings(".d-state-active").removeClass("d-state-active");n(this).isActive(!0);var r=null;i._source&&n(this).data("dataItem")&&(r=n(this).data("dataItem"),i._source.taoDataSource("pos",r));i._triggerEvent("select",{element:n(this),dataItem:r})}}).bind("keypress",function(t){if(t.keyCode==40||t.keyCode==38){var r=parseInt(n(this).attr("tabIndex")),i=n(this).siblings("[tabIndex='"+(r+(t.keyCode==40?1:-1))+"']");i.length&&i.click()}else t.keyCode==13})}),this},_bindCellEvents:function(){var i=this,t=this.options,r=n(">.d-grid-content>table>tbody>tr>td",this.widget());return r.each(function(r,u){n(u).bind("click",function(){var r=n(">.d-grid-content>table>tbody>tr>td.d-state-active",i.widget());r.length&&r.removeClass("d-state-active");t.selection&&(t.selection=="cell"||t.selection=="both")&&n(this).isActive(!0)})}),this},_bindColEvents:function(){var i=this,r=this.options,t=this._grid().header.heads();return t.click(function(){if(r.sortable){var f=n(this).data("dir"),u=n(">a>.d-sorter",t);u.length&&u.remove();f||(f="asc");u=n("<span/>").addClass("d-sorter").appendTo(n(">a",this));f=="asc"?(n(this).data("dir","desc"),u.addClass("d-icon-caret-up")):(n(this).data("dir","asc"),u.addClass("d-icon-caret-down"));i.sort({field:n(this).data("field"),dir:f})}}),this},_onDataChanged:function(n){var t=this._source.taoDataSource("option","schema");t&&t.fields&&t.fields.length?this._getSchemaCols(t):(this.options.columns==null||this.options.columns.length==0)&&this._generateCols(n.data);this._createDataElements(n.data)._bindRowEvents()._bindCellEvents()},_onProcess:function(){this.widget().blockUI()},_onComplete:function(){this.widget().unblockUI()},_getItemsContainer:function(){var r=this.options,i=n(">.d-grid-content>table",this.widget()),t=n(">tbody",i);return t.length||(t=n("<tbody/>").appendTo(i)),t},_createItemElement:function(){return n("<tr/>")},_onItemCreated:function(t,i){n.each(this.options.columns,function(r,u){if(!u.hidden){var f=i?i[u.name]:"",e=n("<td/>").appendTo(t).html(f);u.align&&e.css("text-align",u.align)}})},_createScroller:function(t){var i=n(">.d-grid-header",this.widget()),r=n(">.d-grid-header-wrap",i),u;return t?(r.length||(i.css("padding-right","17px").wrapInner("<div class='d-grid-header-wrap' />"),u=n(">.d-grid-content",this.widget()),this.options.height&&u.height(this.options.height)),n(">.d-grid-content",this.widget()).css("overflow-y","scroll")):(r.length&&(n(">table",r).appendTo(i),i.css("padding-right","0px"),r.remove(),n(">.d-grid-content",this.widget()).css("height","auto")),n(">.d-grid-content",this.widget()).css("overflow-y","auto")),this},_getSchemaCols:function(n){return n&&n.fields&&n.fields.length>0&&(this.options.columns=n.fields,this._grid().initColumns(n.fields)),this},_generateCols:function(t){var r=[],u,i,f;if(t&&t.length){u=t[0];for(i in u)f={name:i,title:i,type:n.type(u[i])},r.push(f);this.options.columns=r;this._grid().initColumns(r)}return this},_setFilterable:function(t){var i=this._grid().filter,r=this;return t?(i.heads().length||this.options.columns&&i.heads(this.options.columns,function(t,i){var e=n("<a data-role='link'>Filter:None<\/a>").appendTo(t),u=n("<ul/>").attr("data-role","menu").attr("data-trigger","prev").attr("data-checkable",!0).appendTo(t),f=n("<input data-role='textbox' />");n("<li/>").append(f).appendTo(u);n("<li/>").addClass("d-spliter").appendTo(u);(i.type==undefined||i.type!="number")&&(n("<li/>").append(n("<a/>").text("Starts with").attr("href","javascript:void(0);")).data("operator","startswith").appendTo(u),n("<li/>").append(n("<a/>").text("Contains").attr("href","javascript:void(0);")).data("operator","contains").appendTo(u),n("<li/>").append(n("<a/>").text("Doesn't contain").attr("href","javascript:void(0);")).data("operator","not~contains").appendTo(u));n("<li/>").append(n("<a/>").text("Equals").attr("href","javascript:void(0);")).data("operator","eq").appendTo(u);n("<li/>").append(n("<a/>").text("Doesn't equal").attr("href","javascript:void(0);")).data("operator","neq").appendTo(u);i.type&&i.type=="number"&&(n("<li/>").append(n("<a/>").text("Is less then").attr("href","javascript:void(0);")).data("operator","lt").appendTo(u),n("<li/>").append(n("<a/>").text("Is less then or equal to").attr("href","javascript:void(0);")).data("operator","le").appendTo(u),n("<li/>").append(n("<a/>").text("Is greater then").attr("href","javascript:void(0);")).data("operator","gt").appendTo(u),n("<li/>").append(n("<a/>").text("Is greater then or equal to").attr("href","javascript:void(0);")).data("operator","ge").appendTo(u));f.keyup(function(){n(t).attr("data-operator")!=undefined&&f.val()&&r._onFilterChanged()}).click(function(n){n.stopPropagation()});u.children().click(function(){if(f.val()){n(t).attr("data-operator",n(this).data("operator"));n(t).attr("data-val",f.val());e.hide();var i=n(this);n("<div/>").addClass("d-filter d-state-active").append(n("<span/>").text(n(this).text()+" "+f.val())).appendTo(t).append(n("<span/>").addClass("d-icon-cross-3")).click(function(){n(this).remove();e.show();n(t).removeAttr("data-operator").removeAttr("data-val");f.val("");i.isActive(!1);r._onFilterChanged()});r._onFilterChanged()}})}),n(">.d-grid-header>.d-grid-header-wrap",this.widget()).length&&(n(i.element).parent().hasClass("d-grid-header-wrap")||(n(i.element).wrapInner('<div class="d-grid-header-wrap"/>'),n(i.element).css({"padding-right":"17px"}))),n(i.element).show().taoUI()):n(i.element).hide(),this},_setGroupable:function(t){var i=this,r;return t?(n(">.d-grid-group",this.widget()).length||n("<div/>").addClass("d-grid-group").prependTo(this.widget()),n(">.d-grid-group",this.widget()).show(),r=this._grid().group,n(">thead",r.tableElement).length==0&&n("<thead/>").appendTo(r.tableElement).append(n("<tr/>").append(n("<th/>").addClass("d-empty-helper").text("Drag a column header and drop it here to group by that column"))),n(">.d-grid-group tr",this.widget()).sortable({revert:!0,axis:"x",items:"th:not(.d-empty-helper)",placeholder:"d-state-normal",change:function(){i._onGroupsChanged()},receive:function(t,r){var f=n(">.d-grid-group .d-empty-helper",i.widget()),u,e;f.hide();r.sender.addClass("d-state-added");u=n("th[data-field='"+r.sender.data("field")+"']",this);n(">a",u).prepend(n("<span/>").addClass("d-icon-cross-3").css({display:"inline-block"}).click(function(){u.siblings(":not(.d-empty-helper)").length==0&&f.show();u.remove();i._onGroupsChanged()}));e=function(){var i=n(".d-sorter",u),t=n(".d-sorter",r.sender);i.length?n(".d-sorter",u).attr("class",t.attr("class")):n(">a",u).append(t.clone())};u.click(function(){r.sender.click()});r.sender.bind("click",function(){e()});i._onGroupsChanged()}}),n(">.d-grid-header th",this.widget()).draggable({revert:"invalid",revertDuration:200,cancel:".d-state-added",opacity:.8,connectToSortable:n(">.d-grid-group thead>tr",this.widget()),helper:function(t){return n("<div/>").addClass("d-state-active ui-corner-all").data("field",n(t.currentTarget).data("field")).appendTo("body").append(n("<span/>").text(n(t.currentTarget).text()).css({display:"inline-block"})).prepend(n("<span/>").addClass("d-groupable-helper d-icon-plus-4").css({display:"inline-block"})).css({padding:"5px 10px",width:n(t.currentTarget).width()-50+"px"})}})):(n(">.d-grid-group",this.widget()).hide(),n(">.d-grid-header th",this.widget()).draggable("destory")),this},_onGroupsChanged:function(){var t=n(">.d-grid-group th:not(.d-empty-helper)",this.widget()),i=[];return t.length?(t.each(function(t,r){i.push(n(r).data("field"))}),this.groups(i)):this.groups()},_onFilterChanged:function(){var i=n(">.d-grid-filter th",this.widget()),t=[];return i.each(function(i,r){filterEl=n(r);filterEl.attr("data-operator")!=undefined&&t.push({field:filterEl.attr("data-field"),operator:filterEl.attr("data-operator"),val:filterEl.attr("data-val")})}),t.length>0?this.filter(t):this.filter()},_exec:function(n,t){return this._grid().content.body(!0).empty(),this._source.taoDataSource(n,t)},sort:function(t){return this._exec("sort",t?n.isArray(t)?t:[t]:undefined)},filter:function(t){return this._exec("filter",t?n.isArray(t)?t:[t]:undefined)},groups:function(t){return this._exec("group",t?n.isArray(t)?t:[t]:undefined)},widget:function(){return this._widget}})}(jQuery),function(n){n.widget("dna.taoDataSourceInfo",{options:{datasource:null,dataBind:null,tmpl:null},_create:function(){var e=this,i=this.options,f=this.element,o=this.widgetEventPrefix,r=null,u,t;this._unobtrusive();r=i.tmpl&&i.tmpl.length?i.tmpl:n("<span>Page ${index} of ${pages} Total ${records} records found<\/span>");u=!1;t=i.datasource;t&&t.length&&t.bind("taoDataSourcechanged",function(n,i){var o={records:t.taoDataSource("total"),pages:t.taoDataSource("totalPages"),index:t.taoDataSource("option","pageIndex")};u?f.empty().append(r.tmpl(o)):(f.append(r.tmpl(o)),u=!0);e._triggerEvent("databind",{info:o,data:i.data})})},_unobtrusive:function(){var n=this.element,t=this.options;return n.data("source")&&(t.datasource=n.datajQuery("source")),this},_triggerEvent:function(n,t){this.element.trigger(this.widgetEventPrefix+n,t)},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoColorpicker",{options:{palette:"websafe",dropdown:null,altField:null,applyTo:null,change:null,color:null,inputholder:!0},_create:function(){var r=this,t=this.options,s=this.widgetEventPrefix,i=this.element,e=n("<div/>").addClass("d-reset d-ui-widget d-colorpicker"),u,f,o;return this._unobtrusive(),t.color&&i.val(t.color),u=i.val(),u&&u.startsWith("rgb")&&i.val(this._rgbToHex(u)),this._picker=e,r.isInitialized=!1,t.change&&i.bind(s+"change",t.change),f=n("<div/>").addClass("d-palette").appendTo(e).click(function(n){n.stopPropagation();n.preventDefault()}),t.palette=="websafe"?this._createWebSafePalette(f):this._far=n.farbtastic(n("<div/>").appendTo(f),function(n){r.isInitialized&&r._setChange(n)}),this.options.inputholder&&this._createHeader(f),t.dropdown&&(o=n(t.dropdown),o.length&&r._setDropdown(o)),i.hide(),i.after(e),t.color?this.setColor(t.color):i.val()&&this.setColor(i.val()),r.isInitialized=!0,i},_unobtrusive:function(n){var t=n?n:this.element,i=this.options;return t.data("palette")&&(i.palette=t.data("palette")),t.data("valueto")&&(i.altField=t.datajQuery("valueto")),t.data("applyto")&&(i.applyTo=t.datajQuery("applyto")),t.data("dropdown")&&(i.dropdown=t.datajQuery("dropdown")),t.data("color")&&(i.color=t.data("color")),t.data("change")&&(i.change=new Function("event","color",t.data("change"))),this},_setDropdown:function(t){var i=this;return t&&t.length?(t.bind("click",function(r){if(!i.widget().isVisible()){r.preventDefault();r.stopPropagation();n(".d-colorpicker:visible").stop().slideUp("fast");var u=t,f=function(){i.widget().stop().hide()};i.widget().parent().is("body")||i.widget().appendTo("body");i.widget().show().css({"z-index":n.topMostIndex()+1}).position({of:u,at:"left bottom",my:"left top"});n(document).one("click",function(){f()})}}),this.widget().css({position:"absolute","z-index":"3000"}).appendTo("body").hide(),this):(this.widget().parent().tagName.toLowerCase()=="body"&&this.element.after(this.widget()),this.widget().css({position:"relative"}).show(),this)},_setChange:function(n){this.setColor(n);this.isInitialized&&(this.element.trigger(this.widgetEventPrefix+"change",this.options.color),this.element.trigger("change"))},_createHeader:function(t){var r=this,i=n("<div/>").addClass("d-color-header d-inline").prependTo(t),u=n("<div/>").addClass("d-color-preview d-inline").appendTo(i);n("<input/>").attr("data-role","none").attr("data-width","55").addClass("d-color-input d-inline").appendTo(i).click(function(n){n.preventDefault();n.stopPropagation()}).bind("keyup",function(t){t.keyCode==13&&r._setChange(n(this).val())});n("<span/>").addClass("d-color-clear d-inline").appendTo(i).click(function(){r.clear()});i.taoUI()},_createWebSafePalette:function(t){for(var f=this,u=n("<div/>").addClass("d-palette").appendTo(t),r=this._getWebsafeColours(),i=0;i<r.length;i++)n("<div/>").css({"background-color":r[i]}).data("color",r[i]).appendTo(u).click(function(){f._setChange(n(this).data("color"))});u.addClass("websafe")},_rgbToHex:function(n){return n=n.replace(/rgb\(|\)/g,"").split(","),n[0]=parseInt(n[0],10).toString(16).toLowerCase(),n[1]=parseInt(n[1],10).toString(16).toLowerCase(),n[2]=parseInt(n[2],10).toString(16).toLowerCase(),n[0]=n[0].length==1?"0"+n[0]:n[0],n[1]=n[1].length==1?"0"+n[1]:n[1],n[2]=n[2].length==1?"0"+n[2]:n[2],"#"+n.join("")},_getWebsafeColours:function(){for(var i=[],t=["00","33","66","99","cc","ff"],n=0;n<216;n++)i.push("#"+t[Math.floor(n/36)]+t[Math.floor(n/6%6)]+t[n%6]);return i},_setOption:function(t,i){return t=="color"?(this.setColor(i),this):t=="dropdown"?(this._setDropdown(n(i)),this):n.Widget.prototype._setOption.call(this,t,i)},setColor:function(t){var i=this.options,r=t,o=n(".d-color-preview",this.widget()),u,f,e;r.indexOf("rgb")>-1&&(r=this._rgbToHex(t));this.isClear?(this.element.val("transparent"),i.color="transparent"):(this.element.val(r),i.color=r);this._far&&this._far.setColor(r);o.css("background-color",i.color);i.color&&i.color!="transparent"&&o.css("color",n.invertColor(i.color));n(".d-color-input",this._picker).length&&n(".d-color-input",this._picker).val(i.color);i.altField&&(u=n(i.altField),u.length&&(f=u[0].tagName.toLowerCase(),f=="input"||f=="select"||f=="textarea"?u.val(i.color):u.text(i.color)));i.applyTo&&(e=n.isFunction(i.applyTo)?i.applyTo():n(i.applyTo),e.length&&(e.css("background-color",i.color),i.color&&i.color!="transparent"&&e.css("color",n.invertColor(i.color))))},clear:function(){this.isClear=!0;this._setChange("transparent");this.isClear=!1},widget:function(){return this._picker},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},destroy:function(){this.element.unbind(this.widgetEventPrefix+"change");this._picker.remove();this.element.show();n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){NodeInfo=function(t){this.element=n(t)};NodeInfo.prototype={is:function(n){var t="is"+n[0].toUpperCase()+n.substr(1);return this[t]?this[t]():!1},hasClass:function(n){return this.element.hasClass(n)},isBold:function(){if(this.isIn("strong")||this.isIn("b"))return!0;var n=this.element.css("font-weight");return n=="bold"?!0:parseInt(n)&&parseInt(n)>400?!0:!1},isItalic:function(){return this.isIn("i")||this.hasStyle("font-style","italic")?!0:!1},isUnderline:function(){return this.isIn("u")||this.hasStyle("text-decoration","underline")?!0:!1},isOverline:function(){return this.hasStyle("text-decoration","overline")?!0:!1},isStrikeThrough:function(){return this.hasStyle("text-decoration","line-through")?!0:!1},isLink:function(){return this.isTag("A")||this.isIn("a")?!0:!1},isJustifyLeft:function(){return this.hasStyle("text-align","left")?!0:!1},isJustifyCenter:function(){return this.isIn("center")||this.hasStyle("text-align","center")?!0:!1},isJustifyRight:function(){return this.hasStyle("text-align","right")?!0:!1},isJustifyNone:function(){return!this.isJustifyCenter()&&!this.isJustifyLeft()&&!this.isJustifyRight()?!0:!1},isOrderList:function(){return this.isIn("ol")?!0:!1},isUnorderList:function(){return this.isIn("ul")?!0:!1},isSub:function(){return this.isIn("sub")?!0:!1},isSup:function(){return this.isIn("sup")?!0:!1},getFontFarmily:function(){return this.element.css("font-family")?this.element.css("font-family"):"inherit"},getForeColor:function(){return this.element.css("color")?this.element.css("color"):"inherit"},getBackgroundColor:function(){return this.element.css("background-color")?this.element.css("background-color"):"inherit"},getFontSize:function(){return this.element.css("font-size")?this.element.css("font-size"):"inherit"},isTag:function(n){return this.getTagName()==n?!0:!1},isIn:function(n){return this.element[0].tagName.toLowerCase()==n?!0:this.element.closest(n).length?!0:!1},hasStyle:function(n,t){return this.element.css(n)?this.element.css(n).toString().toLocaleLowerCase().indexOf(t)>-1:!1},getTagName:function(){return this.element[0].tagName}};n.widget("dna.taoEditor",{options:{showcode:!0,width:"auto",height:300,select:null,normalized:null,autoEncode:!1,toolbar:null,resizable:!0,htmlText:"Design",codeText:"Html",editing:null,toolpanes:[[{title:"Bold","tooltip-position":"top",icon:"d-icon-bold",role:"checkbox",command:"setBold"},{title:"Italic","tooltip-position":"top",icon:"d-icon-italic",role:"checkbox",command:"setItalic"},{title:"Underline","tooltip-position":"top",icon:"d-icon-underline",role:"checkbox",command:"setUnderline"},{title:"Strike through","tooltip-position":"top",icon:"d-icon-strikethrough",role:"checkbox",command:"setStrikeThrough"},{text:"-"},{title:"Fore color","tooltip-position":"top",html:"<input data-role='picker' type='color' style='width:60px' data-icon='d-icon-font-2'/>"},{title:"Background color","tooltip-position":"top",html:"<input data-role='picker' type='color' style='width:60px' data-icon='d-icon-paint-format'/>"}],[{title:"Justify left","tooltip-position":"top",icon:"d-icon-align-left",command:"setJustifyLeft",role:"radio",group:"justify"},{title:"Justify center","tooltip-position":"top",icon:"d-icon-align-center",command:"setJustifyCenter",role:"radio",group:"justify"},{title:"Justify right","tooltip-position":"top",icon:"d-icon-align-right",command:"setJustifyRight",role:"radio",group:"justify"},{title:"Justify full","tooltip-position":"top",icon:"d-icon-align-justify",command:"setJustifyFull",role:"radio",group:"justify"},{text:"-"},{title:"Indent","tooltip-position":"top",icon:"d-icon-indent-right",command:"setIndent"},{title:"Outdent","tooltip-position":"top",icon:"d-icon-indent-left",command:"setOutdent"},{title:"Ordered list","tooltip-position":"top",icon:"d-icon-list-ol",command:"insertOrderedList"},{title:"Unordered list","tooltip-position":"top",icon:"d-icon-list-ul",command:"insertUnorderedList"}]]},_create:function(){var i=this,t=this.options,l=this.widgetEventPrefix,r=this.element,u=n("<div/>").addClass("d-reset d-ui-widget d-rte"),h=n("<div/>").addClass("d-rte-panes").appendTo(u),f=n("<div/>").addClass("d-ui-widget-content d-rte-editor").appendTo(u),e,c,s;if(this.wrapper=u,this._unobtrusive(),t.toolbar){if(e=n(t.toolbar),e.length){e.appendTo(h);this.tools=e;n("li[data-cmd]",e).on("click",function(t){var e;t.preventDefault();var r=n(this).data("cmd"),u=n(this).data("cmd-param"),f=null;if(u)try{e=new Function(u);f=e()}catch(o){console.log(o)}r&&i[r]&&i[r](f)})}}else n.each(t.toolpanes,function(t,r){n("<ul/>").appendTo(h).taoMenu({type:"toolbar",itemClick:function(t,r){var u=n(r.item).data("command");i[u]&&i[u]()},datasource:r})});r.before(u);t.editorStyle&&r.attr("style",t.editorStyle);r.attr("rows")?(c=parseInt(r.attr("rows")),f.height(c*24+"px")):t.height&&f.height(t.height);t.width!="auto"&&t.width>0&&f.width(t.width);this.height=f.innerHeight();this.width=f.innerWidth();var a=n("<div/>").addClass("d-rte-tabs").appendTo(u),o=n("<div/>").attr("contenteditable",!0).addClass("d-rte-editor-html"),v=this.addWorkspace("html",o,t.htmlText,function(){i.enableToolbars();o.html(r.val()).focus()}),y=this.addWorkspace("text",r,t.codeText,function(){var n=o.html();r.val(n).focus();i.disableToolbars()});o.on("mouseup",function(r){if(t.editing=r.target,n(this).text()){var u=i.getSelectionRange();window.getSelection&&(n(this).data("range-start",u.startOffset),n(this).data("range-end",u.endOffset))}}).on("click",function(){i._parseElement()}).on("keypress",function(){i._parseElement()});if(r.attr("placeholder")&&o.attr("data-placeholder",r.attr("placeholder")),t.showcode||a.hide(),t.resizable&&u.resizable({alsoResize:f,handles:"n,s",resize:function(){i.resizeWorkspaces()}}),s=r.closest("form"),s.length)s.on("submit",function(){if(i.curMode=="html"){var u=i.getEditor().html();t.autoEncode?n.browser.msie?r.val(i.htmlEncode(u)):r.text(i.htmlEncode(u)):n.browser.msie?r.val(u):r.text(u)}});this.setWorkspace("html");r.parent().isVisible()||window.setTimeout(function(){i.setWorkspace(i.curMode)},500);t.select&&r.bind(l+"select",t.select)},getSelectionRange:function(){var n;if(window.getSelection){if(n=window.getSelection(),n.rangeCount)return n.getRangeAt(0)}else if(document.selection)return document.selection.createRange();return null},_unobtrusive:function(){var n=this.element,t=this.options;n.data("encoded")!=undefined&&(t.autoEncode=n.dataBool("encoded"));n.data("toolbar")&&(t.toolbar=n.datajQuery("toolbar"));n.data("showcode")!=undefined&&(t.showcode=n.dataBool("showcode"));n.data("text-html")&&(t.htmlText=n.data("text-html"));n.data("text-code")&&(t.codeText=n.data("text-code"));n.data("height")!=undefined&&(t.height=n.data("height"));n.data("width")!=undefined&&(t.width=n.data("width"));n.data("select")&&(t.select=new Function("event","ui",n.data("select")))},_parseElement:function(){var r=null,f,c,o,t,s,h,u,e,i;if(window.getSelection?(f=window.getSelection().getRangeAt(0),f.startContainer&&(f.startContainer.localName?r=new NodeInfo(f.startContainer):f.startContainer.parentNode&&(r=new NodeInfo(f.startContainer.parentNode)))):document.selection&&(c=document.selection.createRange(),c.parentElement&&(r=new NodeInfo(c.parentElement))),r){if(this.tools){var l=["bold","italic","underline","overline","strikeThrough"],a=["justifyLeft","justifyCenter","justifyRight","justifyFull"],v=["insertOrderedList","insertUnorderedList"];for(o=0;o<l.length;o++)u=l[o],t=n("[data-cmd="+u+"]",this.tools),t.length&&(i=r.is(u),t.attr("data-checked",i).isActive(i));for(s=0;s<a.length;s++)if(u=a[s],t=n("[data-cmd="+u+"]",this.tools),t.length&&(e=t.attr("data-group"),e&&(i=r.is(u),i))){t.siblings("[data-group="+e+"]").attr("checked",!1).isActive(!1);t.attr("data-checked",i).isActive(i);break}for(h=0;h<v.length;h++)if(u=v[h],t=n("[data-cmd="+u+"]",this.tools),t.length&&(e=t.attr("data-group"),e&&(i=r.is(u),i))){t.siblings("[data-group="+e+"]").attr("checked",!1).isActive(!1);t.attr("data-checked",i).isActive(i);break}}this._triggerEvent("select",{element:r.element,info:r})}},resizeWorkspaces:function(){var r=n(".d-rte-editor",this.wrapper);this.height=r.height();this.width=r.width();var u=this,t=n(".d-rte-toolbar-overlay",this.wrapper),i=n(".d-rte-panes",this.wrapper),f=n(".workspace",this.wrapper).each(function(t,i){var r=u.height,f=u.width;r&&n(i).children().height(r);f&&n(i).children().css("width","inherit");n(i).children("textarea").width(f)});t.length&&(t.height(i.height()),i.width()&&t.width(i.width()))},addWorkspace:function(t,i,r,u){var e=this,f=n("<div/>").addClass("workspace "+t).appendTo(n(".d-rte-editor",this.wrapper)),o;return f.append(i),n.isFunction(u)&&f.bind("ws_active",u),this.height&&i.height(this.height),i.css("width","inherit"),o=n("<span/>").addClass("d-ui-widget d-rte-tab-"+t).appendTo(n(".d-rte-tabs",this.wrapper)).click(function(){n(this).isActive()||e.setWorkspace(t)}).text(r),f},setWorkspace:function(t){var r=this,u=this.options,f=this.element,i=n(".workspace."+t,this.wrapper);n(".workspace",this.wrapper).isActive(!1);i.isActive(!0);n(".d-rte-tabs .d-state-active",this.wrapper).isActive(!1);n(".d-rte-tab-"+t,this.wrapper).isActive(!0);this.curMode=t;i.trigger("ws_active");r.resizeWorkspaces()},mode:function(n){this.setWorkspace(n)},enableToolbars:function(){var t=n(".d-rte-toolbar-overlay",this.wrapper);t.length&&t.remove()},disableToolbars:function(){var t=n(".d-rte-panes",this.wrapper),i=n("<div/>").addClass("d-rte-toolbar-overlay").appendTo(t);i.height(t.height()).width(t.width())},getEditor:function(){return n(".d-rte-editor-html",this.wrapper)},bold:function(){this.runCmd("Bold")},italic:function(){this.runCmd("Italic")},underline:function(){this.runCmd("Underline")},strikeThrough:function(){this.runCmd("StrikeThrough")},justifyLeft:function(){this.runCmd("JustifyLeft")},justifyCenter:function(){this.runCmd("JustifyCenter")},justifyRight:function(){this.runCmd("JustifyRight")},justifyFull:function(){this.runCmd("Justifyfull")},fontName:function(n){this.runCmd("fontName",n)},fontSize:function(n){this.runCmd("fontSize",n)},insertOrderedList:function(){this.runCmd("InsertOrderedList")},insertUnorderedList:function(){this.runCmd("InsertUnorderedList")},indent:function(){this.runCmd("Indent")},outdent:function(){this.runCmd("Outdent")},setUppercase:function(){var t=this.options.editing;t&&(n(t).hasClass("d-rte-editor-html")||n(t).css("text-transform","uppercase"))},setLowercase:function(){var t=this.options.editing;t&&(n(t).hasClass("d-rte-editor-html")||n(t).css("text-transform","lowercase"))},foreColor:function(n){this.runCmd("forecolor",n)},setBackgroundColor:function(n){this.runCmd("hilitecolor",n)},superscript:function(n){this.runCmd("Superscript",n)},subscript:function(n){this.runCmd("Subscript",n)},insertHorizontalRule:function(){this.runCmd("InsertHorizontalRule")},insertParagraph:function(n){this.runCmd("InsertParagraph",n)},insertDate:function(){this.runCmd("insertHTML","<span>"+(new Date).toDateString()+"<\/span>")},insertTime:function(){this.runCmd("insertHTML","<span>"+(new Date).toLocaleTimeString()+"<\/span>")},insertLink:function(n){n||(n=window.prompt("Please supply url address"));n&&document.execCommand("CreateLink",!0,n)},unlink:function(){this.runCmd("Unlink")},insertBlock:function(t){var f=window.getSelection().toString(),u=t.replace(/\{0\}/,f),r,i;window.getSelection?(i=window.getSelection(),i.rangeCount&&(r=i.getRangeAt(0),r.deleteContents(),r.insertNode(n(u)[0]))):document.selection&&(i=document.selection.createRange(),i.pasteHTML(u))},formatBlock:function(n){this.runCmd("FormatBlock",n)},removeFormat:function(){this.runCmd("RemoveFormat")},copy:function(){this.runCmd("Copy")},cut:function(){this.runCmd("Cut")},paste:function(){this.runCmd("Paste")},print:function(){this.runCmd("Print")},runCmd:function(n,t){this.execCmd(n,t)},execCmd:function(n,t){t=="removeFormat"&&(n=t,t=null);try{document.execCommand(n,!1,t)}catch(i){alert(i)}},isDesignModeSupported:function(){return document.designMode&&document.execCommand?!0:!1},isGecko:function(){return navigator.userAgent.indexOf("Gecko")!=-1?!0:!1},isIE:function(){return n.browser.msie},isHtmlEncode:function(n){return n.search(/&amp;/g)!=-1||n.search(/&lt;/g)!=-1||n.search(/&gt;/g)!=-1?!0:!1},htmlEncode:function(n){return n?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},htmlDecode:function(n){return this.isHtmlEncode(n)?n.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):n},insertLink:function(n,t){n&&n!="http://"&&(this.curSelection?this.runCmd("insertHTML",'<a href="'+n+'" target="'+t+'">'+this.curSelection.text):this.runCmd("createLink",n))},formatBlock:function(n){this.runCmd("FormatBlock",n)},insertHtml:function(n){this.getEditor().focus();this.runCmd("insertHTML",n)},insertVideo:function(t,i){this.getEditor().focus();var r=n("<div/>"),u=n("<video/>").attr("controls","controls").appendTo(r).attr("autoplay","autoplay").attr("preload","auto"),f=n("<source/>").attr("src",t).attr("type",i).appendTo(u);this.runCmd("insertHTML",r.html())},insertImage:function(n,t){this.getEditor().focus();n&&n!="http://"&&this.insertBlock('<div class="d-shadow-around" style="float:left;padding:5px;margin:10px;background:#fff;"><img src="'+n+'" alt="'+(t?t:"")+'" /><\/div>')},_setOption:function(t,i){if(t=="height"){var r=n(".d-rte-panes",this.wrapper),u=n(".d-rte-editor",this.wrapper),f=n(".d-rte-tabs",this.wrapper);u.height(i-(r.outerHeight(!0)+f.outerHeight(!0)));this.options.height=i;this.resizeWorkspaces()}return n.Widget.prototype._setOption.call(this,t,i)},_triggerEvent:function(n,t){this.element.trigger(this.widgetEventPrefix+n,t)},destroy:function(){n.Widget.prototype.destroy.call(this)},widget:function(){return this.wrapper}})}(jQuery),function(n){n.widget("dna.taoDropdown",n.dna.taoDataBindable,{options:{width:"auto",height:"auto",iconClass:" d-icon-caret-down",iconImg:null,value:null,text:null,placeholder:null,show:{effect:"slide",options:{direction:"up",opacity:1},duration:200},hide:{effect:"slide",options:{direction:"up",opacity:0},duration:200},target:null,open:null,close:null,change:null,inputable:!0,dropdownEvent:"click",from:"bottom",fixed:!1},_create:function(){var f=this,t=this.options,i=this.element,s=this.widgetEventPrefix,r,u,e,h,c,o;return this._unobtrusive(),i.wrap("<div/>"),r=this.wrapper=i.parent(),r.addClass("d-reset d-ui-widget d-picker"),u=(t.inputable?n("<input/>"):n("<div />")).addClass("d-content-text").appendTo(r),i.attr("style")!=undefined&&(r.attr("style",i.attr("style")).show(),t.inputable&&u.width(r.width()-25)),u.addClass("d-ui-widget-content"),i.attr("disabled")=="disabled"&&i.parent().isDisable(!0),i.addClass("d-content-val").hide(),n.isFunction(t.open)&&i.bind(s+"open",t.open),n.isFunction(t.change)&&i.bind(s+"change",t.change),n.isFunction(t.close)&&i.bind(s+"close",t.close),e=n("<div />").addClass("d-drop-button").appendTo(r),r[0].close=function(){f.close()},t.iconImg?e.width(20).height(u.outerHeight(!0)).css({background:"url("+t.iconImg+") center center"}):t.iconClass&&e.addClass(t.iconClass),e.bind(t.dropdownEvent?t.dropdownEvent:"click",function(u){(u.stopPropagation(),u.preventDefault(),i.parent().isDisable())||(f.animationWrapper?f.animationWrapper.isVisible()?f.close():f.open():t.inputable&&n(">.d-content-text",r).focus())}),r.hover(function(){r.isActive()||r.isHover(!0)},function(){r.isHover(!1)}),h=function(){r.isDisable()||r.hasClass("d-state-readonly")||(f.animationWrapper?(t.inputable&&t.autoOpen||t.inputable==!1)&&f.open():(r.isHover(!1),r.isActive(!0)))},t.inputable?u.bind("focus",function(){h()}).bind("blur",function(){r.hasClass("d-state-readonly")||r.isActive(!1)}).bind("keyup",function(){i[0].tagName!="SELECT"&&f._setVal(n(this).val())}).bind("change",function(){var i=t.value,r=t.text;f._setVal(n(this).val());f._onInputChanged(i,n(this).val());f._triggerEvent("change",{originalValue:i,originalText:r,value:n(this).val(),text:n(this).val()})}).click(function(n){n.stopPropagation();n.preventDefault()}):u.bind("click",function(n){n.preventDefault();n.stopPropagation();h()}).disableSelection(),t.target&&(c=n(t.target),c.length&&(o=f.animationWrapper=n("<div class='d-ui-widget d-drop-container'/>").appendTo(t.fixed?i.parent():"body"),(t.height||t.width)&&(t.height&&t.height!="auto"&&o.css({"max-height":t.height+"px","overflow-y":"auto"}),t.width&&t.width!="auto"&&o.css({width:t.width+17+"px","overflow-x":"auto"})),o.append(c).hide())),t.bindingTo&&this._setBindingSource(t.bindingTo),t.value!=undefined?i.val(t.value):i.val()&&(t.value=i.val()),t.inputable?(t.text!=undefined&&t.text!=null?u.val(t.text):t.value!=undefined&&t.value!=null&&(t.text=t.value,u.val(t.text)),t.placeholder?u.attr("placeholder",t.placeholder):i.attr("placeholder")&&u.attr("placeholder",i.attr("placeholder"))):t.text!=undefined&&t.text!=null?u.text(t.text):(t.value!=undefined&&t.value!=null&&(t.text=t.value,u.text(t.text)),u.text()==""&&t.placeholder&&u.text(t.placeholder)),i},_unobtrusive:function(){var t=this.element,i=this.options;return t.data("width")&&(i.width=t.dataInt("width")),t.data("height")&&(i.height=t.dataInt("height")),t.data("target")&&(i.target=t.datajQuery("target")),t.data("icon")&&(i.iconClass=t.data("icon")),t.data("placeholder")&&(i.placeholder=t.data("placeholder")),t.attr("placeholder")&&(i.placeholder=t.attr("placeholder")),t.data("img")&&(i.iconImg=t.data("img")),t.data("onopen")&&(i.open=new Function("event","ui",t.data("onopen"))),t.data("onclose")&&(i.close=new Function("event","ui",t.data("onclose"))),t.data("change")&&(i.change=new Function("event","ui",t.data("change"))),t.data("dropdown-event")&&(i.dropdownEvent=t.data("dropdown-event")),t.data("text")!=undefined&&(i.text=t.data("text")),t.data("value")!=undefined&&(i.value=t.data("value")),t.val()&&(i.value=t.val()),t.data("fixed")!=undefined&&(i.fixed=t.dataBool("fixed")),t.data("show-effect")&&(i.show.effect=t.data("show-effect"),i.show.effect=="clip"&&(i.show.options={direction:"vertical"})),t.data("show-speed")&&(i.show.duration=t.dataInt("show-speed")),t.data("hide-effect")&&(i.hide.effect=t.data("hide-effect"),i.hide.effect=="clip"&&(i.hide.options={direction:"vertical"})),t.data("hide-speed")&&(i.hide.duration=t.dataInt("hide-speed")),t.data("input")!=undefined&&(i.inputable=t.dataBool("input")),t.data("from")&&(i.from=t.data("from")),n.dna.taoDataBindable.prototype._unobtrusive.call(this)},_play:function(t,i){var u=this.animationWrapper,r=n.Deferred(function(){u.css("zIndex",n.topMostIndex()+1).stop(!1,!0)[t](i.effect,i.options,i.duration,function(){r&&r.resolve()})});return r},_setVal:function(n){return this.options.value=n?n:"",this.element.val(n?n:""),this.element},_setText:function(n){var t=this._textElement(),i=this.options;return n?i.inputable?(this.options.value=n,t.val(n)):(n.jquery?t.html(n.clone().html()):t.text(n),this.options.text=t.text()):(i.inputable?(t.val(""),i.placeholder&&t.attr("placeholder",i.placeholder)):t.text(i.placeholder),this.options.value=""),this.element},_textElement:function(){return n(">.d-content-text",this.wrapper)},_onBindingPosition:function(n){this.options.mode!="new"&&(this.dataItem=n.dataItem,this.text(n.value),this.val(n.value))},_onStateChanged:function(n,t){return(t=="inserted"||t=="removed"||t=="add")&&(this._setText(""),this._setVal("")),this},_setOption:function(t,i){return t=="text"&&this._setText(i),t=="value"&&this._setVal(i),n.Widget.prototype._setOption.call(this,t,i)},_onInputChanged:function(){},value:function(n,t,i){var r=this.options.value,u=this.options.text;return this._setVal(n),t?this._setText(t):this._setText(n),i&&r!=n&&u!=t&&this._triggerEvent("change",{originalValue:r,originalText:u,value:n,text:t}),this.element},clear:function(){this._setVal("");this._setText("")},disable:function(){return this.widget().isDisable(!0),this._textElement().attr("disabled",!0),this},enable:function(){return this.widget().isDisable(!1),this._textElement().attr("disabled",!1),this},open:function(){var e=this,t=this.options,f=this.widget(),i=this.animationWrapper,r,u;if(n(".d-picker.d-state-active").each(function(t,i){n.isFunction(i.close)&&i.close()}),i&&!i.isVisible()){f.isActive(!0);t.width&&i.css({width:t.width+"px"});t.height&&i.css({height:t.height+(n.isNumeric(t.height)?"px":"")});r="left bottom";u="left top";t.from=="top"&&(r="left top");t.from=="middle"&&(r="left middle",u="left middle");var o=n(document).scrollLeft(),s=n(document).scrollTop(),h=o+"px "+s+"px";i.css({"min-width":f.innerWidth(),"z-index":n.topMostIndex()+1,opacity:0,display:"block"}).position({of:this.wrapper,at:r,my:u}).hide();i.css("opacity",1).show(t.show.effect,t.show.options,t.show.duration,function(){e._triggerEvent("open")})}return this.element},close:function(){var t=this,n=this.options;return this.animationWrapper&&(this.animationWrapper.isVisible()&&this.widget().isActive(!1),this.animationWrapper.stop(!1,!0).hide(n.hide.effect,n.hide.options,n.hide.duration,function(){t._triggerEvent("close")})),this.element},widget:function(){return this.wrapper},destroy:function(){this.widget().after(this.element);this.animationWrapper&&this.animationWrapper.length&&this.animationWrapper.remove();this.widget().remove();this.element.show().removeClass("d-content-val");n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoEditable",{options:{placeholder:null,toolbar:null,select:null},_create:function(){var t=this,f=this.options,i=this.element,o=this.widgetEventPrefix;this._unobtrusive();i.attr("contenteditable","true");var r=null,e=function(){u();r=window.setTimeout(function(){t.tools&&t.tools.fadeOut();r=null},5e3)},u=function(){r&&(window.clearTimeout(r),r=null)};return this.orgVal=n.trim(i.html()),this.ischanged=!1,this._createToolbars(),i.bind("click",function(i){i.stopPropagation();t._parseElement();n(this).focus()}).bind("dblclick",function(n){n.stopPropagation()}).bind("keypress",function(r){var u,f;t.tools.isVisible()||t.tools.fadeIn();t._parseElement();u=r.charCode;(u==undefined||u==0)&&(u=r.keyCode);f=[8,9,16,17,18,19,20,33,34,35,36,37,38,39,40,41,42,43];n.inArray(u,f)==-1&&t.orgVal!=n.trim(i.html())&&i.trigger("change")}).bind("focus",function(){t.tools.css({top:"0px",left:"0px"}).fadeIn();u()}).bind("blur",function(){e();t.orgVal!=i.html()&&i.trigger("change")}),t.tools&&t.tools.bind("mouseover",function(){u()}).bind("mouseleave",function(){e()}),f.select&&i.bind(o+"select",f.select),n("body").bind("click",function(){t.tools&&t.tools.isVisible()&&t.tools.fadeOut()}),i},_trackChanges:function(){},_parseElement:function(){var r=null,f,c,o,t,s,h,u,e,i;if(window.getSelection?(f=window.getSelection().getRangeAt(0),f.startContainer&&(f.startContainer.localName?r=new NodeInfo(f.startContainer):f.startContainer.parentNode&&(r=new NodeInfo(f.startContainer.parentNode)))):document.selection&&(c=document.selection.createRange(),c.parentElement&&(r=new NodeInfo(c.parentElement))),r){if(this.tools){var l=["bold","italic","underline","overline","strikeThrough"],a=["justifyLeft","justifyCenter","justifyRight","justifyFull"],v=["insertOrderedList","insertUnorderedList"];for(o=0;o<l.length;o++)u=l[o],t=n("[data-cmd="+u+"]",this.tools),t.length&&(i=r.is(u),t.attr("data-checked",i).isActive(i));for(s=0;s<a.length;s++)if(u=a[s],t=n("[data-cmd="+u+"]",this.tools),t.length&&(e=t.attr("data-group"),e&&(i=r.is(u),i))){t.siblings("[data-group="+e+"]").attr("checked",!1).isActive(!1);t.attr("data-checked",i).isActive(i);break}for(h=0;h<v.length;h++)if(u=v[h],t=n("[data-cmd="+u+"]",this.tools),t.length&&(e=t.attr("data-group"),e&&(i=r.is(u),i))){t.siblings("[data-group="+e+"]").attr("checked",!1).isActive(!1);t.attr("data-checked",i).isActive(i);break}}this._triggerEvent("select",{element:r.element,info:r})}},_createToolbars:function(){var t=this,u=this.options,f=this.element,i,r;if(u.toolbar){if(i=n(u.toolbar),i.length){this.tools=i;this.internalTools=!1;this.tools.appendTo("body").bind("click",function(n){n.stopPropagation()});n("li[data-cmd]",i).on("click",function(i){var e;i.preventDefault();var r=n(this).data("cmd"),u=n(this).data("cmd-param"),f=null;if(u)try{e=new Function(u);f=e()}catch(o){console.log(o)}r&&t[r]&&t[r](f)})}}else r=n("<div/>").addClass("d-ui-widget d-rte-panes").css({position:"fixed",padding:"5px",width:"100%"}).appendTo("body").bind("click",function(n){n.stopPropagation()}),n.each([[{title:"Bold","tooltip-position":"top",icon:"d-icon-bold",role:"checkbox",cmd:"bold"},{title:"Italic","tooltip-position":"top",icon:"d-icon-italic",role:"checkbox",cmd:"italic"},{title:"Underline","tooltip-position":"top",icon:"d-icon-underline",role:"checkbox",cmd:"underline"},{title:"Strike through","tooltip-position":"top",icon:"d-icon-strikethrough",role:"checkbox",cmd:"strikeThrough"},{text:"-"},{title:"Fore color","tooltip-position":"top",html:"<input data-role='picker' type='color' style='width:80px' data-icon='d-icon-font-2'/>"},{title:"Background color","tooltip-position":"top",html:"<input data-role='picker' type='color' style='width:80px' data-icon='d-icon-paint-format'/>"}],[{title:"Justify left","tooltip-position":"top",icon:"d-icon-align-left",cmd:"justifyLeft",role:"radio",group:"justify"},{title:"Justify center","tooltip-position":"top",icon:"d-icon-align-center",cmd:"justifyCenter",role:"radio",group:"justify"},{title:"Justify right","tooltip-position":"top",icon:"d-icon-align-right",cmd:"justifyRight",role:"radio",group:"justify"},{title:"Justify full","tooltip-position":"top",icon:"d-icon-align-justify",cmd:"justifyFull",role:"radio",group:"justify"},{text:"-"},{title:"Indent","tooltip-position":"top",icon:"d-icon-indent-right",cmd:"indent"},{title:"Outdent","tooltip-position":"top",icon:"d-icon-indent-left",cmd:"outdent"},{title:"Ordered list","tooltip-position":"top",icon:"d-icon-list-ol",cmd:"insertOrderedList",role:"radio",group:"ordered"},{title:"Unordered list","tooltip-position":"top",icon:"d-icon-list-ul",cmd:"insertUnorderedList",role:"radio",group:"ordered"}]],function(i,u){n("<ul/>").addClass("d-inline").appendTo(r).taoMenu({type:"toolbar",itemClick:function(i,r){var u=n(r.item).data("cmd");t[u]&&t[u]()},datasource:u})}),this.tools=r,this.internalTools=!0;return this.tools&&this.tools.length&&this.tools.hide(),f},_unobtrusive:function(){var n=this.element,t=this.options;n.attr("placeholder")&&(t.placeholder=n.attr("placeholder"));n.data("placeholder")&&(t.placeholder=n.data("placeholder"));n.data("toolbar")&&(t.toolbar=n.datajQuery("toolbar"));n.data("select")&&(t.select=new Function("event","ui",n.data("select")))},discard:function(){var n=this.element;n.html(this.orgVal);this.ischanged=!1},bold:function(){this.runCmd("Bold")},italic:function(){this.runCmd("Italic")},underline:function(){this.runCmd("Underline")},strikeThrough:function(){this.runCmd("StrikeThrough")},justifyLeft:function(){this.runCmd("JustifyLeft")},justifyCenter:function(){this.runCmd("JustifyCenter")},justifyRight:function(){this.runCmd("JustifyRight")},justifyFull:function(){this.runCmd("Justifyfull")},fontName:function(n){this.runCmd("fontName",n)},fontSize:function(n){this.runCmd("fontSize",n)},insertOrderedList:function(){this.runCmd("InsertOrderedList")},insertUnorderedList:function(){this.runCmd("InsertUnorderedList")},indent:function(){this.runCmd("Indent")},outdent:function(){this.runCmd("Outdent")},setUppercase:function(){var t=this.options.editing;t&&(n(t).hasClass("d-rte-editor-html")||n(t).css("text-transform","uppercase"))},setLowercase:function(){var t=this.options.editing;t&&(n(t).hasClass("d-rte-editor-html")||n(t).css("text-transform","lowercase"))},foreColor:function(n){this.runCmd("forecolor",n)},setBackgroundColor:function(n){this.runCmd("hilitecolor",n)},superscript:function(n){this.runCmd("Superscript",n)},subscript:function(n){this.runCmd("Subscript",n)},insertHorizontalRule:function(){this.runCmd("InsertHorizontalRule")},insertParagraph:function(n){this.runCmd("InsertParagraph",n)},insertDate:function(){this.runCmd("insertHTML","<span>"+(new Date).toDateString()+"<\/span>")},insertTime:function(){this.runCmd("insertHTML","<span>"+(new Date).toLocaleTimeString()+"<\/span>")},insertLink:function(n){n||(n=window.prompt("Please supply url address"));n&&document.execCommand("CreateLink",!0,n)},unlink:function(){this.runCmd("Unlink")},insertBlock:function(t){var u=window.getSelection().toString(),r=t.replace(/\{0\}/,u),i;window.getSelection?(i=window.getSelection().getRangeAt(0),i.deleteContents(),i.insertNode(n(r)[0])):document.selection&&(i=document.selection.createRange(),i.pasteHTML(r))},formatBlock:function(n){this.runCmd("FormatBlock",n)},removeFormat:function(){this.runCmd("RemoveFormat")},copy:function(){this.runCmd("Copy")},cut:function(){this.runCmd("Cut")},paste:function(){this.runCmd("Paste")},print:function(){this.runCmd("Print")},runCmd:function(n,t){this.execCmd(n,t)},execCmd:function(n,t){t=="removeFormat"&&(n=t,t=null);try{document.execCommand(n,!1,t)}catch(i){alert(i)}},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},destroy:function(){this.element.attr("contenteditable",!1).removeClass("d-editable");this.tools&&(this.internalTools?this.tools.remove():(this.element.after(this.tools),n("li[data-cmd]",this.tools).off("click")));n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoDatepicker",n.dna.taoDropdown,{options:{iconClass:"d-icon-calendar",showAnim:"slideDown",showOptions:{direction:"up"},changeMonth:!0,changeYear:!0},_create:function(){var u=this,r=this.options,f=this.widgetEventPrefix,t=this.element,i;n.dna.taoDropdown.prototype._create.call(this);i=this._textElement();r.altField=t;r.onSelect=function(){u.value(t.val()?t.val():i.val(),i.val(),!0)};i.datepicker(r).attr("readonly","readonly");t.val()&&i.datepicker("setDate",t.val())},_unobtrusive:function(){var t=this.element,i=this.options;return t.data("append-text")&&(i.appendText=t.data("append-text")),t.data("change-month")!=undefined&&(i.changeMonth=t.data("change-month")),t.data("change-year")&&(i.changeYear=t.data("change-year")),t.data("current-text")&&(i.currentText=t.data("current-text")),t.data("format")&&(i.dateFormat=t.data("format")),t.data("days")&&(i.dayNames=t.data("days").split(",")),t.data("min-days")&&(i.dayNamesMin=t.data("min-days").split(",")),t.data("default")&&(i.defaultDate=t.data("default")),t.data("dur")&&(i.duration=t.data("dur")),t.data("firstday")!=undefined&&(i.firstDay=t.data("firstday")),t.data("goto-current")!=undefined&&(i.gotoCurrent=t.data("goto-current")),t.data("hide-no-prev-next")!=undefined&&(i.hideIfNoPrevNext=t.data("hide-no-prev-next")),t.data("rtl")!=undefined&&(i.isRTL=t.data("rtl")),t.data("max")!=undefined&&(i.maxDate=t.data("max")),t.data("min")!=undefined&&(i.minDate=t.data("min")),t.data("select-other-months")!=undefined&&(i.selectOtherMonths=t.data("select-other-months")),t.data("short- year-cutoff")!=undefined&&(i.shortYearCutoff=t.data("short- year-cutoff")),t.data("months")&&(i.monthNames=t.data("months").split(",")),t.data("short-months")&&(i.monthNamesShort=t.data("short-months").split(",")),t.data("nav-as-dateformat")!=undefined&&(i.navigationAsDateFormat=t.data("nav-as-dateformat")),t.data("buttonpanel")!=undefined&&(i.showButtonPanel=t.data("buttonpanel")),t.data("show-effect")&&(i.showAnim=t.data("show-effect")),t.data("show-at-pos")!=undefined&&(i.showCurrentAtPos=t.data("show-at-pos")),t.data("month-after-year")!=undefined&&(i.showMonthAfterYear=t.data("month-after-year")),t.data("next-text")&&(i.nextText=t.data("next-text")),t.data("prev-text")&&(i.prevText=t.data("prev-text")),t.data("month-num")&&(i.numberOfMonths=t.data("month-num")),t.data("weeks")!=undefined&&(i.showWeek=t.data("weeks")),t.data("week-header")&&(i.weekHeader=t.data("week-header")),n.dna.taoDropdown.prototype._unobtrusive.call(this)}});n.widget("dna.taoColorDropdown",n.dna.taoDropdown,{options:{iconClass:null},_create:function(){var r=this,i=this.options,t=this.element;return this._unobtrusive(),t.bind("taoColorpickerchange",function(t,i){n.dna.taoDropdown.prototype.value.call(r,i,i,!0);r._setButtonColor(i)}),t.taoColorpicker(i),this.options.target=t.next(),n.dna.taoDropdown.prototype._create.call(this),n(".d-drop-button",this.widget()).addClass("d-color-drop-button"),i.value&&this._setButtonColor(i.value),t},value:function(t){return this.element.taoColorpicker("option","color",t),this._setButtonColor(t),n.dna.taoDropdown.prototype.value.call(this,t)},_setOption:function(t,i){return t=="color"&&this.value(i),n.dna.taoDropdown.prototype._setOption.call(this,t,i)},_setButtonColor:function(t){var i=n(".d-drop-button",this.widget()).css("background-color",t);t=="transparent"?i.addClass("transparent"):(i.removeClass("transparent"),i.css("color",n.invertColor(t)))},_onInputChanged:function(n,t){this.element.taoColorpicker("option","color",t);this._setButtonColor(t)}});n.widget("dna.taoComboBox",n.dna.taoDropdown,{options:{index:-1,autoOpen:!1,filter:"none",dropStyle:"dropdown",selectionType:"text"},_unobtrusive:function(t){var i=t?t:this.element,r=this.options,u;return i.data("index")!=undefined&&(r.index=i.dataInt("index")),i.data("openby")&&(r.dropdownEvent=i.data("openby")),i.data("filter")&&(r.filter=i.data("filter")),i.data("selection-type")&&(r.selectionType=i.data("selection-type")),i.data("autoopen")!=undefined&&(r.autoOpen=i.dataBool("autoopen")),i.data("drop-style")&&(u=i.data("drop-style"),u=="menu"&&i.data("show-effect","clip").data("hide-effect","clip").data("hide-speed",100).data("from","middle").data("input",!1),u=="dropdownlist"&&i.data("input",!1)),n.dna.taoDropdown.prototype._unobtrusive.call(this),n.dna.taoListbox.prototype._unobtrusive.call(this),this},_onBindingPosition:function(n){this.options.mode!="new"&&(this.clear(),this.element.taoListbox("option","value",n.value),this.value(n.value,n.value,!0))},_create:function(){var r=this,i=this.options,e=this.widgetEventPrefix,t=this.element,u,f;this.options.target=t;n.dna.taoDropdown.prototype._create.call(this);t.bind("taoListboxselect",function(t,u){i.index=u.index;i.selectionType=="text"?n.dna.taoDropdown.prototype.value.call(r,u.value,u.text,!0):n.dna.taoDropdown.prototype.value.call(r,u.value,u.item,!0);r.close()}).bind("taoListboxitemclick",function(){r.close()});t.taoListbox(i);t.taoListbox("widget").removeAttr("style");u=t.taoListbox("getValHolder");this.wrapper.append(u);f=t.taoListbox("widget");f.show().removeClass("d-content-val");i.value&&this._setText(t.taoListbox("selectedText"));this._setFilter(i.filter)},value:function(t,i,r){return t!=undefined?(this.element.taoListbox("select",t),this):n.dna.taoDropdown.prototype.value.call(this,t,i,r)},_onInputChanged:function(n,t){this.element.taoListbox("find",t)||this.element.taoListbox("getValueHolder").val(t)},_setFilter:function(t){var i=this,e=this.options,u=this.wrapper,f=n(">.d-content-text",u),r;t=="none"||(r=i.element.taoListbox("datasource"),r&&n(r).data("private")&&(t=="server"?(r.taoDataSource("option","serverFiltering",!0),r.bind("taoDataSourcechanged",function(){i.animationWrapper.isVisible()&&f.focus()})):r.taoDataSource("option","serverFiltering",!1)),f.bind("keyup",function(){var f,e;!u.isDisable()&&i.animationWrapper.isVisible()&&(t=="server"?r&&(i.element.taoListbox("option","highlightfirst",!1),i.element.taoListbox("option","insertMode","replace"),r.taoDataSource("filter",i.element.taoListbox("option","dataTextField")+'*="'+n(this).val()+'"')):n(this).val()==""?n(">ul>li",i.animationWrapper).show():(f=n(this).val(),f?(e=n(">ul>li",i.animationWrapper),e.each(function(t,i){var r=n(i),u=r.text().toLowerCase();u.toLowerCase().indexOf(f)>-1?r.show():r.hide()})):n(">ul>li",i.animationWrapper).show()))}));this.options.filter=t},open:function(){var f=this.element,r=this.options,u=this,t,i;return n(".d-picker.d-state-active>[data-role='combobox']").taoComboBox("close"),n(".d-picker.d-state-active>.d-content-val").taoDropdown("close"),r.autoBind==!1&&(t=this.element.taoListbox("datasource"),t&&(i=t.taoDataSource("_remoteReadable"),i&&t.taoDataSource("read").done(function(){n.dna.taoDropdown.prototype.open.call(u)}))),n.dna.taoDropdown.prototype.open.call(this)},clear:function(){n.dna.taoDropdown.prototype.clear.call(this);this.element.taoListbox("clearSelection")},find:function(n){return this.element.taoListbox("find",n)},addItem:function(t){return n.type(t)=="string"?this.element.taoListbox("addItem",{label:t,value:t}):this.element.taoListbox("addItem",t)}});n.widget("dna.taoTimepicker",n.dna.taoComboBox,{options:{iconClass:"d-icon-clock",interval:30,"24hours":!0},_create:function(){var h=this,r=this.options,c=this.widgetEventPrefix,u=this.element,o=[],l=u.val(),t,i,f,e,s;for(u.data("24hours")!=undefined&&(r["24hours"]=u.dataBool("24hours")),u.data("interval")&&(r.interval=u.dataInt("interval")),t=0;t<24;t++)for(i=0;i<60;)r["24hours"]?(f=(t<10?"0"+t:t)+":"+(i<10?"0"+i:i),o.push({label:f,value:f})):(e=t<12?t:t-12,s=f=(e<10?"0"+e:e)+":"+(i<10?"0"+i:i),s+=t<12?" am":" pm",o.push({label:s,value:f})),i+=r.interval;r.height=120;r.datasource=o;n.dna.taoComboBox.prototype._create.call(this)}})}(jQuery),function(n){n.widget("dna.taoTooltip",{options:{open:null,close:null,position:{at:"center top",my:"center bottom",offset:"0 -10",collision:"flip"},delay:300,show:null,hide:null,url:null,tooltipClass:null,width:250,content:null,autoClose:!0},_create:function(){var t=this,u=this.widgetEventPrefix,n=this.element,i,r;this._unobtrusive();this.options.open&&n.bind(u+"open",this.options.open);this.options.close&&n.bind(u+"close",this.options.close);i=function(){n.isDisable()||(t.options.delay?t._lazyOpen():t.open(n))};r=function(){n.isDisable()||(t.holder?t.holder.isVisible()?t.options.autoClose?t._lazyClose(n):t.close():t._clearTimeout():t._clearTimeout())};n.isInput()?n.bind("focus",i).bind("blur",r):n.bind("mouseenter",i).bind("mouseleave",r);n.attr("title")&&n.data("title",n.attr("title")).removeAttr("title")},_unobtrusive:function(){var n=this.element,t=this.options,i;return n.data("tooltip-class")!=undefined&&(t.tooltipClass=n.data("tooltip-class")),n.data("tooltip-delay")!=undefined&&(t.delay=n.data("tooltip-delay")),n.data("tooltip-url")&&(t.url=n.data("tooltip-url")),n.data("tooltip-width")&&(t.width=n.dataInt("tooltip-width")),n.data("tooltip-content")&&(t.content=n.datajQuery("tooltip-content")),n.data("tooltip-open")&&(t.open=new Function("event","ui",n.data("tooltip-open"))),n.data("tooltip-close")&&(t.close=new Function("event","ui",n.data("tooltip-close"))),n.data("tooltip-position")&&(i=n.data("tooltip-position"),i=="right"&&(t.position={my:"left center",at:"right center",offset:"10 0"}),i=="left"&&(t.position={at:"left center",my:"right center",offset:"-10 0"}),i=="bottom"&&(t.position={at:"center bottom",my:"center top",offset:"0 10"})),this},_triggerEvent:function(n,t){this.element.trigger(this.widgetEventPrefix+n,t)},_lazyClose:function(){var t=this,n=this.element;this._clearTimeout(n);n.data("timer",setTimeout(function(){t.close(n)},300))},_lazyOpen:function(){var r=this,n=this.element,t="timer",i=function(){n.data(t)&&(clearTimeout(n.data(t)),n.removeData(t))};i();n.data(t,setTimeout(function(){r.open();i()},this.options.delay))},_delegate:function(n,t){return function(){return t.apply(n,[this])}},_clearTimeout:function(){this.element.data("timer")!=undefined&&(clearTimeout(this.element.data("timer")),this.element.removeData("timer"))},_setOption:function(t,i){return t=="content"?(this.options.content=i,this._setContent(i),this):t=="position"?(this.options.position=i,this._setPosition(i),this):n.Widget.prototype._setOption.call(this,t,i)},_setContent:function(t){var i=null,f=this,o=this.element,u=this.options,s=u.position,r=f.holder,e;f.holder&&(n.isFunction(t)?(e=n.proxy(t,o),i=e(),i&&(r.empty(),n.type(i)=="string"?r.html(i):r.append(i))):(i=n(t),i.length?r.empty().append(i):r.empty().html(t)));u.width>0&&holder.css("max-width",u.width+"px")},_setPointer:function(){var n=this.options;this._clearPointer();n.position.my=="center bottom"&&this.holder.addClass("d-pos-bottom");n.position.my=="center top"&&this.holder.addClass("d-pos-top");n.position.my=="right center"&&this.holder.addClass("d-pos-right");n.position.my=="left center"&&this.holder.addClass("d-pos-left")},_clearPointer:function(){this.holder&&this.holder.removeClass("d-post-top").removeClass("d-post-left").removeClass("d-post-right").removeClass("d-post-bottom")},_setPosition:function(t){var r=this.options,i=t?t:r.position;this.holder&&this.holder.isVisible()&&(i.of||(i.of=this.element),this.holder.css({zIndex:n.topMostIndex()+1}),i&&this.holder.position(i))},open:function(){var t=this,u=this.element,i=this.options,f=i.url,r,e;return f||u.data("tooltip-url")!=undefined&&(f=i.url=u.data("tooltip-url")),(u.data("title")!=undefined||f||i.content)&&(t._clearTimeout(),t.holder==undefined&&(t.holder=n("<div/>").addClass(" d-ui-widget d-ui-widget-content d-tooltip").css({opacity:"0"}).hide().prependTo("body").hover(function(){t._clearTimeout()},function(){t._lazyClose()}),t._setPointer(),i.tooltipClass&&t.holder.addClass(i.tooltipClass),i.width>0&&t.holder.css("max-width",i.width+"px")),r=t.holder,r.is(":visible")||(e=function(){if(i.content){r.children().length==0&&(t._setContent(i.content),r.show(),t._setPosition());n(document).one("click",function(){t.close()})}else u.data("title")!=undefined?(r.html(u.data("title")).show(),t._setPosition()):f&&!r.data("hasContent")&&(r.empty().append(n("<div/>").height(16).addClass("d-loading")).css({height:"auto",opacity:"1"}).show(),t._setPosition(),t._clearPointer(),r.load(f,function(){t._setPointer();r.css({height:"auto",opacity:"1"}).data("hasContent",!0).show().taoUI();t._setPosition()}));n.browser.msie?t.holder.css({opacity:"1"}).show():t.holder.animate({opacity:"1"});t._triggerEvent("open",{tooltip:t.holder,element:t.element})},n.browser.msie?e():i.show?r.stop().show(i.show.effect,i.show.options?i.show.options:{},i.show.duration,function(){e()}):r.stop().fadeIn("fast",function(){e()}))),this},close:function(){var t=this,i=this.options,r;return t.holder&&(r=n(t.holder),r.isVisible()&&(i.hide?r.stop().hide(i.hide.effect,i.hide.options?i.hide.options:{},i.hide.duration,function(){t._triggerEvent("close")}):r.stop().fadeOut("fast",function(){t._triggerEvent("close",{tooltip:t.holder,element:t.element})}))),this},widget:function(){return this.holder?this.holder:this.element},destroy:function(){this._clearTimeout();this.holder&&this.holder.remove();this.element.data("title")!=undefined&&(this.element.attr("title",this.element.data("title")),this.element.data("title",null));n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoUploader",{options:{url:"",data:null,refresh:300,connectTo:null,fieldName:"userfile",autoblocking:!1,fileName:null,multi:!0,fileInput:null,start:null,beforeUpload:null,complete:null,progress:null,speedUpdated:null,uploaded:null,dragover:null,dragleave:null,maxSize:1,maxCount:20,error:null,async:!0},_create:function(){var u=this,i=this.options,r=this.widgetEventPrefix,t=this.element,e;if(this._unobtrusive(),i.complete&&t.bind(r+"complete",i.complete),i.beforeUpload&&t.bind(r+"beforeUpload",i.beforeUpload),i.uploaded&&t.bind(r+"uploaded",i.uploaded),i.progress&&t.bind(r+"progress",i.progress),i.error&&t.bind(r+"error",i.error),i.start&&t.bind(r+"start",i.start),i.dragover&&t.bind(r+"dragover",i.dragover),i.dragleave&&t.bind(r+"dragleave",i.dragleave),i.speedUpdated&&t.bind(r+"speedUpdated",i.speedUpdated),t.get(0).addEventListener("dragover",n.proxy(u._onDragOver,u),!1),t.get(0).addEventListener("dragleave",n.proxy(u._onDragLeave,u),!1),t.get(0).addEventListener("drop",n.proxy(u._onDrag,u),!1),i.fileInput&&i.fileInput.bind("change",n.proxy(this._onDrag,this)),this._setFileInput(i.fileInput),t.get(0).tagName.toLowerCase()=="input"&&(e=t.attr("type"),e&&e=="file")){i.multi=!1;i.fileInput=t;t.wrap("<div class='d-file'><\/div>");var s=t.parent(),f=n("<div class='d-input'/>").appendTo(s),o=n("<div/>").appendTo(s);t.attr("style")&&(f.attr("style",t.attr("style")),t.removeAttr("style"));o.text("BROWSE");o.taoButton();f.text(t.val());t.appendTo(o).bind("change",function(){f.text(n(this).val())}).bind("change",n.proxy(this._onDrag,this));t.attr("size",1);u._setFileInput(t);f.click(function(){t.click()})}},_unobtrusive:function(){var n=this.element,t=this.options;n.data("url")&&(t.url=n.data("url"));n.data("refresh")&&(t.refresh=n.dataInt("refresh"));n.data("name")&&(t.fieldName=n.data("name"));n.data("multi")!=undefined&&(t.multi=n.dataBool("multi"));n.data("async")!=undefined&&(t.async=n.dataBool("async"));n.data("autoblocking")!=undefined&&(t.autoblocking=n.dataBool("autoblocking"));n.data("filename")&&(t.fileName=n.data("filename"));n.data("max")&&(t.maxSize=n.dataInt("max"));n.data("max-count")&&(t.maxCount=n.dataInt("max-count"));n.data("onbeforeupload")&&(t.beforeUpload=new Function("event","files",n.data("onbeforeupload")));n.data("oncomplete")&&(t.complete=new Function("event","count",n.data("oncomplete")));n.data("onuploaded")&&(t.uploaded=new Function("event","data","xhr",n.data("onuploaded")));n.data("onprogress")&&(t.progress=new Function("event","data",n.data("onprogress")));n.data("onrefresh")&&(t.speedUpdated=new Function("event","data",n.data("onrefresh")));n.data("onstart")&&(t.start=new Function("event","data",n.data("onstart")));n.data("onerror")&&(t.error=new Function("event","error",n.data("onerror")));n.data("files")&&(t.fileInput=n.datajQuery("files"));n.data("connect")&&(t.connectTo=n.datajQuery("connect"))},_setFileInput:function(t){return t&&(t.bind("change",n.proxy(this._upload,this)),this.options.fileInput=t),this},_onDragLeave:function(){this._triggerEvent("dragleave")},_onDragOver:function(n){n.stopPropagation();n.preventDefault();n.dataTransfer.dropEffect="copy";this._triggerEvent("dragover")},_getBuilder:function(t,i,r){var s="--",e=this.options,f="\r\n",u="",o,h;if(e.data)for(o in e.data)h=n.isFunction(e.data[o])?e.data[o]():e.data[o],u+=s,u+=r,u+=f,u+='Content-Disposition: form-data; name="'+o+'"',u+=f,u+=f,u+=h,u+=f;return u+=s,u+=r,u+=f,u+='Content-Disposition: form-data; name="'+e.fieldName+'"',u+='; filename="'+t+'"',u+=f,u+="Content-Type: application/octet-stream",u+=f,u+=f,u+=i,u+=f,u+=s,u+=r,u+=s,u+f},_progress:function(t){var i=this.context.widget,r=this.context.options,u,f,e,o,s;t.lengthComputable&&(u=Math.round(t.loaded*100/t.total),this.currentProgress!=u&&(this.currentProgress=u,r.connectTo&&n(r.connectTo).taoUploadInfo("setInfo",{index:this.index,count:i.uploadCount,progress:this.currentProgress}),i._triggerEvent("progress",{index:this.index,file:this.file,progress:this.currentProgress}),f=(new Date).getTime(),e=f-this.currentStart,e>=r.refresh&&(o=t.loaded-this.startData,s=o/e,i._triggerEvent("speedUpdated",{index:this.index,file:this.file,speed:s}),this.startData=t.loaded,this.currentStart=f)))},_onDrag:function(t){var o=this,r=this.options,e=this.element,u,i,f;if((t.stopPropagation(),t.preventDefault(),e.isDisable())||!r.url||(u=t.dataTransfer,i=null,_maxSize=r.maxSize*1048576,u?i=u.files:t.target.files&&(i=t.target.files),i==null))return this;if(i.length>r.maxCount){n.err("Você pode fazer upload de "+r.maxCount+" arquivos por vez.");return}if(f=n.Event(this.widgetEventPrefix+"beforeUpload"),this.element.trigger(f,{files:i}),f.result!=!1)return this.uploadCount=i.length,r.connectTo?n(r.connectTo).taoUploadInfo("setInfo",{index:0,count:i.length}):this.block(),this.upload(i),this},upload:function(t){var i=this,u=this.options,h="------multipartformboundary"+(new Date).getTime(),f={index:-1,files:[],current:function(){return this.files[this.index]}},o,s,r,e;if(_next=function(){if(f.index++,f.index<f.files.length){var n=new FileReader;n.index=f.index;n.onloadend=_send;n.readAsBinaryString(f.current())}},_send=function(r){var f=new XMLHttpRequest,e=f.upload,s=t[r.target.index],c=r.target.index,a=(new Date).getTime(),l=s.name,v;u.fileName&&(u.multi?n.isFunction(u.fileName)&&(l=u.fileName(c,s)):l=u.fileName);v=i._getBuilder(encodeURIComponent(l),r.target.result,h);e.index=c;e.file=s;e.downloadStartTime=a;e.currentStart=a;e.currentProgress=0;e.startData=0;e.context={widget:i,element:i.element,options:u};e.addEventListener("progress",n.proxy(i._progress,e),!1);f.open("POST",u.url,!0);f.setRequestHeader("content-type","multipart/form-data; boundary="+h);i._triggerEvent("start",{index:c,file:s,count:t.length});f.onload=function(){if(f.status>=400){i.unBlock();i._triggerEvent("error",{file:s,error:f.statusText});return}var r=f.responseText;if(r&&f.responseType=="json"&&r&&(r=n.parseJSON(r),r.error)){i.unBlock();i._triggerEvent("error",{file:s,error:r.error});return}i._triggerEvent("uploaded",{index:c,file:s,result:r,xhr:f});c==t.length-o-1&&(i.unBlock(),i._triggerEvent("complete",t.length));u.async||_next()};f.onerror=function(n){i.unBlock();i._triggerEvent("error",{file:s,error:n})};f.sendAsBinary(v)},o=0,u.async)for(r=0;r<t.length;r++){if(!u.multi&&r>0)break;if(e=t[r],_maxSize>0&&e.size>_maxSize){i._triggerEvent("error",{file:e,error:'The file "'+e.name+'" size must less then '+_maxSize/1048576+"M. This file will be skipped."});o++;continue}s=new FileReader;s.index=r;s.onloadend=_send;s.readAsBinaryString(t[r])}else{for(f.files=[],f.index=-1,r=0;r<t.length;r++){if(!u.multi&&r>0)break;if(e=t[r],_maxSize>0&&e.size>_maxSize){i._triggerEvent("error",{file:e,error:'The file "'+e.name+'" size must less then '+_maxSize/1048576+"M. This file will be skipped."});o++;continue}f.files.push(e)}f.files.length&&_next()}o==t.length&&(i.unBlock(),i._triggerEvent("complete",t.length))},block:function(){if(this.options.autoblocking){var t=n("<div/>").appendTo("body").width(300).height(50);t.taoUploadInfo({uploader:this.element});this.element.blockUI(t)}return this},unBlock:function(){return this.options.autoblocking&&this.element.unblockUI(),this},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},_setOption:function(t,i){return t=="fileInput"?this._setFileInput(i):n.Widget.prototype._setOption.call(this,t,i)},destroy:function(){n.Widget.prototype.destroy.call(this)}});n.widget("dna.taoProgressbar",{options:{value:0,step:1,max:100,complete:null,change:null},_create:function(){var r=this,i=this.options,u=this.widgetEventPrefix,t=this.element;this._unobtrusive();t.addClass("d-ui-widget d-progress");t.attr("role","progressbar");this.progressbar=n("<div/>").appendTo(t).addClass("d-reset d-ui-widget-content d-state-active").css("padding","0px").height(t.height());this.val(i.value)},_unobtrusive:function(){var t=this.options,n=this.element;n.data("max")!=undefined&&(t.max=n.dataInt("max"));n.data("value")!=undefined&&(t.value=n.dataInt("value"));n.data("step")!=undefined&&(t.step=n.dataInt("step"));n.data("oncomplete")&&(t.complete=new Function("event",n.data("oncomplete")));n.data("onchange")&&(t.change=new Function("event","value",n.data("onchange")))},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},disable:function(){return this.widget().addClass("d-state-disable"),this},enable:function(){return this.widget().removeClass("d-state-disable"),this},getPercentage:function(){var n=this.options,t=n.step/n.max*100*n.value;return isNaN(t)?0:t},val:function(n){var i=this,t=this.options;if(n!=undefined)w=t.step/t.max*100*n,isNaN(w)&&(w=0),this.progressbar.css({width:w+"%"}),this.options.value=n,this._triggerEvent("change",n),n==100&&this._triggerEvent("complete");else return this.options.value},_setOption:function(t,i){return t=="value"&&this.options.value!=i?this.val(i):n.Widget.prototype._setOption.call(this,t,i)},destroy:function(){n.Widget.prototype.destroy.call(this)}});n.widget("dna.taoUploadInfo",{options:{uploader:null,uploadText:"Upload",layout:null},_create:function(){var c=this,t=this.options,v=this.widgetEventPrefix,l=this.element,o,s;this._unobtrusive();var e=n("<table/>").appendTo(l).css({width:"100%",margin:"5px"}),h=n("<tr/>").appendTo(e),i=n("<td/>").text(t.uploadText+" 0/0"),r=n("<td/>").text("0%"),u=n("<td/>"),a=n("<div/>").appendTo(u).taoProgressbar(),f=n.type(t.uploader)=="string"?n(t.uploader):t.uploader;t.layout=="inline"?h.append(i.css({"white-space":"nowrap"})).append(u.css({width:"80%"})).append(r):(i.css({width:"80%","text-indent":"5px","text-align":"left"}),r.css({width:"20%","text-align":"right","padding-right":"5px"}),h.append(i).append(r),u.attr("colspan",2),n("<tr/>").append(u).appendTo(e));this.wrapper=e;this.countLabel=i;this.progressLabel=r;this.progressbar=a;o=0;f&&f.length&&(s="taoUploader",f.bind(s+"start",function(n,t){o=t.count}),f.bind(s+"progress",function(n,t){c.setInfo({index:t.index,count:o,progress:t.progress})}))},setInfo:function(n){var t=this.options;n.count!=undefined&&n.index!=undefined&&this.countLabel.text(t.uploadText+" "+(n.index+1)+"/"+n.count);n.progress!=undefined&&(this.progressLabel.text(n.progress+"%"),this.progressbar.taoProgressbar("val",n.progress))},_unobtrusive:function(){var t=this.options,n=this.element;n.data("uploader")&&(t.uploader=n.datajQuery("uploader"))},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},widget:function(){return this.wrapper},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoAutoComplete",{options:{datasource:null,param:"q",valueField:"text",width:200,complete:null},_create:function(){var r=this,t=this.options,u=this.widgetEventPrefix,i=this.element;this._unobtrusive(i);t.complete&&i.bind(u+"complete",t.complete);i[0].tagName.toLowerCase()=="input"?(t.datasource&&this._setDataSource(t.datasource),i.keyup(function(u){var f;n.inArray(u.which,[45,35,36,33,34,17,16,18,13,20,32,91,93,188,27])>-1||(f=i.val(),f&&r._source&&(r._source.taoDataSource("option","serverFiltering")?f.filter({field:t.param,operator:"contains",val:f},f):r._source.taoDataSource("read")))})):console.log("AutoComplete widget must be apply to input element.")},_unobtrusive:function(t){var i=t?t:this.element,r=this.options;return n.dna.taoListview.prototype._unobtrusive.call(this,t),i.data("valuefield")&&(r.valueField=i.data("valuefield")),i.data("autocomplete-label")&&(r.valueField=i.data("autocomplete-label")),i.data("autocomplete-param")&&(r.param=i.data("autocomplete-param")),i.data("autocomplete")&&(r.datasource=i.data("autocomplete")),i.data("autocomplete-width")&&(r.width=i.dataInt("autocomplete-width")),i.data("autocomplete-select")&&(r.complete=new Function("event","ui",i.data("autocomplete-select"))),i.data("autocomplete-map")&&(this.map=new Function("data",i.data("autocomplete-map"))),i.data("autocomplete-convert")&&(this.convert=new Function("data",i.data("autocomplete-convert"))),this},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},_setDataSource:function(t){var i=this,e=this.options,r,u,f;if(t)if(n.isArray(t))i._createDataElements(t);else{if(r=function(t){var r=n("<div/>").attr("data-private",!0);i.element.after(r);r.hide();i._source=r;r.taoDataSource(t);i._privateDataSource=!0},n.isPlainObject(t))r(t);else if(n.type(t)=="string")u={},u[e.param]=function(){return i.element.val()},r({actions:{read:{url:t,data:u}}});else{if(!t.jquery)throw"The input object is not a valid datasource object";this._source=t}f="taoDataSource";this._source.bind(f+"changed",n.proxy(this._onResult,this))}return this},_setOption:function(t,i){return t=="datasource"?(this.options.datasource=i,this._setDataSource(i),this):n.Widget.prototype._setOption.call(this,t,i)},_onResult:function(t,i){var u=this,s=this.options,r,e,f,o;if(this._menu&&(this._menu.remove(),this._menu=null),i&&i.data){r=this.element;e=r;e.is("[data-role='textbox']")&&(e=r.parent());f=i.data;n.isFunction(this.map)&&(f=this.map(i.data));n.isFunction(this.convert)&&(o=[],n.each(f,function(n,t){var i=u.convert(t);o.push(i)}),f=o);this._menu=n("<ul/>").css({position:"absolute",top:"0px",left:"0px","z-index":n.topMostIndex(),width:r.width()+"px"}).appendTo("body").taoMenu({type:"vertical",datasource:f,itemClick:function(t,i){var e=n(i.item),f;e.data("dataItem")?(f=e.data("dataItem"),n.isPlainObject(f)?s.valueField&&r.val(f[s.valueField]):r.val(f)):r.val(e.text());u._menu.hide().remove();u._triggerEvent("complete",f)}}).position({of:e,at:"left bottom",my:"left top"});n(document).one("click",function(){u._menu&&(u._menu.remove(),u._menu=null)})}},destroy:function(){this._menu&&this._menu.remove();this._source&&this._source.remove();n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoContentSlider",{options:{buttons:!1,nav:!1,index:0,speed:300,autoplay:!1,interval:3e3,actived:null,itemWidth:0,draggable:!0},_create:function(){var t=this,i=this.options,h=this.widgetEventPrefix,r=this.element,f,e,u,o,s;this._unobtrusive();i.actived&&r.bind(h+"active",i.actived);f=r[0].tagName.toLowerCase()=="ul"?!0:!1;r.addClass("d-content-slider");e=n(f?"<li/>":"<div/>").appendTo(r).addClass("d-content-slider-viewport");u=n(f?"<ul/>":"<div/>").appendTo(e).addClass("d-content-slider-items");r.children(":not(.d-content-slider-viewport)").appendTo(u).addClass("d-content-slider-item");i.buttons&&(o=n("<a/>").attr("href","javascript:void(0);").click(function(n){n.stopPropagation();n.preventDefault();t.next()}).addClass("d-nav-prev").append(n("<span>").addClass("d-icon-arrow-left-2")).prependTo(r),s=n("<a/>").attr("href","javascript:void(0);").click(function(n){n.stopPropagation();n.preventDefault();t.prev()}).append(n("<span>").addClass("d-icon-untitled")).addClass("d-nav-next").appendTo(r),this.prevNav=o.addClass("d-tran-fast").css({"z-index":n.topMostIndex()}),this.nextNav=s.addClass("d-tran-fast").css({"z-index":n.topMostIndex()}));this.resize();i.draggable&&u.draggable({axis:"x",start:function(t,i){n(this).data("left",i.position.left)},stop:function(f,e){var s,l,o;if(e.position.left>0)return n(this).stop().animate({left:0});if(s=u.children(":last"),e.position.left<-s.position().left)return i.index==s.index()?n(this).stop().animate({left:-s.position().left}):t.go(s.index());var h=e.position.left,c=0,v=n(this).data("left")>h?"l":"r";for(n(this).data("left",null),l=n(".d-content-slider-item",r),o=0;o<l.length;o++){var a=l.eq(o),y=-a.position().left,p=-(a.position().left+a.width());if(v=="l")h<y&&(c=o+1);else if(h>p){c=o;break}}return t.go(c)}});i.nav&&this._createNavigator();u.on("mouseenter",function(){t.puse()}).on("mouseleave",function(){t.resume()});window.addEventListener("resize",function(){t.puse();t.resize();t.go(i.index);t.resume()},!1);i.autoplay&&this.play()},play:function(){var t=this;this.token==undefined&&(this.pused=!1,this.token=window.setInterval(function(){t.pused||(t.options.index<n(".d-content-slider-item",t.element).length-1?t.next():t.go(0))},this.options.interval))},puse:function(){this.token!=undefined&&(this.pused=!0)},resume:function(){this.token!=undefined&&(this.pused=!1)},stop:function(){this.token!=undefined&&(window.clearInterval(this.token),this.token=undefined,this.pused=null)},resize:function(){var t=this.element,i=this.options,f=n(".d-content-slider-viewport",t),r=n(".d-content-slider-items",t),u;h=t.height();w=t.width();itemCount=r.children().length;totalWidth=itemCount*w;f.height(h).width(w);u=n(".d-content-slider-item",t).eq(0).marginHeight();n(".d-content-slider-item",t).height(h-u).width(w);i.itemWidth&&n(".d-content-slider-item",t).width(i.itemWidth);r.width(totalWidth)},next:function(){return this.go(this.options.index+1)},prev:function(){return this.go(this.options.index-1)},go:function(t){var i=n(".d-content-slider-item",this.element).eq(t),r;return n(".d-content-slider-item",this.element).removeClass("d-state-active"),i.length?(r=i.position(),r.index=t,i.addClass("d-state-active"),this.options.index!=t&&(this.options.index=t,this._triggerEvent("active",{index:t})),n(".d-content-slider-items",this.element).stop(!0,!1).animate({left:-i.position().left},this.options.speed)):this.element},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},_createNavigator:function(){var r=this.element,o=this.widgetEventPrefix,s=this,u=this.options,f=n(".d-content-slider-item",r).length,t,i,e;if(f>1&&u.navigator!="none"&&u.navigator!=!1){for(t=n("<ul/>").addClass("d-page-navigator"),i=0;i<f;i++)e=n("<li/>").attr("data-index",i).appendTo(t).click(function(){n(this).isActive()||s.go(n(this).dataInt("index"))}),i==u.index&&e.isActive(!0);t.css({position:"inherit"});u.navigator=="top"?r.before(t):r.after(t);r.bind(o+"active",function(n,i){t.children().removeClass("d-state-active");t.children("[data-index="+i.index+"]").isActive(!0)});this.nav=t}},_unobtrusive:function(){var n=this.element,t=this.options;n.data("buttons")!=undefined&&(t.buttons=n.dataBool("buttons"));n.data("index")!=undefined&&(t.activeIndex=n.dataInt("index"));n.data("speed")!=undefined&&(t.speed=n.dataInt("speed"));n.data("autoplay")!=undefined&&(t.autoplay=n.dataBool("autoplay"));n.data("draggable")!=undefined&&(t.draggable=n.dataBool("draggable"));n.data("nav")!=undefined&&(t.nav=n.data("nav"));n.data("interval")!=undefined&&(t.interval=n.dataInt("interval"));n.data("active")&&(t.scroll=new Function("event","ui",n.data("active")));n.data("item-width")!=undefined&&(t.itemWidth=n.dataInt("item-width"))}})}(jQuery),function(n){n.widget("dna.taoRoller",{options:{direction:"left",active:null,autoplay:!1,speed:300,interval:3e3,nextOnClick:!0,navigator:!1,offset:0,buttons:!1,activeIndex:0},_create:function(){var r=this,i=this.options,u=this.widgetEventPrefix,t=this.element;if(this._unobtrusive(),i.active&&t.bind(u+"active",i.active),t.addClass("d-roller").addClass("d-roller-"+i.direction),t.height()==0&&t.height(350),t.children().length==1)return t.children().css({height:"inherit",width:"100%"}),t;t.children().length>=3&&(t.children().each(function(i,r){n(r).position({at:"right middle",my:"left middle",of:t,collision:"none"})}),this._left(t.children(":eq(0)")),this._center(t.children(":eq(1)")),this._right(t.children(":eq(2)")));t.children().length==2&&(this._left(t.children(":eq(1)")),this._center(t.children(":eq(0)")));i.nextOnClick&&t.children().click(function(i){i.preventDefault();t.children().length==2?r.next():t.children().index(this)==1?r.next():r.go(n(this).data("index"))});t.children().on("mouseenter",function(){r.pused=!0}).on("mouseleave",function(){r.pused=!1}).css({position:"absolute",height:"inherit",width:i.offset>0?(t.width()-2*i.offset-10)/t.width()*100+"%":"100%"}).each(function(t,i){n(i).attr("data-index",t)});window.addEventListener("resize",function(){t&&t.length&&t.children().css({height:"inherit",width:i.offset>0?(t.width()-2*i.offset-10)/t.width()*100+"%":"100%"})},!1);this._createNavigator();i.autoplay&&r.play();r.go(i.activeIndex)},_unobtrusive:function(n){var t=n?n:this.element,i=this.options,r,u;t.data("dir")&&(i.direction=t.data("dir"));t.data("offset")!=undefined&&(i.offset=t.dataInt("offset"));t.data("index")!=undefined&&(i.activeIndex=t.dataInt("index"));t.data("speed")!=undefined&&(i.speed=t.dataInt("speed"));t.data("autoplay")!=undefined&&(i.autoplay=t.dataBool("autoplay"));t.data("nav")!=undefined&&(i.navigator=t.data("nav"));t.data("interval")!=undefined&&(i.interval=t.dataInt("interval"));t.data("active")&&(i.scroll=new Function("event","ui",t.data("active")));t.data("next-onclick")!=undefined&&(i.nextOnClick=t.dataBool("next-onclick"));t.data("next")&&(r=t.datajQuery("next"),r.click(function(n){n.stopPropagation();n.preventDefault();self.next()}));t.data("prev")&&(u=t.datajQuery("prev"),u.click(function(n){n.stopPropagation();n.preventDefault();self.previous()}))},puse:function(){return this.pused=!0,this.element},resume:function(){return this.pused=!1,this.element},play:function(n){if(this._playing)return this.element;var t=this;if(this.element.isVisible())return n&&(this.options.interval=n),this._playing=window.setInterval(function(){t.pused||t.next()},this.options.interval?this.options.interval:3e3),this._playing=null,this.element},stop:function(){return this._playing&&(window.clearInterval(this._playing),this._playing=null),this.element},_animate:function(t){n(this).stop(!0,!1).animate(t)},_left:function(t){var r=this,i=this.options;t.position({my:i.direction=="left"?"right center":"center bottom",at:i.direction=="left"?"left center":"center top",offset:i.direction=="left"?this.options.offset+"px 0":"0 "+this.options.offset+"px",of:this.element,collision:"none",using:function(t){i.direction=="left"&&(t.top=0);n(this).stop(!0,!1).animate(t,i.speed)}})},_right:function(t){var r=this,i=this.options;return t.position({at:i.direction=="left"?"right center":"center bottom",my:i.direction=="left"?"left center":"center top",offset:i.direction=="left"?"-"+this.options.offset+"px 0":"0 -"+this.options.offset+"px",of:this.element,collision:"none",using:function(t){n(this).stop(!0,!1).animate(t,i.speed)}})},_center:function(t){var r=this,i=this.options;return t.position({my:"center center",at:"center center",of:this.element,using:function(t){n(this).stop(!0,!1).animate(t,i.speed)}})},_createNavigator:function(){var i=this.element,u=this.widgetEventPrefix,f=this,r=this.options,t;i.children().length>1&&r.navigator!="none"&&r.navigator!=!1&&(t=n("<ul/>").addClass("d-page-navigator"),i.children().each(function(i,u){var u=n("<li/>").attr("data-index",i).appendTo(t).click(function(){n(this).isActive()||f.go(i)});i==r.activeIndex&&u.isActive(!0)}),t.css({"z-index":n.topMostIndex()}),r.navigator=="top"?i.before(t):i.after(t),i.bind(u+"active",function(n,i){t.children().removeClass("d-state-active");t.children("[data-index="+i.index+"]").isActive(!0)}),this.nav=t)},go:function(n){var t=this.element,u=this.options,i=t.children("[data-index="+n+"]"),e,o,r,h,s,f;if(i.length){if(e=t.children("[data-index]").length,o=e==2?t.children(":eq(0)").data("index"):t.children(":eq(1)").data("index"),n==o)return;r=t.children("[data-index="+o+"]");e==2?(this._left(r),this._center(i),r.appendTo(t)):(h=t.children().index(i),s=h>1?!0:!1,s?this._left(r):this._right(r),this._center(i),s?(f=t.children().index(r),t.children(":lt("+f+")").position({at:u.direction=="left"?"right center":"center bottom",my:u.direction=="left"?"left center":"center top",of:t,collision:"none"}).appendTo(t),this._right(i.next())):(f=t.children().index(r),t.children(":gt("+f+")").position({my:u.direction=="left"?"right center":"center bottom",at:u.direction=="left"?"left center":"center top",of:t,collision:"none"}).prependTo(t),this._left(i.prev())));this.options.activeIndex=n;this._triggerEvent("active",{item:i,index:n})}return this.el},next:function(){var t=this.element,n=this.options,i=t.children().length;return i==2?this.go(n.activeIndex==0?1:0):n.activeIndex+1>=i?this.go(0):this.go(n.activeIndex+1),t},previous:function(){var i=this.element,n=this.options,t=i.children().length;return t==2?this.go(n.activeIndex==0?1:0):n.activeIndex-1<=0?this.go(t-1):this.go(n.activeIndex-1),this.element},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},disable:function(){return this.widget().addClass("d-state-disable"),this},enable:function(){return this.widget().removeClass("d-state-disable"),this},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoDropbox",{options:{imgSize:null,read:null,emptytext:""},_create:function(){var e=this,r=this.options,o=this.widgetEventPrefix,i=this.element,t,u,f,s,h;this._unobtrusive();t=n("<div/>").addClass("d-reset d-dropbox").appendTo("body");i.before(t);u=n("<span/>").text(r.emptytext).appendTo(t);f=n("<div/>").addClass("d-icon-cross-3").appendTo(t).click(function(){i.val("").trigger("change")});i.bind("change",function(){n(this).val()?(t.css("background-image","url("+n(this).val()+")"),u.hide(),f.show()):(t.css("background-image","none"),u.show(),f.hide())});r.read&&i.bind(o+"read",r.read);i.attr("style")&&t.attr("style",i.attr("style"));i.hide().appendTo(t);e.dropbox=t;t[0].addEventListener?(t[0].addEventListener("dragenter",function(n){n.stopPropagation();n.preventDefault()},!1),t[0].addEventListener("dragover",function(n){n.stopPropagation();n.preventDefault();t.isHover(!0)},!1),t[0].addEventListener("dragleave",function(n){n.stopPropagation();n.preventDefault();t.isHover(!1)},!1),t[0].addEventListener("drop",n.proxy(e._ondrop,e),!1)):u.remove();r.imgSize&&t.css({"background-size":r.imgSize});s=t.outerWidth(!0)-t.width();h=t.outerHeight(!0)-t.height();i.val()?(t.css({"background-image":"url("+i.val()+")","background-size":"contain"}),u.hide(),f.show()):f.hide()},_unobtrusive:function(){var i=this,t=this.options,n=this.element;n.data("img-size")&&(t.imgSize=n.data("img-size"));n.data("empty-text")&&(t.emptytext=n.data("empty-text"));n.data("read")&&(t.read=new Function("event","ui",n.data("read")))},_ondrop:function(){return;var t,n},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.taoPhotoViewer",{options:{src:null,items:null,itemAttr:"href",index:0,close:null,loadingText:"Carregando imagem...",closeText:"Fechar"},_create:function(){var t=this,i=this.options,e=this.widgetEventPrefix,o=this.element,u=[],r,f;if(this._unobtrusive(),i.items&&i.itemAttr&&(i.items.each(function(t,r){u.push(n(r).attr(i.itemAttr))}),this.photos=u),r=n("<div/>").css("zIndex",n.topMostIndex()).appendTo("body"),r.addClass("d-photo-viewer").disableSelection(),this.viewer=r,i.close&&o.bind(e+"close",i.close),n("<div/>").addClass("d-photo-viewer-header").appendTo(r).append(n("<a/>").attr("role","link").text("["+i.closeText+"]").click(function(){n(window).unbind("keyup");t.destroy();t._triggerEvent("close")})),f=n("<div/>").addClass("d-photo d-sidebar d-tran").appendTo(r),this._sidebar=f,f.hide(),this._container=n("<div/>").addClass("d-photo-container").attr("tabIndex",0).appendTo(r),this._setSize(),window.addEventListener("resize",n.proxy(t._setSize,t),!1),u.length){i.src&&(i.index=u.indexOf(i.src));this._loadPhoto(u[i.index]);this._container.on("mouseup",function(i){if(!t.isDagging&&i.button!=0){i.preventDefault();var r=i.clientX;r>n(this).width()/2?t.next():t.prev()}});n("<div/>").addClass("d-photo-nav-left d-tran").appendTo(r).append(n("<span/>").addClass(" d-icon-arrow-left-2")).click(function(){t.prev()});n("<div/>").addClass("d-photo-nav-right d-tran").appendTo(r).append(n("<span/>").addClass("d-icon-untitled")).click(function(){t.next()})}else i.src&&this._loadPhoto(i.src);this.proportion=1;this._container.on("mousewheel",function(n,i){t.proportion<.3&&i>0||t.proportion>4&&i<0||(t.proportion-=i/10,t._scale(t.proportion))}).on("dblclick",function(){var i=n(">img",this);i.length&&(t.proportion=1,t._scale(1),i.position({my:"center center",at:"center center",of:t._container}))}).bind("contextmenu",function(){return!1});n(window).bind("keyup",function(i){i.keyCode==27&&(n(window).unbind("keyup"),t.destroy(),t._triggerEvent("close"));u.length&&(console.log(i.keyCode),i.keyCode==37&&t.prev(),i.keyCode==39&&t.next())})},next:function(){var n=this.options;n.index++;n.index>=this.photos.length&&(n.index=0);this._loadPhoto(this.photos[n.index])},prev:function(){var n=this.options;n.index==0?n.index=this.photos.length-1:n.index--;this._loadPhoto(this.photos[n.index])},_loadPhoto:function(t){var i=this,u,r;this._container.empty();u=n("<div>").appendTo(this._container).text(this.options.loadingText).addClass("d-photo-loader");r=new Image;n(r).bind("load",function(){u.remove();n(this).appendTo(i._container).position({my:"center center",at:"center center",of:i._container}).animate({opacity:"1"},500).draggable({start:function(){i.isDagging=!0},stop:function(){i.isDagging=!1}});(n(this).width()>i._container.width()||n(this).height()>i._container.height())&&(i.proportion=.6,i._scale(i.proportion))}).css({"max-height":this._container.height()+"px","max-width":this._container.widget+"px"});r.src=t},_unobtrusive:function(){var n=this.element,t=this.options;n.data("items")&&(t.items=n.datajQuery("items"));n.data("src-attr")&&(t.itemAttr=n.data("src-attr"));n.attr("data-index")!=undefined&&(t.index=parseInt(n.attr("data-index")));n.data("src")&&(t.src=n.data("src"));n.data("loading-text")&&(t.loadingText=n.data("loading-text"));n.data("close-text")&&(t.closeText=n.data("close-text"))},_setSize:function(){var t,i;n("body").css("overflow","hidden");t=n(window).height()-50;i=n(window).width();this.viewer.height(n(window).height()).width(i);var f=n(".d-photo-tools",this.viewer),r=this._sidebar,u=this._container;r.isVisible()?(u.height(t).width(i-r.outerWidth(!0)-10).css({"line-height":t+"px"}),r.height(t),f.css({left:u.width()/2-f.width()/2+"px"})):(u.height(t).width(i-10).css({"line-height":t+"px"}),r.height(t))},_buildImg:function(t,i){var s=this,o=i.width/i.height,u=n(t).height(),e=n(t).width(),r,f;clientHeight=i.height;clientWidth=i.width;wrapper=n("<div/>").addClass("d-photo-wrapper").appendTo(t);r=n("<img/>").appendTo(wrapper);f=n("<img/>").appendTo(wrapper).hide();clientHeight>clientWidth?clientHeight>u&&(clientHeight=u,clientWidth=Math.round(clientHeight*o)):clientWidth>e&&(clientWidth=e,clientHeight=Math.round(e/o));clientHeight=clientHeight-10;clientWidth=clientWidth-10;r.width(clientWidth).height(clientHeight);f.width(clientWidth).height(clientHeight);wrapper.width(clientWidth).height(clientHeight).css({"margin-top":u/2-clientHeight/2+"px"});r.attr("src",i.url+"?w=300&h="+i.height+"&ratio=true&enlage=false");f.one("load",function(){f.show();r.animate({opacity:0},function(){r.hide()})}).bind("dblclick",function(){s._scale(1);wrapper.css({"margin-top":u/2-clientHeight/2+"px",top:"0px",left:"0px"})}).attr("src",i.url);wrapper.addClass("d-tran-fast")},_scale:function(t){var i=n(">img",this._container);i.css({transform:"scale("+t+")","-webkit-transform":"scale("+t+")","-o-transform":"scale("+t+")","-moz-transform":"scale("+t+")"})},_rotate:function(t){var i=n(">.d-photo-wrapper",this._container);this._scale(1);i.css({transform:"rotateZ("+t+"deg)","-webkit-transform":"rotateZ("+t+"deg)","-o-transform":"rotateZ("+t+"deg)","-moz-transform":"rotateZ("+t+"deg)"})},_buildHeader:function(t,i){return n("<h2/>").addClass("d-header2").appendTo(t).text(i)},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},destroy:function(){this.viewer.remove();n("body").css("overflow","auto");window.removeEventListener("resize",n.proxy(self._setSize,self),!1);n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){var r;n.browser||(r=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return t[2]||"0"},n.browser={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),android:navigator.userAgent.toLowerCase().indexOf("mozilla/5.0")>-1&&navigator.userAgent.toLowerCase().indexOf("android ")>-1&&navigator.userAgent.toLowerCase().indexOf("applewebkit")>-1,version:r(navigator.userAgent)});var u=window.orientation!=null,t=n.browser.opera||n.browser.mozilla&&parseFloat(n.browser.version.substr(0,3))<1.9?"input":"paste",i=function(t){t=n.event.fix(t||window.event);t.type="paste";var i=t.target;setTimeout(function(){n.event.dispatch.call(i,t)},1)};n.event.special.paste={setup:function(){this.addEventListener?this.addEventListener(t,i,!1):this.attachEvent&&this.attachEvent("on"+t,i)},teardown:function(){this.removeEventListener?this.removeEventListener(t,i,!1):this.detachEvent&&this.detachEvent("on"+t,i)}};n.extend({mask:{rules:{z:/[a-z]/,Z:/[A-Z]/,a:/[a-zA-Z]/,"*":/[0-9a-zA-Z]/,"@":/[0-9a-zA-ZçÇáàãâéèêíìóòôõúùü]/},keyRepresentation:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",27:"esc",33:"page up",34:"page down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",116:"f5",123:"f12",224:"command"},signals:{"+":"","-":"-"},options:{attr:"alt",mask:null,type:"fixed",maxLength:-1,defaultValue:"",signal:!1,textAlign:!0,selectCharsOnFocus:!0,autoTab:!1,setSize:!1,fixedChars:"[(),.:/ -]",onInvalid:function(){},onValid:function(){},onOverflow:function(){},onFocus:function(){},onBlur:function(){}},masks:{phone:{mask:"(99) 9999-9999"},phone8:{mask:"(99) 99999999"},"phone-us":{mask:"(999) 999-9999"},"phone-9":{mask:"(99) 99999-9999"},phone9:{mask:"(99) 999999999"},cpf:{mask:"999.999.999-99"},cnpj:{mask:"99.999.999/9999-99"},date:{mask:"39/19/9999"},"date-us":{mask:"19/39/9999"},cep:{mask:"99999-999"},time:{mask:"29:59"},cc:{mask:"9999 9999 9999 9999"},integer:{mask:"999.999.999.999",type:"reverse"},decimal:{mask:"99,999.999.999.999",type:"reverse",defaultValue:"000"},"decimal-us":{mask:"99.999,999,999,999",type:"reverse",defaultValue:"000"},"signed-decimal":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"},"signed-decimal-us":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"},"non-required-decimal":{mask:"99,999.999.999.999",type:"reverse",defaultValue:""}},init:function(){if(!this.hasInit){var r=this,t,i=this.keyRepresentation;for(this.ignore=!1,t=0;t<=9;t++)this.rules[t]=new RegExp("[0-"+t+"]");this.keyRep=i;this.ignoreKeys=[];n.each(i,function(n){r.ignoreKeys.push(parseInt(n,10))});this.hasInit=!0}},set:function(t,i){var r=this,f=n(t),u="maxLength";return i=i||{},this.init(),f.each(function(){var o;i.attr&&(r.options.attr=i.attr);var f=n(this),t=n.extend({},r.options),s=f.attr(t.attr),e="";if(e=typeof i=="string"?i:s!==""?s:null,e&&(t.mask=e),r.masks[e]&&(t=n.extend(t,r.masks[e])),typeof i=="object"&&i.constructor!=Array&&(t=n.extend(t,i)),n.metadata&&(t=n.extend(t,f.metadata())),t.mask!=null){t.mask+="";f.data("mask")&&r.unset(f);var h=t.defaultValue,c=t.type==="reverse",l=new RegExp(t.fixedChars,"g");t.maxLength===-1&&(t.maxLength=f.attr(u));t=n.extend({},t,{fixedCharsReg:new RegExp(t.fixedChars),fixedCharsRegG:l,maskArray:t.mask.split(""),maskNonFixedCharsArray:t.mask.replace(l,"").split("")});(t.type=="fixed"||c)&&t.setSize&&!f.attr("size")&&f.attr("size",t.mask.length);c&&t.textAlign&&f.css("text-align","right");(this.value!==""||h!=="")&&(o=r.string(this.value!==""?this.value:h,t),this.defaultValue=o,f.val(o));t.type=="infinite"&&(t.type="repeat");f.data("mask",t);f.removeAttr(u);f.bind("keydown.mask",{func:r._onKeyDown,thisObj:r},r._onMask).bind("keypress.mask",{func:r._onKeyPress,thisObj:r},r._onMask).bind("keyup.mask",{func:r._onKeyUp,thisObj:r},r._onMask).bind("paste.mask",{func:r._onPaste,thisObj:r},r._onMask).bind("drop.mask",{func:r._onPaste,thisObj:r},r._onMask).bind("focus.mask",r._onFocus).bind("blur.mask",r._onBlur).bind("change.mask",r._onChange)}})},unset:function(t){var i=n(t);return i.each(function(){var t=n(this),i;t.data("mask")&&(i=t.data("mask").maxLength,i!=-1&&t.attr("maxLength",i),t.unbind(".mask").removeData("mask"))})},string:function(t,i){var r,f,e,u;this.init();r={};typeof t!="string"&&(t=String(t));switch(typeof i){case"string":this.masks[i]?r=n.extend(r,this.masks[i]):r.mask=i;break;case"object":r=i}return r.fixedChars||(r.fixedChars=this.options.fixedChars),f=new RegExp(r.fixedChars),e=new RegExp(r.fixedChars,"g"),r.type==="reverse"&&r.defaultValue&&typeof this.signals[r.defaultValue.charAt(0)]!="undefined"&&(u=t.charAt(0),r.signal=typeof this.signals[u]!="undefined"?this.signals[u]:this.signals[r.defaultValue.charAt(0)],r.defaultValue=r.defaultValue.substring(1)),this.__maskArray(t.split(""),r.mask.replace(e,"").split(""),r.mask.split(""),r.type,r.maxLength,r.defaultValue,f,r.signal)},_onFocus:function(t){var r=n(this),i=r.data("mask");i.inputFocusValue=r.val();i.changed=!1;i.selectCharsOnFocus&&r.select();i.onFocus(this,t)},_onBlur:function(t){var i=n(this),r=i.data("mask");r.inputFocusValue==i.val()||r.changed||i.trigger("change");r.onBlur(this,t)},_onChange:function(){n(this).data("mask").changed=!0},_onMask:function(t){var r=t.data.thisObj,i={};return(i._this=t.target,i.$this=n(i._this),i.data=i.$this.data("mask"),i.$this.attr("readonly")||!i.data)?!0:(i[i.data.type]=!0,i.value=i.$this.val(),i.nKey=r.__getKeyNumber(t),i.range=r.__getRange(i._this),i.valueArray=i.value.split(""),t.data.func.call(r,t,i))},_onKeyDown:function(t,i){if(this.ignore=n.inArray(i.nKey,this.ignoreKeys)>-1||(t.ctrlKey||t.metaKey||t.altKey)&&t.key,this.ignore){var r=this.keyRep[i.nKey];i.data.onValid.call(i._this,r||"",i.nKey)}return!0},_onKeyUp:function(n,t){return t.nKey===9||t.nKey===16?!0:t.repeat?(this.__autoTab(t),!0):this._onPaste(n,t)},_onPaste:function(t,i){i.reverse&&this.__changeSignal(t.type,i);var r=this.__maskArray(i.valueArray,i.data.maskNonFixedCharsArray,i.data.maskArray,i.data.type,i.data.maxLength,i.data.defaultValue,i.data.fixedCharsReg,i.data.signal);return(i.$this.val(r),!i.reverse&&i.data.defaultValue.length&&i.range.start===i.range.end&&this.__setRange(i._this,i.range.start,i.range.end),(n.browser.msie||n.browser.safari)&&!i.reverse&&this.__setRange(i._this,i.range.start,i.range.end),this.ignore)?!0:(this.__autoTab(i),!0)},_onKeyPress:function(n,t){var s,h,e,o,c;if(this.ignore)return!0;t.reverse&&this.__changeSignal(n.type,t);var i=String.fromCharCode(t.nKey),r=t.range.start,u=t.value,f=t.data.maskArray;if(t.reverse&&(s=u.substr(0,r),h=u.substr(t.range.end,u.length),u=s+i+h,t.data.signal&&r-t.data.signal.length>0&&(r-=t.data.signal.length)),e=u.replace(t.data.fixedCharsRegG,"").split(""),o=this.__extraPositionsTill(r,f,t.data.fixedCharsReg),t.rsEp=r+o,t.repeat&&(t.rsEp=0),!this.rules[f[t.rsEp]]||t.data.maxLength!=-1&&e.length>=t.data.maxLength&&t.repeat)return t.data.onOverflow.call(t._this,i,t.nKey),!1;if(this.rules[f[t.rsEp]].test(i))t.data.onValid.call(t._this,i,t.nKey);else return t.data.onInvalid.call(t._this,i,t.nKey),!1;return c=this.__maskArray(e,t.data.maskNonFixedCharsArray,f,t.data.type,t.data.maxLength,t.data.defaultValue,t.data.fixedCharsReg,t.data.signal,o),t.repeat||t.$this.val(c),t.reverse?this._keyPressReverse(n,t):t.fixed?this._keyPressFixed(n,t):!0},_keyPressFixed:function(n,t){return t.range.start==t.range.end?(t.rsEp===0&&t.value.length===0||t.rsEp<t.value.length)&&this.__setRange(t._this,t.rsEp,t.rsEp+1):this.__setRange(t._this,t.range.start,t.range.end),!0},_keyPressReverse:function(t,i){return n.browser.msie&&(i.range.start===0&&i.range.end===0||i.range.start!=i.range.end)&&this.__setRange(i._this,i.value.length),!1},__autoTab:function(n){if(n.data.autoTab&&(n.$this.val().length>=n.data.maskArray.length&&!n.repeat||n.data.maxLength!=-1&&n.valueArray.length>=n.data.maxLength&&n.repeat)){var t=this.__getNextInput(n._this,n.data.autoTab);t&&(n.$this.trigger("blur"),t.focus().select())}},__changeSignal:function(n,t){if(t.data.signal!==!1){var i=n==="paste"?t.value.charAt(0):String.fromCharCode(t.nKey);this.signals&&typeof this.signals[i]!="undefined"&&(t.data.signal=this.signals[i])}},__getKeyNumber:function(n){return n.charCode||n.keyCode||n.which},__maskArray:function(n,t,i,r,u,f,e,o,s){r==="reverse"&&n.reverse();n=this.__removeInvalidChars(n,t,r==="repeat"||r==="infinite");f&&(n=this.__applyDefaultValue.call(n,f));n=this.__applyMask(n,i,s,e);switch(r){case"reverse":return n.reverse(),(o||"")+n.join("").substring(n.length-i.length);case"infinite":case"repeat":var h=n.join("");return u!==-1&&n.length>=u?h.substring(0,u):h;default:return n.join("").substring(0,i.length)}return""},__applyDefaultValue:function(n){for(var i=n.length,r=this.length,t=r-1;t>=0;t--)if(this[t]==n.charAt(0))this.pop();else break;for(t=0;t<i;t++)this[t]||(this[t]=n.charAt(t));return this},__removeInvalidChars:function(n,t,i){for(var r=0,u=0;r<n.length;r++)t[u]&&this.rules[t[u]]&&!this.rules[t[u]].test(n[r])&&(n.splice(r,1),i||u--,r--),i||u++;return n},__applyMask:function(n,t,i,r){typeof i=="undefined"&&(i=0);for(var u=0;u<n.length+i;u++)t[u]&&r.test(t[u])&&n.splice(u,0,t[u]);return n},__extraPositionsTill:function(n,t,i){for(var r=0;i.test(t[n++]);)r++;return r},__getNextInput:function(t,i){var c=t.form;if(c==null)return null;for(var e=c.elements,l=n.inArray(t,e)+1,o=e.length,u=null,r=l;r<o;r++)if(u=n(e[r]),this.__isNextInput(u,i))return u;for(var s=document.forms,a=n.inArray(t.form,s)+1,h,v=s.length,f=a;f<v;f++)for(h=s[f].elements,o=h.length,r=0;r<o;r++)if(u=n(h[r]),this.__isNextInput(u,i))return u;return null},__isNextInput:function(n,t){var i=n.get(0);return i&&(i.offsetWidth>0||i.offsetHeight>0)&&i.nodeName!="FIELDSET"&&(t===!0||typeof t=="string"&&n.is(t))},__setRange:function(n,t,i){if(typeof i=="undefined"&&(i=t),n.setSelectionRange)n.setSelectionRange(t,i);else{var r=n.createTextRange();r.collapse();r.moveStart("character",t);r.moveEnd("character",i-t);r.select()}},__getRange:function(t){if(!n.browser.msie&&!n.browser.android)return{start:t.selectionStart,end:t.selectionEnd};var i={start:0,end:0},r=document.selection.createRange();return i.start=0-r.duplicate().moveStart("character",-1e5),i.end=i.start+r.text.length,i},unmaskedVal:function(t){return n(t).val().replace(n.mask.fixedCharsRegG,"")}}});n.fn.extend({setMask:function(t){return n.mask.set(this,t)},unsetMask:function(){return n.mask.unset(this)},unmaskedVal:function(){return n.mask.unmaskedVal(this[0])}})}(jQuery);$(window).load(function(){var i=$(".d-page .d-page-headernav"),n=!1,t=$(".d-page-headernav").height();return i.css("position")==="fixed"?($(".d-page .d-page-content").css("margin-top",t+"px"),$(".d-sitetools ~ .d-page .d-page-content").css("margin-top",t+35+"px"),n=!0,!1):n});$(document).ready(function(){ShowLayoutEmpty(!1)});$(window).load(function(){$("a.d-widget-title-link").each(function(){$(this).children().length<=0&&$(this).css("display","none")})});
//# sourceMappingURL=bundleCustomUI.min.js.map