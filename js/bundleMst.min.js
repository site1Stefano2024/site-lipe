(function(n){n.resolveUrl=function(t){var i="/";return window.appPath&&(i=window.appPath),n("body").data("root")&&(i=n("body").data("root")),t.startsWith("~/")?t.replace("~/",i):void 0};n.res=function(n,t){return res!=undefined&&res[n]?res[n]:t};n.widget("dna.page",{options:{id:0,container:".d-page",change:null},_create:function(){var r=this,n=this.options,i=this.widgetEventPrefix,t=this.element;return this._layoutchanged=!1,this._contentchanged=!1,this._layoutmpl=null,this._mode=!1,this._widgetsloaded=!1,n.change&&t.bind(i+"change",n.change),t},applyfor:function(t){n.loading();n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/pages/applyfor/"+this.options.id),{scope:t},function(){n.loading("hide")})},savestyle:function(t){n.loading();n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/pages/savestyle/"+this.options.id),{text:t},function(){n.loading("hide");var i=n("#inpagestyle",document);i.length==0&&(i=n("<style id='inpagestyle' type='text/css' />"));i.text(t)})},design:function(t){t==!1?(this._mode=="contents"&&this._unloadzones(),n(document).off("mouseup").off("mousemove"),ShowLayoutEmpty(!1)):(this.loadwidgets(),ShowLayoutEmpty(!0));this._mode=t;n(document).trigger("designpage",t)},saveLayouts:function(){var r=n("<div/>").appendTo("body").hide(),o=n(".d-widget").appendTo(r),f=n(".d-state-design"),t=f.clone(!1),u="",i,e;t.removeAttr("style");n(".d-widget-zone-design",t).removeClass("d-widget-zone-design");n(".d-layout",t).removeClass("d-layout");n(".ui-sortable",t).removeClass("ui-sortable");n(".ui-resizable",t).removeClass("ui-resizable");n(".ui-droppable",t).removeClass("ui-droppable");n(".d-state-selected",t).removeClass("d-state-selected");u=t.html();t.remove();n("body>.d-page").remove();n(".d-state-design>.d-page").appendTo("body").removeAttr("style");n("[data-role=widgetzone]").each(function(t,i){n(i).widgetZone();n(".d-widget[data-zone="+n(i).attr("id")+"]").appendTo(i);n("[name=cliquezone"+n(i).attr("id")+"]").remove()});n("body>footer").appendTo("body");n("body>.d-state-design").remove();n.closePanels();r.children().length&&(i=n("[data-role=widgetzone]:last"),e=i.attr("id"),r.children().each(function(t,r){n(r).appendTo(i).attr("data-zone",i.attr("id"))}),r.children().appendTo(i));n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/pages/applylayout/"+n("body").data("id")+"?locale="+n("body").attr("lang")),{name:"",data:u,dir:"lrt",viewmode:""},function(){})},setPageHtml:function(t,i){return n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/pages/applylayout/"+n("body").data("id")+"?locale="+n("body").attr("lang")),{name:"",data:t,dir:i?i:"lrt",viewmode:""})},designLayouts:function(){var t=n("<div/>").addClass("d-state-design").appendTo("body").height(n(document).height()).width(n(document).width()-342).css("z-index",n.topMostIndex());n(".d-page").clone(!1).appendTo(t);n("footer",t).remove();n("[role=cliquezone]",t).remove();n("[data-role=widget]",t).remove();n("[data-role=layout]",t).layout();n.closePanels();n("#layouttools_panel").taoPanel("open");this.enableLayoutTmpls()},enableLayoutTmpls:function(){n(".d-layout-tmpl").draggable({appendTo:"body",cursor:"move",cursorAt:{left:30,top:15},helper:function(){var t=n(this).clone();return t.children("span").remove(),n("<div/>").addClass("d-layout-tmpl-helper").html("<span>Add <\/span>"+t.html()+" <span style='margin-right:5px;'>to<\/span><span data-name='targetholder'> ... <\/span>").css("z-index",n.topMostIndex())}})},cancelLayouts:function(){n("body>.d-state-design").remove();n.closePanels()},loadTmpl:function(t){var i=this;n.loading();n(this.options.container).load(n.resolveUrl("~/dynamicui/layout/"+t+"?locale="+n("body").attr("lang")),function(){n.loading("hide");i._layoutmpl=t;i.design("layouts");n("body").trigger("layoutchange");i._layoutchanged=!1})},loadwidgets:function(){var t=this;return n.get(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets?id="+n("body").data("id")),function(i){var r=n("[data-role='widgetzone']");r.each(function(t,r){var u=n(r),o=u.attr("id"),f=[],e;n.each(i,function(n,t){t.zone==o&&f.push(t)});e=f.sort(function(n,t){return n.pos>t.pos?1:n.pos==t.pos&&n.id>t.id?1:-1});u.empty();n.each(e,function(t,i){n("<div id='widget_"+i.id+"'/>").attr("data-role","widget").appendTo(u).widget(i)});u.widgetZone()});t._widgetsloaded=!0}),this},getTopLayout:function(){var t=n("[data-role='layout']");return n("[data-role=layout]:first",n("body"))},styleChanged:function(){this._layoutchanged=!0;n("#btnSavePageChange").isDisable(!1)},reset:function(){n.loading();n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/pages/reset/"+this.options.id),{includeLayout:!0},function(){location.reload()})},_unloadlayouts:function(){n("body").removeClass("d-state-design");n("[data-role='layout']").layout("destroy");n("[data-role='widgetzone']").off("click")},_unloadzones:function(){n("[data-role='widgetzone']").widgetZone("destroy");n("[data-role='widget']").widget("destroy")},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},destroy:function(){this.element.unbind(this.widgetEventPrefix+"change");n("body").off("layoutchange").off("click");n.Widget.prototype.destroy.call(this)}})})(jQuery),function(n){n.widget("dna.widget",{options:{id:null,title:null,link:null,icon:null,contentUrl:null,closable:!0,isStatic:!1,expanded:!0,cssText:null,headerCssText:null,bodyCssText:null,pos:0,showHeader:!0,showNomeArquivo:!0,showBorder:!0,transparent:!1,viewMode:null,descriptorId:null},_create:function(){var u=this,t=this.options,s=this.widgetEventPrefix,i=this.element,r,e,o,f;return this._unobtrusive(),i.addClass("d-ui-widget d-widget"),i.attr("data-zone",i.parent().attr("id")),t.expanded||i.addClass("d-widget-collapsed"),r=n(".d-widget-header",i),r.length==0&&(r=n("<div/>").addClass("d-ui-widget-header d-h3 d-widget-header").appendTo(i),e=n("<a/>").appendTo(r).addClass("d-widget-title-link"),o=n("<span/>").attr("contenteditable","false").addClass("d-widget-title-text").text(t.title?t.title:"").appendTo(e).bind("keydown",function(i){if(i.keyCode==13)return n(this).text()!=t.title&&n(this).trigger("change"),!1}).bind("blur",function(){n(this).text()!=t.title&&n(this).trigger("change")}).bind("change",function(){var i=n(this).text();t.title=i;u.settings({title:t.title})}),t.icon&&(t.icon.startsWith("d-icon")?n("<span/>").prependTo(r).addClass(t.icon).addClass("d-widget-icon"):n("<img/>").prependTo(r).attr("src",t.icon).addClass("d-widget-icon"))),f=n(".d-widget-body",i),f.length==0&&(f=n("<div/>").addClass("d-ui-widget-content d-widget-body").appendTo(i)),f.ajaxError(function(i,r,u,e){u.url==t.contentUrl&&n("<div/>").text("Ocorreu um erro ao carregar o widget. Erro :"+e).addClass("d-state-error").appendTo(f)}),t.cssText&&i.attr("style",t.cssText),t.headerCssText&&r.attr("style",t.headerCssText),t.bodyCssText&&f.attr("style",t.bodyCssText),t.showHeader?r.removeClass("d-widget-header-hide"):r.addClass("d-widget-header-hide"),t.showNomeArquivo?r.removeClass("d-widget-NomeArquivo-hide"):r.addClass("d-widget-NomeArquivo-hide"),t.showBorder||i.addClass("noborder"),t.transparent&&i.addClass("d-transparent"),t.expanded&&u.refresh(),i.bind("click",function(){n(".d-widget.d-state-active").isActive(!1);i.isActive(!0);u.openTools(this)}).bind("dblclick",function(){u.hasPrefs()&&u.openPrefs()}),t.viewMode=="floating"?u.float():t.showHeader||u.showHeader(!1),t.expanded||r.show(),i},changestyle:function(){var i=this,r=this.options,u=n(".d-widget-body",this.element),f=this.element;if(i.designer)n(".d-panel[data-opened=true]").not(i.designer).each(function(t,i){n(i).taoPanel("close")}),i.designer.taoPanel("open");else{var t=n("<div/>").appendTo("body").attr("data-pos","left").css("position","fixed"),e=n("<h3/>").text(n.res("changestyle","Change style")).appendTo(t),o=n("<div/>").appendTo(t);t.taoPanel({contentUrl:n.resolveUrl("~/widget/designer/"+this.options.id+"?locale="+n("body").attr("lang")),display:"overlay",opened:!0,load:function(){t.unobtrusive_editors()}});n(".d-panel[data-opened=true]").not(t).each(function(t,i){n(i).taoPanel("close")});i.designer=t}i.closeTools()},showHeader:function(t){var i=n(".d-widget-header",this.element);t?i.show():i.hide()},showNomeArquivo:function(t){var i=n(".d-widget-NomeArquivo",this.element);t?i.show():i.hide()},bingfront:function(){this.element.css("z-index",n.topMostIndex());this.savestyle()},sendback:function(){this.element.css("z-index",2);this.savestyle()},savestyle:function(){var t=n(".d-widget-body",this.element),i=n(".d-widget-header",this.element);n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/applystyle"),{id:this.options.id,box:this.element.attr("style")?this.element.attr("style"):"",body:t.attr("style")?t.attr("style"):"",header:i.attr("style")?i.attr("style"):""})},float:function(){var r=this.options,i=this,t=this.element,e=n(".d-widget-header",t),f=n(".d-widget-verbs",t),o=n(".d-widget-body",t),u;e.hide();r.viewMode!="floating"&&(i.settings({viewMode:"floating"}),r.viewMode="floating");u=function(){n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/applystyle"),{id:r.id,box:t.attr("style")})};t.addClass("d-widget-viewmode-floating").draggable({stop:u,handle:".d-widget-drag-handler"}).resizable({stop:u,ghost:!0,handles:"s,w,n,e"});f.length&&f.appendTo(t);i.tools&&(i.tools.remove(),i.tools=null,i.openTools())},restore:function(){var r=this.options,i=this,t=this.element;if(r.viewMode=="floating"){var u=n(".d-widget-header",t),f=n(".d-widget-verbs",t),e=n(".d-widget-body",t);u.show();t.css({left:"0px",top:"0px",position:"relative",width:"auto"});n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/applystyle"),{id:r.id,box:t.attr("style")},function(){i.settings({viewMode:""})});t.removeClass("d-widget-viewmode-floating").draggable("destroy").resizable("destroy");f.length&&f.appendTo(u);r.viewMode="";i.tools&&(i.tools.remove(),i.tools=null,i.openTools())}},_unobtrusive:function(){var n=this.element,t=this.options;return n.data("id")&&(t.id=n.data("id")),n.data("title")&&(t.title=n.data("title")),n.data("link")&&(t.link=n.data("link")),n.data("icon")&&(t.icon=n.data("icon")),n.data("content-url")&&(t.contentUrl=n.data("content-url")),n.data("style")&&(t.cssText=n.data("style")),n.data("header-style")&&(t.headerCssText=n.data("header-style")),n.data("body-style")&&(t.bodyCssText=n.data("body-style")),n.data("closable")!=undefined&&(t.closable=n.dataBool("closable")),n.data("static")!=undefined&&(t.isStatic=n.dataBool("static")),n.data("expanded")!=undefined&&(t.expanded=n.dataBool("expanded")),n.data("show-header")!=undefined&&(t.showHeader=n.dataBool("show-header")),n.data("show-NomeArquivo")!=undefined&&(t.showNomeArquivo=n.dataBool("show-NomeArquivo")),n.data("show-border")!=undefined&&(t.showBorder=n.dataBool("show-border")),n.data("pos")!=undefined&&(t.pos=n.dataInt("pos")),this},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},toggle:function(){var i=this.element,t=this.options,r=this;n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/toggle"),{id:this.options.id},function(){if(t.expanded)i.addClass("d-widget-collapsed");else{i.removeClass("d-widget-collapsed");var u=n(".d-widget-body",i);u.children().length==0&&r.refresh()}t.expanded=!t.expanded;t.expanded?r.showHeader(t.showHeader):r.showHeader(!0)})},help:function(){var r=this,t=this.options,u=this.element,i=n("body");dlg=n.openDlg({title:"Ajuda de componente",width:1e3,draggable:!1,resizable:!1,cache:!1,url:i.data("root")+"widget/help/"+t.id,autoOpen:!0})},del:function(){var r=this,t=this.options,i=this.element,u={id:t.id,el:i,title:t.title,link:t.link,iconUrl:t.icon,showHeader:t.showHeader,showNomeArquivo:t.showNomeArquivo,showBorder:t.showBorder};n.confirm("Se excluir este componente, as configurações poderão ser perdidas.","Confirmar exclusão de componente","Sim","Não").done(function(){n.ajax({url:n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/remove"),type:"post",dataType:"json",data:{id:t.id},error:function(t,i,r){n.err(r)}}).done(function(t,r,u){if(r!="success"){n.err(u.responseText);return}i.remove();var f=n(".d-widget-zone.ui-sortable.d-widget-zone-design.ui-droppable:empty").toArray();f.forEach(function(t){var i=n(t).append('<a role="cliquezone"  name="cliquezone'+n(t).attr("id")+'"><span> Clique aqui para inserir o conteúdo<\/span> <\/a>').css("","").children().css("","");i.click(function(i){i.preventDefault();overlay=n("<div/>").addClass("d-overlay").css({"z-index":n.topMostIndex()}).height(n(document).height()).appendTo("body");n(".ui-resizable-handle").hide();n("#hCliqueZona").val(n(t).attr("id"));n("#addwidget_panel").taoPanel("open")})})})})},prefs:function(t,i){var u=this,s=this.options,f=n(".d-widget-body",this.element),e=this.element,o=n("form.d-widget-prefs",f),r;return t!=undefined?(t.jquery?(r={id:this.options.id},n(":input[name]",t).each(function(t,i){var u=n(i);r[u.attr("name")]=u.val()}),n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/apply"),r,function(){i||u.refresh()})):(t.id==undefined&&(t.id=this.options.id),n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/apply"),t,function(){i||u.refresh()})),e):o.serialize()},settings:function(t){var u=this,i=this.options,r={id:i.id,title:i.title,link:i.link,iconUrl:i.icon,showHeader:i.showHeader,showNomeArquivo:i.showNomeArquivo,showBorder:i.showBorder};if(t!=undefined)r.noroles=!0,n.extend(r,t),n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/save"),r),u.setData(r);else return r},openSettings:function(){var t=this,r=this.options,u=n(".d-widget-body",this.element),f=this.element;if(t.settingPanel)n(".d-panel[data-opened=true]").not(t.settingPanel).each(function(t,i){n(i).taoPanel("close")}),t.settingPanel.taoPanel("open");else{var i=n("<div/>").appendTo("body").attr("data-pos","left").css("position","fixed"),e=n("<h3/>").text(res!=undefined&&res["widget-settings"]?res["widget-settings"]:"Widget settings").appendTo(i),o=n("<div/>").appendTo(i);i.taoPanel({contentUrl:n.resolveUrl("~/widget/settings/"+this.options.id+"?locale="+n("body").attr("lang")),display:"overlay",opened:!0});n(".d-panel[data-opened=true]").not(i).each(function(t,i){n(i).taoPanel("close")});t.settingPanel=i}t.closeTools()},openPrefs:function(){var r=this,s=this.options,h=n(".d-widget-body",this.element),o=this.element,t=r._prefsForm(),i,e;if(t.length){i=n("<div/>").attr("data-pos","left").appendTo("body").css("position","fixed");n("<h3/>").text(res!=undefined&&res.prefs?res.prefs:"User preferences").appendTo(i);var c=n("<div/>").appendTo(i).append(t.show()),u=t.dataBool("auto-save"),f=n("<div/>").addClass("d-form-buttons-holder").appendTo(t);u||(e=n("<button/>").text(res!=undefined&&res.save?res.save:"Save").attr("data-inline",!1).appendTo(f).taoButton(),t.attr("data-ajax")||(window.widget=o.find("iframe.d-widget-frame").get(0).contentWindow.widget,t.taoUI(),e.bind("click",function(i){i.stopPropagation();i.preventDefault();var u={};n("[name]",t).each(function(t,i){n(i).attr("type")=="checkbox"?(n(i).val().toLowerCase=="false"||n(i).attr("checked")==undefined)&&(u[n(i).attr("name")]=!1):u[n(i).attr("name")]=n(i).val()});n.post(n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/apply/"+s.id),u,function(){n.closePanels();t.remove();r.refresh()})})));r.closeTools();n.closePanels();i.taoPanel({opened:!0,autoRelease:!0,display:"overlay",close:function(){f&&f.remove();t&&!u&&t.prependTo(h).hide();i.remove()}});u||t.change(function(){e.isDisable(!1)})}return o},hasPrefs:function(){var n=this._prefsForm();return n.length==0?!1:!n.dataBool("hidden")},refresh:function(){var t=this.options,i=n(".d-widget-body",this.element),r=this;t.contentUrl&&(n.loading("Carregando componentes ..."),n.ajax(t.contentUrl).done(function(t){i.html(t).taoUI();var r=i.find("iframe.d-widget-frame");r.length>0&&n(r).bind("load",function(){var n=this.contentWindow.widget;n._triggerEvent("design")});n.loading("hide")}))},openTools:function(t){var e=this.options.contentUrl,f=e.search("wgdUID")?e.slice(e.search("wgdUID")+8):"",i;if(f==="list-info-produto")var r=this.options,u=this,o=this.element,h=function(){return r.viewMode=="floating"},s=[{title:"Excluir componente",icon:"icon-icoTool_Excluir",name:"del",hidden:r.isStatic},{title:"Ajuda do componente",icon:"icon-icoTool_Ajuda",name:"help",hidden:!1},];else var r=this.options,u=this,o=this.element,h=function(){return r.viewMode=="floating"},s=[{title:"Editar componente",icon:"icon-icoTool_Editar",name:"openPrefs",hidden:!this.hasPrefs()},{title:"Excluir componente",icon:"icon-icoTool_Excluir",name:"del",hidden:r.isStatic},{title:"Ajuda do componente",icon:"icon-icoTool_Ajuda",name:"help",hidden:!1},];if(f.indexOf("dataview")===0&&f!="dataview-phone"&&f!="dataview-linkutil")var r=this.options,u=this,o=this.element,h=function(){return r.viewMode=="floating"},s=[];n("#hCliqueZona").val(this.options.zone);n("#hPosWidget").val(this.options.pos);i=this.options.zone;cabecalhoRodape=i=="HeaderZone"||i=="FooterLeftZone"||i=="FooterCenterZone"||i=="FooterRightZone"||i=="FooterZone"?!0:!1;u.tools=u._createTools(s,t);u.tools.hasClass("d-state-opened")||(n(".d-widget").not(o).each(function(t,i){n(i).widget("closeTools")}),n.closePanels(),u.tools.height(0).css("z-index",9999).stop(!0,!1).animate({height:"31px"},200,function(){u.tools.addClass("d-state-opened")}))},closeTools:function(){var n=this,t=this.element;n.tools&&n.tools.hasClass("d-state-opened")&&n.tools.animate({height:"0px"},200,function(){n.tools.remove()})},disable:function(){return this.widget().isDisable(!0),this},enable:function(){return this.widget().isDisable(!1),this},move:function(t,i){var f=this,u=this.options,e=this.widgetEventPrefix,o=this.element,r;n("[name=cliquezone"+t+"]").remove();n.ajax({type:"POST",url:n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/moveto"),dataType:"json",data:{id:this.options.id,zoneID:t,pos:i},complete:function(){n("#widget_"+u.id).widget("refresh")},error:function(t){n.err(t.statusText,t.responseText)}});r=n(".d-widget-zone.ui-sortable.d-widget-zone-design.ui-droppable:empty").toArray();r.forEach(function(t){var i=n(t).append('<a role="cliquezone"  name="cliquezone'+n(t).attr("id")+'"><span> Clique aqui para inserir o conteúdo<\/span> <\/a>').css("","").children().css("","");i.click(function(i){i.preventDefault();overlay=n("<div/>").addClass("d-overlay").css({"z-index":n.topMostIndex()}).height(n(document).height()).appendTo("body");n(".ui-resizable-handle").hide();n("#hCliqueZona").val(n(t).attr("id"));n("#addwidget_panel").taoPanel("open")})})},setData:function(t){return t&&(this._setTitle(t.title),this._setLink(t.link),this._setIcon(t.icon),t.cssText&&this.element.attr("style",t.cssText),t.headerCssText&&n(".d-widget-header",this.element).attr("style",t.headerCssText),t.bodyCssText&&n(".d-widget-body",this.element).attr("style",t.bodyCssText),t.transparent?this.element.addClass("d-transparent"):this.element.removeClass("d-transparent"),t.showBorder?this.element.addClass("noborder"):this.element.removeClass("noborder"),this.options.expanded?this._setShowHeader(t.showHeader):this._setShowHeader(!0),this.options.expanded?this._setShowNomeArquivo(t.showNomeArquivo):this._setShowNomeArquivo(!0)),this.element},_createTools:function(t,i){var e,o;n(".d-tools").remove();var r=n("<div/>").addClass("d-ui-widget d-tools").appendTo("body"),u=n("<ul/>").appendTo(r),f=this;return n.each(t,function(t,i){if(!i.hidden)var r=n("<li/>").appendTo(u).addClass("d-items-tools").attr("title",i.title).append(n("<span/>").addClass(i.icon).css({cursor:"pointer","font-size":"22px",margin:"5px","line-height":"33px"})).css({"list-style":"none",display:"inline",cursor:"pointer","padding-top":"10px"}).click(function(){n.isFunction(f[i.name])&&f[i.name]()})}),n("[title]").tooltip({tooltipClass:"d-customTooltip"}),r.css({position:"absolute",right:"0px",top:"0px","z-index":"1"}),e=r.children(),e.css({overflow:"hidden"}),o=n(i),u.taoListview(),o.append(r),r},_prefsForm:function(){var t=n(".d-widget-body",this.element),e=this,u,f,i,r;return n("form.d-widget-prefs",t).length?(u=n("form.d-widget-prefs",t)[0],f=n(u),f):(i=t.find("iframe.d-widget-frame"),i.length&&(r=n("[data-role='widget-prefs']",i[0].contentWindow.document),r.length))?r:[]},_setTitle:function(t){var f=this,u=this.options,i=this.element,r=n(".d-widget-title-text",i);return r.length&&r.text()!=t&&t!=undefined&&(r.text(t),u.title=t,i.attr("data-title",t)),i},_setLink:function(t){var u=this,r=this.options,i=this.element,f=n(".d-widget-title-link",i);return t!=undefined&&(r.link=t,i.attr("data-link",t)),i},_setIcon:function(t){var e=this,u=this.options,i=this.element,r=n(".d-widget-title-link",i),f=r.children(".d-widget-icon");return f.length&&f.remove(),t&&(u.icon.startsWith("d-icon")?n("<span/>").prependTo(r).addClass(t).addClass("d-widget-icon"):n("<img/>").prependTo(r).attr("src",t).addClass("d-widget-icon")),u.icon=t?t:"",i.attr("data-icon",t?t:""),i},_setShowHeader:function(n){var r=this,i=this.options,t=this.element;return this.showHeader(n),i.showHeader=n,t.attr("data-show-header",n),t},_setShowNomeArquivo:function(n){var r=this,i=this.options,t=this.element;return this.showNomeArquivo(n),i.showNomeArquivo=n,t.attr("data-show-NomeArquivo",n),t},_setOption:function(t,i){return t=="title"?this._setTitle(i):t=="link"?this._setLink(i):t=="icon"?this._setIcon(i):t=="showHeader"?this._setShowHeader(i):t=="showNomeArquivo"?this._setShowNomeArquivo(i):n.Widget.prototype._setOption.call(this,t,i)},destroy:function(){var r=this.element,i,t;this.tools&&(this.tools.remove(),this.tools=null);this.designer&&(this.designer.remove(),this.designer=null);this.settingPanel&&(this.settingPanel.remove(),this.settingPanel=null);i=parseInt(r.attr("id").split("_")[1])+1;t=n("#widget_"+i);t.find(".produtosCorretor").length&&t.remove();n.Widget.prototype.destroy.call(this)}});document.documentMode&&n.ajaxSetup({cache:!1})}(jQuery),function(n){n.widget("dna.layout",{options:{label:null,focuszoneHolder:!1,columns:null,deletable:!0,designable:!0,pinnable:!1,extensible:!0,autoFixed:!1},_create:function(){var f=this,i=this.options,h=this.widgetEventPrefix,t=this.element,o,r,u,e,s;if(this._unobtrusive(),t.addClass("d-layout"),o=t.parents("[data-role='layout']").length==0,o)f._initDragAndDrop(t);else{if(r=n(">.d-layout-columns",t),u=n("<ul/>").appendTo(t).addClass("d-layout-tools"),u.taoMenu({type:"toolbar",datasource:[{icon:"d-icon-move dragHandler"},{icon:"d-icon-cog",cmd:"settings",click:function(){}},{icon:"d-icon-cross-3",click:function(){n.confirm(n.res("dellayoutconfirm","Are you sure delete this layout and embded layouts?")).done(function(){t.remove()})}}]}),f.layoutTools=u,t.bind("click",function(r){r.stopPropagation();r.preventDefault();n(".d-layout",t.closest(".d-state-design")).not(this).removeClass("d-state-selected");n(this).toggleClass("d-state-selected");n(this).children(".d-layout-tools").css({"z-index":n.topMostIndex()});i.columns<3&&(n("[data-cmd=settings]",u).remove(),u.css("width","auto"))}),i.extensible&&i.columns&&r.length==0)for(r=n("<div/>").addClass("d-layout-columns").appendTo(t),r.addClass("d-layout-columns-"+(t.data("class")?t.data("class"):i.columns)),e=0;e<i.columns;e++)n("<div/>").addClass("d-layout-column").appendTo(r);s=n(">.d-layout-columns>.d-layout-column",t);t.children(".d-widget-zone").length?f._initColumn(t):s.each(function(t,i){f._initColumn(n(i))})}this._initCommands()},_initColumn:function(n){this._initDragAndDrop(n);this._initZones(n)},_initZones:function(t){var f=this,e=this.options,o=this.element,r=n(">.d-widget-zone",t),i,u;e.focuszoneHolder&&r.length==0&&(i=f._genZoneID(),u=i.replace(/[^\d]+/g,""),r=n("<div id='"+i+"' />").attr("data-role","widgetzone").attr("data-label","Zona "+u).prependTo(t).addClass("d-layout d-widget-zone"))},_initCommands:function(){var t=this,r=this.element,i;this.wrapper&&(i={title:"Layout : "+this.options.label,commands:[{title:"Change style",name:"changestyle"}],verbs:[{title:"Bing to front",icon:"ui-icon ui-icon-help",name:"bingfront"},{title:"Send to back",icon:"ui-icon ui-icon-help",name:"sendback"},{title:"Delete",icon:"ui-icon ui-icon-trash",name:"del",close:!0}]},this.wrapper.bind("contextpopup",function(n){n.stopPropagation();n.returns=i}).bind("command",function(i,r){i.stopPropagation();n.isFunction(t[r])&&t[r]()}))},del:function(){this.element.remove()},_initDragAndDrop:function(t){var i=this;t.sortable({items:t.parents("[data-role='layout']").length==0?".d-layout":".d-layout,.d-widget-zone",connectWith:".d-layout",cancel:":input,.d-widget-zone",revert:100,placeholder:"placeholder",forceHelperSize:!0,dropOnEmpty:!0,forcePlaceholderSize:!0,cursorAt:{top:20},helper:function(t,i){var r=n(".d-widget",i),u=n.res("move","Move")+" <strong>"+i.children(".header").text()+"and "+r.length+" widgets<\/strong> "+n.res("to","to")+" ...<span><\/span>";return n("<div/>").addClass("d-layout-sortable-helper").html(u)},start:function(n,t){t.item.hide()},stop:function(){},update:function(){n("body").trigger("layoutchange",{layout:!0})}}).droppable({hoverClass:"d-state-hover",greedy:!0,accept:".d-layout-tmpl",drop:function(i,r){for(var u=r.draggable,h=u.data("cols"),o=u.data("title"),s=n("[data-role=layout]").length,f=s,e;n("#layout"+f).length;)f++;e=n('<div id="layout'+f+'" />').appendTo(t).attr("data-role","layout").attr("data-zone-holder","true").attr("data-label",o).attr("data-cols",u.data("cols")).attr("data-class",u.data("class")?u.data("class"):null).layout();e.addClass("d-page-part").removeAttr("data-zone-holder")},over:function(i,r){n("[data-name=targetholder]",r.helper).text(t.attr("data-label"))}})},_unobtrusive:function(){var t=this.options,n=this.element;n.data("label")&&(t.label=n.data("label"));n.data("zone-holder")!=undefined&&(t.focuszoneHolder=n.dataBool("zone-holder"));n.data("cols")&&(t.columns=eval(n.data("cols")));n.data("auto-fixed")!=undefined&&(t.autoFixed=n.dataBool("auto-fixed"));n.data("deletable")!=undefined&&(t.deletable=n.dataBool("deletable"));n.data("design")!=undefined&&(t.designable=n.dataBool("design"));n.data("extensible")!=undefined&&(t.deletable=n.dataBool("extensible"))},_triggerEvent:function(n,t){return this.element.trigger(this.widgetEventPrefix+n,t),this},_genZoneID:function(){for(var i=n("data-role['widgetzone']"),t=i.length;n("#zone"+t).length>0;)t++;return"zone"+t},destroy:function(){this.layoutTools&&this.layoutTools.remove();n(".ui-droppable",this.element).droppable("destroy");n(".ui-sortable",this.element).sortable("destroy");n(".ui-resizable",this.element).resizable("destroy");n(this.element).sortable("destroy");n(".d-state-hover",this.element).removeClass("d-state-hover");n(".d-state-selected",this.element).removeClass("d-state-selected");n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.widgetZone",{options:{items:".d-widget-zone",placeholder:"d-widget-placeholder",page:0,sandbox:!1},_create:function(){var u=this,r=this.options,f=this.widgetEventPrefix,i=this.element,e=i.attr("id"),o=n("body").attr("paginaInicial");i.sortable({items:".d-widget,[data-role='widget-descriptor'],[data-role='widget-creator']",connectWith:r.items,placeholder:r.placeholder,forceHelperSize:!1,forcePlaceholderSize:!0,opacity:.9,cursorAt:{left:150,top:25},start:function(n,t){t.item.hide()},tolerance:"intersect",helper:function(t,i){var r=i.widget("option","title")==""?"":"'"+i.widget("option","title")+"'",u=n.res("move","Move")+" "+r+" "+n.res("to","to")+" <span class='text' style='color:black !important;'>...<\/span>";return n("<div/>").html(u).addClass("d-widget-sortable-helper")},cursor:"move",revert:400,distance:50,cancel:".d-widget-viewmode-floating,[contenteditable=true],[data-editable=true]",stop:function(t,u){var e,h,f,c,l,s,o;if(u.item.show(),e=u.item,h=e.index(),e.data("role")=="widget-descriptor"&&(r.sandbox?(e.empty(),e.widget()):(f=n("<div/>").css("padding","10px"),n("<span/>").addClass("d-icon-loading d-inline").appendTo(f),n("<span/>").addClass("d-inline").appendTo(f).text(n.res("AddingWidget","Adicionando componente ...")),e.after(f),e.remove(),n.ajax({url:n.resolveUrl("~/api/"+n("body").data("web")+"/widgets/add?locale="+n("body").attr("lang")),type:"POST",data:{id:e.data("id"),pageId:n("body").data("id"),zoneID:i.attr("id"),pos:h,url:document.URL},error:function(t,i,r){f.remove();n.err("Ocorreu um erro! Não foi possível adicionar o componente na página. Erro :"+r)}}).done(function(t){function u(t){if(t.error){n.err(t.error);return}n(".d-overlay:first","body").remove();n.closePanels();n("[name=cliquezone"+i.attr("id")+"]").remove();var r=n('<div id="widget_'+t.id+'"/>').attr("data-role","widget").attr("data-zone",i.attr("id"));f.after(r);r.widget(t)}var e,r;if(Array.isArray(t))for(e=t.length,r=0;r<e;r++)u(t[r]);else u(t);f.remove()}))),e.data("role")=="widget-creator"){for(f=n("<div/>").css("padding","10px"),n("<span/>").addClass("d-loading d-inline").appendTo(f).width(16).height(16),n("<span/>").addClass("d-inline").appendTo(f).text(n.res("AddingWidget","Adicionando componente ...")),e.after(f),e.remove(),c={pageId:n("body").data("id"),zoneID:i.attr("id"),pos:h,url:document.URL,locale:n("body").attr("lang")},l=e[0].attributes,s=0;s<l.length;s++)o=l[s],o.localName!="data-role"&&o.localName!="data-url"&&(c[o.localName.replace("data-","")]=o.value);n.ajax({url:e.data("url"),type:"post",data:c,error:function(t,i,r){n.err("Ocorreu um erro! Não foi possível adicionar o componente na página. Erro :"+r)}}).done(function(t){var r,u;if(t.error){n.err(t.error);return}n.isArray(t)?(r=f,n.each(t,function(u,f){n("[name=cliquezone"+i.attr("id")+"]").remove();var e=n('<div id="widget_'+t.id+'"/>').attr("data-role","widget");r.after(e);e.widget(f);r=e}),f.remove()):(n("[name=cliquezone"+i.attr("id")+"]").remove(),u=n('<div id="widget_'+t.id+'"/>').attr("data-role","widget"),f.after(u),f.remove(),u.widget(t))})}},update:function(t,i){if(i.item.data("role")=="widget")try{var u=n(".d-widget",this),r=-1;u.length>0&&(r=u.index(i.item));r!=-1&&i.item.widget("move",n(this).attr("id"),r)}catch(f){n(i.sender).sortable("cancel")}}}).addClass("d-widget-zone-design").droppable({accept:"[data-role='widget']:not('.d-widget-viewmode-floating'),[data-role='widget-descriptor'],[data-role='widget-creator']",over:function(t,i){i.helper.find("span.text").text(n(this).attr("data-label")?n(this).attr("data-label"):n(this).attr("id"))}}).fileDroppable({stop:function(t,r){var e=!0,c=[],s,u,f;if(r.length>1){for(u=0;u<r.length;u++)if(s=r[u],s.type==""||!s.type.startsWith("image")){e=!1;break}}else e=!1;for(u=0;u<r.length;u++){var o=r[u],l=o.type?o.type.split("/")[0]+"s/":"",h=n.resolveUrl("~/webshared/"+n("body").attr("data-web")+"/"+l);e&&c.push({title:"",image:h+o.name,link:h+o.name});n.upload(h,o,null,function(t,r,u,f){if(!e){var s=n.parseJSON(f),o=n("<div/>").css("padding","10px");n("<span/>").addClass("d-loading d-inline").appendTo(o).width(16).height(16);n("<span/>").addClass("d-inline").appendTo(o).text(n.res("AddingWidget","Adicionando componente ..."));i.prepend(o);n.ajax({url:n.resolveUrl("~/api/"+n("body").attr("data-web")+"/widgets/addfile?locale="+n("body").attr("lang")),type:"post",data:{pageId:n("body").data("id"),zoneID:i.attr("id"),pos:0,url:document.URL,locale:n("body").attr("lang"),file:s.url},error:function(t,i,r){n.err("Ocorreu um erro! Não foi possível adicionar o componente na página. Erro :"+r)}}).done(function(t){var i,r;if(t.error){n.err(t.error);return}n.isArray(t)?(i=o,n.each(t,function(r,u){var f=n('<div id="widget_'+t.id+'"/>').attr("data-role","widget");i.after(f);f.widget(u);i=f}),o.remove()):(r=n('<div id="widget_'+t.id+'"/>').attr("data-role","widget"),o.after(r),o.remove(),r.widget(t))})}})}e&&(f=n("<div/>").css("padding","10px"),n("<span/>").addClass("d-loading d-inline").appendTo(f).width(16).height(16),n("<span/>").addClass("d-inline").appendTo(f).text(n.res("AddingWidget","Adicionando componente ...")),i.prepend(f),n.ajax({url:n.resolveUrl("~/api/"+n("body").attr("data-web")+"/widgets/addSlideShow?locale="+n("body").attr("lang")),type:"post",data:{pageId:n("body").data("id"),zoneID:i.attr("id"),pos:0,url:document.URL,locale:n("body").attr("lang"),json:JSON.stringify(c)},error:function(t,i,r){n.err("Ocorreu um erro! Não foi possível adicionar o componente na página. Erro :"+r)}}).done(function(t){var i,r;if(t.error){n.err(t.error);return}n.isArray(t)?(i=f,n.each(t,function(r,u){var f=n('<div id="widget_'+t.id+'"/>').attr("data-role","widget");i.after(f);f.widget(u);i=f}),f.remove()):(r=n('<div id="widget_'+t.id+'"/>').attr("data-role","widget"),f.after(r),f.remove(),r.widget(t))}))}});t()},settings:function(){},changestyle:function(){},bingfront:function(){this.element.css("z-index",n.topMostIndex());this.save()},sendback:function(){this.element.css("z-index",2);this.save()},save:function(){n("body").trigger("layoutchange",{layout:!0})},destroy:function(){this.element.sortable("destroy").droppable("destroy");this.element.unbind();this.element.removeClass("d-widget-zone-design");n.Widget.prototype.destroy.call(this)}});var t=function(){n("[title]").tooltip({tooltipClass:"d-customTooltip"});var t=n(".d-widget-zone.ui-sortable.d-widget-zone-design.ui-droppable:empty").toArray();t.forEach(function(t){var i=n(t).append('<a role="cliquezone"  name="cliquezone'+n(t).attr("id")+'"><span> Clique aqui para inserir o conteúdo<\/span> <\/a>').css("","").children().css("","");i.click(function(i){i.preventDefault();overlay=n("<div/>").addClass("d-overlay").css({"z-index":n.topMostIndex()}).height(n(document).height()).appendTo("body");n(".ui-resizable-handle").hide();n("#hCliqueZona").val(n(t).attr("id"));n("#addwidget_panel").taoPanel("open")})})};n.widget("dna.widgetDescriptor",{options:{connectTo:null},_create:function(){var i=this,r=this.options,u=this.widgetEventPrefix,t=this.element;t.draggable({connectToSortable:".d-widget-zone",appendTo:"body",zIndex:9999,helper:function(){return n("<div/>").attr("data-role","widget-descriptor").addClass("d-widget-desc-helper").css("z-Index",n.topMostIndex).html(n.res("add","Add")+" <strong>"+t.text()+"<\/strong> "+n.res("to","to")+" ...")},start:function(){n(this).data("startingScrollTop",window.pageYOffset)},drag:function(t,i){var r=parseInt(n(this).data("startingScrollTop"));i.position.top-=r}})},destroy:function(){n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.commentList",n.dna.taoDataBindingList,{options:{scroller:"parent",insertMode:"append",reaonly:!1},_create:function(){var i=this,n=this.options,r=this.widgetEventPrefix,t=this.element;t.addClass("d-comments");this._unobtrusive();t.data("readonly")!=undefined&&(n.reaonly=t.dataBool("readonly"));n.scroller&&this._setScroller(n.scroller);n.datasource&&this._setDataSource(n.datasource)},_onItemCreated:function(t,i){var u=this,f,o;t.addClass("d-item d-tran");var s=n("<a/>").appendTo(t).width(48).height(48).addClass("avatar").attr("href",i.actor.url).css({"background-image":"url("+i.actor.image.url+"?w=64&h=64)"}),r=n("<div/>").appendTo(t).addClass("detail"),e=n("<div/>").appendTo(r).addClass("names");return n("<a/>").attr("href",i.actor.url).addClass("dispName").text(i.actor.displayName).appendTo(e),n("<a/>").attr("href",i.actor.url).addClass("userName").text("@"+i.actor.id).appendTo(e),n("<span/>").addClass("posted").text(n.friendlyDate(i.published)).attr("title",n.jsonDate(i.published).toLocaleString()).attr("data-tooltip-width",200).appendTo(e),n("<div/>").appendTo(r).addClass("content").html(i.object.content),f=n("<div/>").appendTo(r).addClass("tools"),o=n("<span/>").appendTo(f).addClass("d-icon-bubbles-2"),btnReplies=n("<span/>").text("replies ("+i.replies.totalItems+")").appendTo(f).addClass("replies").one("click",function(){var e=n("<ul/>").appendTo(r),o=n("<div/>").appendTo(r),t=u._source.taoDataSource("option","actions"),f;t.read.data.replyTo=i.id;t.insert&&!u.options.reaonly&&(t.insert.data.replyTo=i.id);f=n("<div/>").appendTo(r);f.taoDataSource({actions:t,changed:function(){}});e.commentList({datasource:f,autoBind:!0,readonly:u.options.reaonly});u.options.reaonly||o.quickComment({datasource:f});n(this).bind("click",function(){e.slideToggle()})}),n("<span/>").appendTo(f).addClass("d-icon-flag").click(function(){n.isFunction(n.reportAbuse)&&n.reportAbuse(i.link,i.actor.id,i.object.objectType)}),r.width(t.width()-70),this}});n.widget("dna.commentbox",{options:{datasource:null,postText:"Post"},_create:function(){var t=this.element,r=this.options,u=this;t.data("source")&&(r.datasource=t.datajQuery("source"));t.data("text-post")&&(r.postText=t.data("text-post"));t.wrap("<div/>");var i=t.parent(),e=n("<div/>").appendTo(i).css("padding-top","5px"),f=n("<button/>").text(r.postText).appendTo(e).data("default",!0).attr("data-inline",!1).click(function(){n(this).isDisable()?t.focus():n("body").dataBool("auth")?u._addComment():n.login().done(function(){u._addComment()})});f.isDisable(n.trim(t.val())=="");t.addClass("d-textarea d-tran").bind("focus",function(){i.isActive(!0)}).bind("blur",function(){i.isActive(!1)}).bind("keyup",function(){f.isDisable(n.trim(n(this).val())=="")});i.taoUI();i.addClass("d-comment-box");this.wrapper=i},_addComment:function(){var t=this.options.datasource,i=this.element,n=this;t&&(n.disable(),t.taoDataSource("insert",{content:i.val()}).done(function(){i.val("");n.wrapper.find("button").isDisable(!0);n.enable()}))},disable:function(){return this.element.attr("disabled","disabled").isDisable(!0),this.wrapper.find("button").isDisable(!0),this.element},enable:function(){return this.element.removeAttr("disabled").isDisable(!1),this.element.val()!=""&&this.wrapper.find("button").isDisable(!1),this.element},destroy:function(){return this.wrapper.after(this.element),this.wrapper.remove(),this.element.removeClass("d-textarea").unbind(),n.Widget.prototype.destroy.call(this)}})}(jQuery),function(n){n.widget("dna.followButton",n.dna.taoButton,{options:{objectID:0,userName:"",followUrl:"/api/contents/follow",unfollowUrl:"/api/contents/unfollow",followingUrl:"/api/contents/isfollowing",autocheck:!1,isfollowing:!1,followText:"Follow",unfollowText:"Unfollow"},_create:function(){var i=this,t=this.options,u=this.widgetEventPrefix,r=this.element;if(n.dna.taoButton.prototype._create.call(this),i._toggleFollowState(),t.objectID==0&&t.userName==""){n.err("Por favor escolha o ábum ou username desse componente.");this.disable();return}t.autocheck&&(this.disable(),n.ajax({url:t.followingUrl+"/"+t.objectID,data:{owner:t.userName}}).done(function(n){t.isfollowing=n;i._toggleFollowState()}).always(function(){i.enable()}));r.click(function(u){(u.stopPropagation(),u.preventDefault(),r.isDisable())||(i.disable(),n.post((t.isfollowing?t.unfollowUrl:t.followUrl)+"/"+t.objectID,{owner:t.userName},function(n){t.isfollowing=n;i._toggleFollowState(!0);i.enable()}))})},_toggleFollowState:function(t){var r=this,i=this.options,u=this.widgetEventPrefix,f=this.element;i.isfollowing?(this._setOption("label",i.unfollowText),t&&(i.objectID?n.notify("You are following this album now."):n.notify("You are following all albums of "+i.userName+" now."))):(this._setOption("label",i.followText),t&&(i.objectID?n.notify("This album has been removed from your following list."):n.notify("You are unfollow all albums of this user.")))},_unobtrusive:function(){var r=this,i=this.options,t=this.element;return t.data("id")!=undefined&&(i.objectID=t.dataInt("id")),t.data("auto-check")!=undefined&&(i.autocheck=t.dataBool("auto-check")),t.data("isfollowing")!=undefined&&(i.isfollowing=t.dataBool("isfollowing")),t.data("user")&&(i.userName=t.data("user")),t.data("follow-url")&&(i.followUrl=t.data("follow-url")),t.data("unfollow-url")&&(i.followUrl=t.data("unfollow-url")),t.data("following-url")&&(i.checkUrl=t.data("following-url")),t.data("follow-text")&&(i.followText=t.data("follow-text")),t.data("unfollow-text")&&(i.unfollowText=t.data("unfollow-text")),n.dna.taoButton.prototype._unobtrusive.call(this)}})}(jQuery),function(n,t,i,r){$DNA_Web=function(){this.name=n("body").data("web");this.lang=n("body").attr("lang");var t=this;this.cats={load:function(i){var u=n.Deferred();return n.ajax(n.resolveUrl("~/api/"+t.name+"/"+t.lang+"/cats/items/"+(i!=r?i:0))).done(function(n){return u.resolve(n)}).fail(function(t,i,r){return n.err(r),u.reject()}),u},add:function(i){var r=n.Deferred();return n.post(n.resolveUrl("~/api/"+t.name+"/"+t.lang+"/cats/add"),i).done(function(n){return r.resolve(n)}).fail(function(t,i,u){return n.err(u),r.reject()}),r},remove:function(i){var r=n.Deferred();return n.post(n.resolveUrl("~/api/"+t.name+"/"+t.lang+"/cats/delete/"+i)).done(function(n){return r.resolve(n)}).fail(function(t,i,u){return n.err(u),r.reject()}),r},move:function(i,r){var u=n.Deferred();return n.post(n.resolveUrl("~/api/"+t.name+"/"+t.lang+"/cats/move/"+i),{parentID:r}).done(function(n){return u.resolve(n)}).fail(function(t,i,r){return n.err(r),u.reject()}),u},update:function(i){var r=n.Deferred();return n.post(n.resolveUrl("~/api/"+t.name+"/"+t.lang+"/cats/update"),i).done(function(n){return r.resolve(n)}).fail(function(t,i,u){return n.err(u),r.reject()}),r}}};n.extend($DNA_Web.prototype,{localizeTo:function(t){if(t==r&&n.err("Não exista uma linguagem definida para esse site."),t==this.lang){n.notify("Esse site já está utilizando: "+t);return}n.loading();var i=n.resolveUrl("~/dashboard/"+this.name+"/"+t+"/settings");return n.ajax({type:"POST",url:n.resolveUrl("~/api/"+this.name+"/langs/copy?locale="+this.lang),data:{to:t},complete:function(){n.loading("hide")},success:function(){location=i},error:function(t,i,r){n.err(r)}})},switchTo:function(t){if(t==r&&n.err("Não existe uma linguagem definida para esse site."),t==this.lang){n.notify("Current website already using "+t);return}return n.loading(),n.ajax({type:"POST",url:n.resolveUrl("~/api/"+this.name+"/langs/switch"),data:{to:t},complete:function(){n.loading("hide")},success:function(){location.reload()},error:function(t,i,r){n.err(r)}})}});$DNA_Page=function(t){this.parent=t;this.id=n("body").data("id");this.title=n("title").text();this.description=n("meta[name=description]").attr("content");this.keywords=n("meta[name=keywords]").attr("content")};n.extend($DNA_Page.prototype,{getWidgets:function(t){var i=this;return n.ajax({url:n.resolveUrl("~/api/"+this.parent.name+"/widgets?id="+this.id)}).done(function(r){n.isFunction(t)&&t(r);i.widgets=r}),this},getZones:function(){},reset:function(){return n.loading(),n.ajax({url:n.resolveUrl("~/api/"+this.parent.name+"/pages/reset/"+this.id),type:"post",data:{includeLayout:!0},complete:function(){n.loading("hide")}})},extractKeywords:function(){var t=[];return n("h1,h2,h3,h4,h5,h6",n(".d-page")).each(function(i,r){var u=n(r).text();u&&n.inArray(u,t)==-1&&t.push(n.trim(u.replace("\t","").replace("\n","")))}),n("[title]",n(".d-page")).each(function(i,r){var u=n(r).attr("title");u&&n.inArray(u,t)==-1&&t.push(n.trim(u.replace("\t","").replace("\n","")))}),t}});$DNA_FUC_InstallPKG=function(t,i,r,u){return n.ajax({url:n.resolveUrl("~/api/cloud/install/"+i),data:{type:t,name:r,category:u},error:function(t,i,r){n.err(r)}})};$DNA_Application=function(){this.web=new $DNA_Web;this.page=new $DNA_Page(this.web);this.widgets={install:function(n,t,i){return $DNA_FUC_InstallPKG("widget",n,t,i)},uninstall:function(t,i){return n.ajax({type:"POST",url:n.resolveUrl("~/api/widgets/uninstall"),data:{name:t,category:i},error:function(t,i,r){n.err(r)}})},enable:function(t,i){return n.ajax({type:"POST",url:n.resolveUrl("~/api/widgets/register"),data:{name:t,category:i},error:function(t,i,r){n.err(r)}})},disable:function(t){return n.ajax({type:"POST",url:n.resolveUrl("~/api/widgets/unregister"),data:{id:t},error:function(t,i,r){n.err(r)}})},update:function(t){return n.ajax({type:"POST",url:n.resolveUrl("~/api/widgets/update"),data:{id:t},error:function(t,i,r){n.err(r)}})}};this.themes={install:function(n,t){return $DNA_FUC_InstallPKG("theme",n,t)}};this.contentTypes={install:function(n,t){return $DNA_FUC_InstallPKG("list",n,t)},uninstall:function(t){return n.ajax({type:"POST",url:n.resolveUrl("~/api/cloud/uninstall"),data:{name:t,type:"contentType"},error:function(t,i,r){n.err(r)}})}}};n.extend($DNA_Application,{login:function(){},logout:function(){}});n(function(){t.app=new $DNA_Application})}(jQuery,window,document);
//# sourceMappingURL=bundleMst.min.js.map